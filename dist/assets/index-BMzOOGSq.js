var Yg=Object.defineProperty;var Bg=(r,t,e)=>t in r?Yg(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e;var iu=(r,t,e)=>Bg(r,typeof t!="symbol"?t+"":t,e);(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const s of n)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const s={};return n.integrity&&(s.integrity=n.integrity),n.referrerPolicy&&(s.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?s.credentials="include":n.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(n){if(n.ep)return;n.ep=!0;const s=e(n);fetch(n.href,s)}})();const nu=!1;var Gl=Array.isArray,Ug=Array.prototype.indexOf,zl=Array.from,Kg=Object.defineProperty,Jn=Object.getOwnPropertyDescriptor,Gc=Object.getOwnPropertyDescriptors,Vg=Object.prototype,Zg=Array.prototype,Xl=Object.getPrototypeOf,ru=Object.isExtensible;function jg(r){return r()}function io(r){for(var t=0;t<r.length;t++)r[t]()}const Ne=2,zc=4,ko=8,Wl=16,xi=32,vr=64,no=128,ue=256,ro=512,Ut=1024,Je=2048,Zi=4096,fi=8192,No=16384,Hg=32768,Yl=65536,qg=1<<17,$g=1<<19,Xc=1<<20,nl=1<<21,cn=Symbol("$state"),Jg=Symbol("legacy props"),Qg=Symbol("");function Wc(r){return r===this.v}function t_(r,t){return r!=r?t==t:r!==t||r!==null&&typeof r=="object"||typeof r=="function"}function Yc(r){return!t_(r,this.v)}function e_(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function i_(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function n_(r){throw new Error("https://svelte.dev/e/effect_orphan")}function r_(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function s_(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function o_(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function a_(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function l_(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Er=!1,h_=!1;function u_(){Er=!0}const c_=1,f_=2,d_=16,g_=2,__=1,m_=2,Kt=Symbol(),p_="http://www.w3.org/1999/xhtml";function Bc(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let ot=null;function su(r){ot=r}function Cn(r,t=!1,e){var i=ot={p:ot,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};Er&&!t&&(ot.l={s:null,u:null,r1:[],r2:es(!1)}),ef(()=>{i.d=!0})}function Tn(r){const t=ot;if(t!==null){const o=t.e;if(o!==null){var e=st,i=rt;t.e=null;try{for(var n=0;n<o.length;n++){var s=o[n];Bi(s.effect),Qe(s.reaction),Kl(s.fn)}}finally{Bi(e),Qe(i)}}ot=t.p,t.m=!0}return{}}function Go(){return!Er||ot!==null&&ot.l===null}function Wn(r){if(typeof r!="object"||r===null||cn in r)return r;const t=Xl(r);if(t!==Vg&&t!==Zg)return r;var e=new Map,i=Gl(r),n=wi(0),s=rt,o=a=>{var l=rt;Qe(s);var h=a();return Qe(l),h};return i&&e.set("length",wi(r.length)),new Proxy(r,{defineProperty(a,l,h){(!("value"in h)||h.configurable===!1||h.enumerable===!1||h.writable===!1)&&o_();var u=e.get(l);return u===void 0?(u=o(()=>wi(h.value)),e.set(l,u)):bt(u,o(()=>Wn(h.value))),!0},deleteProperty(a,l){var h=e.get(l);if(h===void 0)l in a&&(e.set(l,o(()=>wi(Kt))),va(n));else{if(i&&typeof l=="string"){var u=e.get("length"),c=Number(l);Number.isInteger(c)&&c<u.v&&bt(u,c)}bt(h,Kt),va(n)}return!0},get(a,l,h){var d;if(l===cn)return r;var u=e.get(l),c=l in a;if(u===void 0&&(!c||(d=Jn(a,l))!=null&&d.writable)&&(u=o(()=>wi(Wn(c?a[l]:Kt))),e.set(l,u)),u!==void 0){var f=K(u);return f===Kt?void 0:f}return Reflect.get(a,l,h)},getOwnPropertyDescriptor(a,l){var h=Reflect.getOwnPropertyDescriptor(a,l);if(h&&"value"in h){var u=e.get(l);u&&(h.value=K(u))}else if(h===void 0){var c=e.get(l),f=c==null?void 0:c.v;if(c!==void 0&&f!==Kt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return h},has(a,l){var f;if(l===cn)return!0;var h=e.get(l),u=h!==void 0&&h.v!==Kt||Reflect.has(a,l);if(h!==void 0||st!==null&&(!u||(f=Jn(a,l))!=null&&f.writable)){h===void 0&&(h=o(()=>wi(u?Wn(a[l]):Kt)),e.set(l,h));var c=K(h);if(c===Kt)return!1}return u},set(a,l,h,u){var y;var c=e.get(l),f=l in a;if(i&&l==="length")for(var d=h;d<c.v;d+=1){var _=e.get(d+"");_!==void 0?bt(_,Kt):d in a&&(_=o(()=>wi(Kt)),e.set(d+"",_))}c===void 0?(!f||(y=Jn(a,l))!=null&&y.writable)&&(c=o(()=>wi(void 0)),bt(c,o(()=>Wn(h))),e.set(l,c)):(f=c.v!==Kt,bt(c,o(()=>Wn(h))));var g=Reflect.getOwnPropertyDescriptor(a,l);if(g!=null&&g.set&&g.set.call(u,h),!f){if(i&&typeof l=="string"){var m=e.get("length"),p=Number(l);Number.isInteger(p)&&p>=m.v&&bt(m,p+1)}va(n)}return!0},ownKeys(a){K(n);var l=Reflect.ownKeys(a).filter(c=>{var f=e.get(c);return f===void 0||f.v!==Kt});for(var[h,u]of e)u.v!==Kt&&!(h in a)&&l.push(h);return l},setPrototypeOf(){a_()}})}function va(r,t=1){bt(r,r.v+t)}function Bl(r){var t=Ne|Je,e=rt!==null&&(rt.f&Ne)!==0?rt:null;return st===null||e!==null&&(e.f&ue)!==0?t|=ue:st.f|=Xc,{ctx:ot,deps:null,effects:null,equals:Wc,f:t,fn:r,reactions:null,rv:0,v:null,wv:0,parent:e??st}}function Uc(r){const t=Bl(r);return t.equals=Yc,t}function Kc(r){var t=r.effects;if(t!==null){r.effects=null;for(var e=0;e<t.length;e+=1)Yi(t[e])}}function y_(r){for(var t=r.parent;t!==null;){if((t.f&Ne)===0)return t;t=t.parent}return null}function Vc(r){var t,e=st;Bi(y_(r));try{Kc(r),t=gf(r)}finally{Bi(e)}return t}function Zc(r){var t=Vc(r),e=(Pi||(r.f&ue)!==0)&&r.deps!==null?Zi:Ut;Me(r,e),r.equals(t)||(r.v=t,r.wv=ff())}const ts=new Map;function es(r,t){var e={f:0,v:r,reactions:null,equals:Wc,rv:0,wv:0};return e}function wi(r,t){const e=es(r);return P_(e),e}function yn(r,t=!1){var i;const e=es(r);return t||(e.equals=Yc),Er&&ot!==null&&ot.l!==null&&((i=ot.l).s??(i.s=[])).push(e),e}function x_(r,t){return bt(r,Tr(()=>K(r))),t}function bt(r,t,e=!1){rt!==null&&!Ue&&Go()&&(rt.f&(Ne|Wl))!==0&&!(Bt!=null&&Bt.includes(r))&&l_();let i=e?Wn(t):t;return jc(r,i)}function jc(r,t){if(!r.equals(t)){var e=r.v;Cs?ts.set(r,t):ts.set(r,e),r.v=t,(r.f&Ne)!==0&&((r.f&Je)!==0&&Vc(r),Me(r,(r.f&ue)===0?Ut:Zi)),r.wv=ff(),Hc(r,Je),Go()&&st!==null&&(st.f&Ut)!==0&&(st.f&(xi|vr))===0&&(Ee===null?L_([r]):Ee.push(r))}return t}function Hc(r,t){var e=r.reactions;if(e!==null)for(var i=Go(),n=e.length,s=0;s<n;s++){var o=e[s],a=o.f;(a&Je)===0&&(!i&&o===st||(Me(o,t),(a&(Ut|ue))!==0&&((a&Ne)!==0?Hc(o,Zi):Bo(o))))}}let v_=!1;var ou,qc,$c,Jc;function E_(){if(ou===void 0){ou=window,qc=/Firefox/.test(navigator.userAgent);var r=Element.prototype,t=Node.prototype,e=Text.prototype;$c=Jn(t,"firstChild").get,Jc=Jn(t,"nextSibling").get,ru(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),ru(e)&&(e.__t=void 0)}}function Ul(r=""){return document.createTextNode(r)}function so(r){return $c.call(r)}function zo(r){return Jc.call(r)}function Et(r,t){return so(r)}function Qc(r,t){{var e=so(r);return e instanceof Comment&&e.data===""?zo(e):e}}function wt(r,t=1,e=!1){let i=r;for(;t--;)i=zo(i);return i}function w_(r){r.textContent=""}function tf(r){st===null&&rt===null&&n_(),rt!==null&&(rt.f&ue)!==0&&st===null&&i_(),Cs&&e_()}function C_(r,t){var e=t.last;e===null?t.last=t.first=r:(e.next=r,r.prev=e,t.last=r)}function wr(r,t,e,i=!0){var n=st,s={ctx:ot,deps:null,nodes_start:null,nodes_end:null,f:r|Je,first:null,fn:t,last:null,next:null,parent:n,prev:null,teardown:null,transitions:null,wv:0};if(e)try{Yo(s),s.f|=Hg}catch(l){throw Yi(s),l}else t!==null&&Bo(s);var o=e&&s.deps===null&&s.first===null&&s.nodes_start===null&&s.teardown===null&&(s.f&(Xc|no))===0;if(!o&&i&&(n!==null&&C_(s,n),rt!==null&&(rt.f&Ne)!==0)){var a=rt;(a.effects??(a.effects=[])).push(s)}return s}function ef(r){const t=wr(ko,null,!1);return Me(t,Ut),t.teardown=r,t}function rl(r){tf();var t=st!==null&&(st.f&xi)!==0&&ot!==null&&!ot.m;if(t){var e=ot;(e.e??(e.e=[])).push({fn:r,effect:st,reaction:rt})}else{var i=Kl(r);return i}}function T_(r){return tf(),Xo(r)}function R_(r){const t=wr(vr,r,!0);return(e={})=>new Promise(i=>{e.outro?oo(t,()=>{Yi(t),i(void 0)}):(Yi(t),i(void 0))})}function Kl(r){return wr(zc,r,!1)}function Ea(r,t){var e=ot,i={effect:null,ran:!1};e.l.r1.push(i),i.effect=Xo(()=>{r(),!i.ran&&(i.ran=!0,bt(e.l.r2,!0),Tr(t))})}function S_(){var r=ot;Xo(()=>{if(K(r.l.r2)){for(var t of r.l.r1){var e=t.effect;(e.f&Ut)!==0&&Me(e,Zi),Cr(e)&&Yo(e),t.ran=!1}r.l.r2.v=!1}})}function Xo(r){return wr(ko,r,!0)}function nf(r,t=[],e=Bl){const i=t.map(e);return Vl(()=>r(...i.map(K)))}function Vl(r,t=0){return wr(ko|Wl|t,r,!0)}function is(r,t=!0){return wr(ko|xi,r,!0,t)}function rf(r){var t=r.teardown;if(t!==null){const e=Cs,i=rt;au(!0),Qe(null);try{t.call(null)}finally{au(e),Qe(i)}}}function sf(r,t=!1){var e=r.first;for(r.first=r.last=null;e!==null;){var i=e.next;(e.f&vr)!==0?e.parent=null:Yi(e,t),e=i}}function I_(r){for(var t=r.first;t!==null;){var e=t.next;(t.f&xi)===0&&Yi(t),t=e}}function Yi(r,t=!0){var e=!1;(t||(r.f&$g)!==0)&&r.nodes_start!==null&&(b_(r.nodes_start,r.nodes_end),e=!0),sf(r,t&&!e),co(r,0),Me(r,No);var i=r.transitions;if(i!==null)for(const s of i)s.stop();rf(r);var n=r.parent;n!==null&&n.first!==null&&of(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function b_(r,t){for(;r!==null;){var e=r===t?null:zo(r);r.remove(),r=e}}function of(r){var t=r.parent,e=r.prev,i=r.next;e!==null&&(e.next=i),i!==null&&(i.prev=e),t!==null&&(t.first===r&&(t.first=i),t.last===r&&(t.last=e))}function oo(r,t){var e=[];Zl(r,e,!0),af(e,()=>{Yi(r),t&&t()})}function af(r,t){var e=r.length;if(e>0){var i=()=>--e||t();for(var n of r)n.out(i)}else t()}function Zl(r,t,e){if((r.f&fi)===0){if(r.f^=fi,r.transitions!==null)for(const o of r.transitions)(o.is_global||e)&&t.push(o);for(var i=r.first;i!==null;){var n=i.next,s=(i.f&Yl)!==0||(i.f&xi)!==0;Zl(i,t,s?e:!1),i=n}}}function ao(r){lf(r,!0)}function lf(r,t){if((r.f&fi)!==0){r.f^=fi,(r.f&Ut)===0&&(r.f^=Ut),Cr(r)&&(Me(r,Je),Bo(r));for(var e=r.first;e!==null;){var i=e.next,n=(e.f&Yl)!==0||(e.f&xi)!==0;lf(e,n?t:!1),e=i}if(r.transitions!==null)for(const s of r.transitions)(s.is_global||t)&&s.in()}}let ns=[],sl=[];function hf(){var r=ns;ns=[],io(r)}function M_(){var r=sl;sl=[],io(r)}function uf(r){ns.length===0&&queueMicrotask(hf),ns.push(r)}function A_(){ns.length>0&&hf(),sl.length>0&&M_()}let $s=!1,lo=!1,ho=null,fn=!1,Cs=!1;function au(r){Cs=r}let jr=[];let rt=null,Ue=!1;function Qe(r){rt=r}let st=null;function Bi(r){st=r}let Bt=null;function P_(r){rt!==null&&rt.f&nl&&(Bt===null?Bt=[r]:Bt.push(r))}let zt=null,oe=0,Ee=null;function L_(r){Ee=r}let cf=1,uo=0,Pi=!1;function ff(){return++cf}function Cr(r){var c;var t=r.f;if((t&Je)!==0)return!0;if((t&Zi)!==0){var e=r.deps,i=(t&ue)!==0;if(e!==null){var n,s,o=(t&ro)!==0,a=i&&st!==null&&!Pi,l=e.length;if(o||a){var h=r,u=h.parent;for(n=0;n<l;n++)s=e[n],(o||!((c=s==null?void 0:s.reactions)!=null&&c.includes(h)))&&(s.reactions??(s.reactions=[])).push(h);o&&(h.f^=ro),a&&u!==null&&(u.f&ue)===0&&(h.f^=ue)}for(n=0;n<l;n++)if(s=e[n],Cr(s)&&Zc(s),s.wv>r.wv)return!0}(!i||st!==null&&!Pi)&&Me(r,Ut)}return!1}function O_(r,t){for(var e=t;e!==null;){if((e.f&no)!==0)try{e.fn(r);return}catch{e.f^=no}e=e.parent}throw $s=!1,r}function lu(r){return(r.f&No)===0&&(r.parent===null||(r.parent.f&no)===0)}function Wo(r,t,e,i){if($s){if(e===null&&($s=!1),lu(t))throw r;return}if(e!==null&&($s=!0),O_(r,t),lu(t))throw r}function df(r,t,e=!0){var i=r.reactions;if(i!==null)for(var n=0;n<i.length;n++){var s=i[n];Bt!=null&&Bt.includes(r)||((s.f&Ne)!==0?df(s,t,!1):t===s&&(e?Me(s,Je):(s.f&Ut)!==0&&Me(s,Zi),Bo(s)))}}function gf(r){var d;var t=zt,e=oe,i=Ee,n=rt,s=Pi,o=Bt,a=ot,l=Ue,h=r.f;zt=null,oe=0,Ee=null,Pi=(h&ue)!==0&&(Ue||!fn||rt===null),rt=(h&(xi|vr))===0?r:null,Bt=null,su(r.ctx),Ue=!1,uo++,r.f|=nl;try{var u=(0,r.fn)(),c=r.deps;if(zt!==null){var f;if(co(r,oe),c!==null&&oe>0)for(c.length=oe+zt.length,f=0;f<zt.length;f++)c[oe+f]=zt[f];else r.deps=c=zt;if(!Pi)for(f=oe;f<c.length;f++)((d=c[f]).reactions??(d.reactions=[])).push(r)}else c!==null&&oe<c.length&&(co(r,oe),c.length=oe);if(Go()&&Ee!==null&&!Ue&&c!==null&&(r.f&(Ne|Zi|Je))===0)for(f=0;f<Ee.length;f++)df(Ee[f],r);return n!==null&&n!==r&&(uo++,Ee!==null&&(i===null?i=Ee:i.push(...Ee))),u}finally{zt=t,oe=e,Ee=i,rt=n,Pi=s,Bt=o,su(a),Ue=l,r.f^=nl}}function D_(r,t){let e=t.reactions;if(e!==null){var i=Ug.call(e,r);if(i!==-1){var n=e.length-1;n===0?e=t.reactions=null:(e[i]=e[n],e.pop())}}e===null&&(t.f&Ne)!==0&&(zt===null||!zt.includes(t))&&(Me(t,Zi),(t.f&(ue|ro))===0&&(t.f^=ro),Kc(t),co(t,0))}function co(r,t){var e=r.deps;if(e!==null)for(var i=t;i<e.length;i++)D_(r,e[i])}function Yo(r){var t=r.f;if((t&No)===0){Me(r,Ut);var e=st,i=ot,n=fn;st=r,fn=!0;try{(t&Wl)!==0?I_(r):sf(r),rf(r);var s=gf(r);r.teardown=typeof s=="function"?s:null,r.wv=cf;var o=r.deps,a;nu&&h_&&r.f&Je}catch(l){Wo(l,r,e,i||r.ctx)}finally{fn=n,st=e}}}function F_(){try{r_()}catch(r){if(ho!==null)Wo(r,ho,null);else throw r}}function _f(){var r=fn;try{var t=0;for(fn=!0;jr.length>0;){t++>1e3&&F_();var e=jr,i=e.length;jr=[];for(var n=0;n<i;n++){var s=N_(e[n]);k_(s)}ts.clear()}}finally{lo=!1,fn=r,ho=null}}function k_(r){var t=r.length;if(t!==0)for(var e=0;e<t;e++){var i=r[e];if((i.f&(No|fi))===0)try{Cr(i)&&(Yo(i),i.deps===null&&i.first===null&&i.nodes_start===null&&(i.teardown===null?of(i):i.fn=null))}catch(n){Wo(n,i,null,i.ctx)}}}function Bo(r){lo||(lo=!0,queueMicrotask(_f));for(var t=ho=r;t.parent!==null;){t=t.parent;var e=t.f;if((e&(vr|xi))!==0){if((e&Ut)===0)return;t.f^=Ut}}jr.push(t)}function N_(r){for(var t=[],e=r;e!==null;){var i=e.f,n=(i&(xi|vr))!==0,s=n&&(i&Ut)!==0;if(!s&&(i&fi)===0){if((i&zc)!==0)t.push(e);else if(n)e.f^=Ut;else try{Cr(e)&&Yo(e)}catch(l){Wo(l,e,null,e.ctx)}var o=e.first;if(o!==null){e=o;continue}}var a=e.parent;for(e=e.next;e===null&&a!==null;)e=a.next,a=a.parent}return t}function G_(r){for(var t;;){if(A_(),jr.length===0)return t;lo=!0,_f()}}async function z_(){await Promise.resolve(),G_()}function K(r){var t=r.f,e=(t&Ne)!==0;if(rt!==null&&!Ue){if(!(Bt!=null&&Bt.includes(r))){var i=rt.deps;r.rv<uo&&(r.rv=uo,zt===null&&i!==null&&i[oe]===r?oe++:zt===null?zt=[r]:(!Pi||!zt.includes(r))&&zt.push(r))}}else if(e&&r.deps===null&&r.effects===null){var n=r,s=n.parent;s!==null&&(s.f&ue)===0&&(n.f^=ue)}return e&&(n=r,Cr(n)&&Zc(n)),Cs&&ts.has(r)?ts.get(r):r.v}function Tr(r){var t=Ue;try{return Ue=!0,r()}finally{Ue=t}}const X_=-7169;function Me(r,t){r.f=r.f&X_|t}function Js(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(cn in r)ol(r);else if(!Array.isArray(r))for(let t in r){const e=r[t];typeof e=="object"&&e&&cn in e&&ol(e)}}}function ol(r,t=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!t.has(r)){t.add(r),r instanceof Date&&r.getTime();for(let i in r)try{ol(r[i],t)}catch{}const e=Xl(r);if(e!==Object.prototype&&e!==Array.prototype&&e!==Map.prototype&&e!==Set.prototype&&e!==Date.prototype){const i=Gc(e);for(let n in i){const s=i[n].get;if(s)try{s.call(r)}catch{}}}}}const W_=["touchstart","touchmove"];function Y_(r){return W_.includes(r)}function B_(r){var t=rt,e=st;Qe(null),Bi(null);try{return r()}finally{Qe(t),Bi(e)}}const U_=new Set,hu=new Set;function K_(r,t,e,i={}){function n(s){if(i.capture||zr.call(t,s),!s.cancelBubble)return B_(()=>e==null?void 0:e.call(this,s))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?uf(()=>{t.addEventListener(r,n,i)}):t.addEventListener(r,n,i),n}function mf(r,t,e,i,n){var s={capture:i,passive:n},o=K_(r,t,e,s);(t===document.body||t===window||t===document)&&ef(()=>{t.removeEventListener(r,o,s)})}function zr(r){var y;var t=this,e=t.ownerDocument,i=r.type,n=((y=r.composedPath)==null?void 0:y.call(r))||[],s=n[0]||r.target,o=0,a=r.__root;if(a){var l=n.indexOf(a);if(l!==-1&&(t===document||t===window)){r.__root=t;return}var h=n.indexOf(t);if(h===-1)return;l<=h&&(o=l)}if(s=n[o]||r.target,s!==t){Kg(r,"currentTarget",{configurable:!0,get(){return s||e}});var u=rt,c=st;Qe(null),Bi(null);try{for(var f,d=[];s!==null;){var _=s.assignedSlot||s.parentNode||s.host||null;try{var g=s["__"+i];if(g!=null&&(!s.disabled||r.target===s))if(Gl(g)){var[m,...p]=g;m.apply(s,[r,...p])}else g.call(s,r)}catch(E){f?d.push(E):f=E}if(r.cancelBubble||_===t||_===null)break;s=_}if(f){for(let E of d)queueMicrotask(()=>{throw E});throw f}}finally{r.__root=t,delete r.currentTarget,Qe(u),Bi(c)}}}function V_(r){var t=document.createElement("template");return t.innerHTML=r,t.content}function al(r,t){var e=st;e.nodes_start===null&&(e.nodes_start=r,e.nodes_end=t)}function Pe(r,t){var e=(t&__)!==0,i=(t&m_)!==0,n,s=!r.startsWith("<!>");return()=>{n===void 0&&(n=V_(s?r:"<!>"+r),e||(n=so(n)));var o=i||qc?document.importNode(n,!0):n.cloneNode(!0);if(e){var a=so(o),l=o.lastChild;al(a,l)}else al(o,o);return o}}function Z_(){var r=document.createDocumentFragment(),t=document.createComment(""),e=Ul();return r.append(t,e),al(t,e),r}function fe(r,t){r!==null&&r.before(t)}function wa(r,t){var e=t==null?"":typeof t=="object"?t+"":t;e!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=e,r.nodeValue=e+"")}function j_(r,t){return H_(r,t)}const Ln=new Map;function H_(r,{target:t,anchor:e,props:i={},events:n,context:s,intro:o=!0}){E_();var a=new Set,l=c=>{for(var f=0;f<c.length;f++){var d=c[f];if(!a.has(d)){a.add(d);var _=Y_(d);t.addEventListener(d,zr,{passive:_});var g=Ln.get(d);g===void 0?(document.addEventListener(d,zr,{passive:_}),Ln.set(d,1)):Ln.set(d,g+1)}}};l(zl(U_)),hu.add(l);var h=void 0,u=R_(()=>{var c=e??t.appendChild(Ul());return is(()=>{if(s){Cn({});var f=ot;f.c=s}n&&(i.$$events=n),h=r(c,i)||{},s&&Tn()}),()=>{var _;for(var f of a){t.removeEventListener(f,zr);var d=Ln.get(f);--d===0?(document.removeEventListener(f,zr),Ln.delete(f)):Ln.set(f,d)}hu.delete(l),c!==e&&((_=c.parentNode)==null||_.removeChild(c))}});return q_.set(h,u),h}let q_=new WeakMap;function $_(r,t,[e,i]=[0,0]){var n=r,s=null,o=null,a=Kt,l=e>0?Yl:0,h=!1;const u=(f,d=!0)=>{h=!0,c(d,f)},c=(f,d)=>{a!==(a=f)&&(a?(s?ao(s):d&&(s=is(()=>d(n))),o&&oo(o,()=>{o=null})):(o?ao(o):d&&(o=is(()=>d(n,[e+1,i]))),s&&oo(s,()=>{s=null})))};Vl(()=>{h=!1,t(u),h||c(null,null)},l)}function pf(r,t){return t}function J_(r,t,e,i){for(var n=[],s=t.length,o=0;o<s;o++)Zl(t[o].e,n,!0);var a=s>0&&n.length===0&&e!==null;if(a){var l=e.parentNode;w_(l),l.append(e),i.clear(),Mi(r,t[0].prev,t[s-1].next)}af(n,()=>{for(var h=0;h<s;h++){var u=t[h];a||(i.delete(u.k),Mi(r,u.prev,u.next)),Yi(u.e,!a)}})}function yf(r,t,e,i,n,s=null){var o=r,a={flags:t,items:new Map,first:null};{var l=r;o=l.appendChild(Ul())}var h=null,u=!1,c=Uc(()=>{var f=e();return Gl(f)?f:f==null?[]:zl(f)});Vl(()=>{var f=K(c),d=f.length;u&&d===0||(u=d===0,Q_(f,a,o,n,t,i,e),s!==null&&(d===0?h?ao(h):h=is(()=>s(o)):h!==null&&oo(h,()=>{h=null})),K(c))})}function Q_(r,t,e,i,n,s,o){var a=r.length,l=t.items,h=t.first,u=h,c,f=null,d=[],_=[],g,m,p,y;for(y=0;y<a;y+=1){if(g=r[y],m=s(g,y),p=l.get(m),p===void 0){var E=u?u.e.nodes_start:e;f=em(E,t,f,f===null?t.first:f.next,g,m,y,i,n,o),l.set(m,f),d=[],_=[],u=f.next;continue}if(tm(p,g,y),(p.e.f&fi)!==0&&ao(p.e),p!==u){if(c!==void 0&&c.has(p)){if(d.length<_.length){var v=_[0],x;f=v.prev;var C=d[0],R=d[d.length-1];for(x=0;x<d.length;x+=1)uu(d[x],v,e);for(x=0;x<_.length;x+=1)c.delete(_[x]);Mi(t,C.prev,R.next),Mi(t,f,C),Mi(t,R,v),u=v,f=R,y-=1,d=[],_=[]}else c.delete(p),uu(p,u,e),Mi(t,p.prev,p.next),Mi(t,p,f===null?t.first:f.next),Mi(t,f,p),f=p;continue}for(d=[],_=[];u!==null&&u.k!==m;)(u.e.f&fi)===0&&(c??(c=new Set)).add(u),_.push(u),u=u.next;if(u===null)continue;p=u}d.push(p),f=p,u=p.next}if(u!==null||c!==void 0){for(var T=c===void 0?[]:zl(c);u!==null;)(u.e.f&fi)===0&&T.push(u),u=u.next;var w=T.length;if(w>0){var I=a===0?e:null;J_(t,T,I,l)}}st.first=t.first&&t.first.e,st.last=f&&f.e}function tm(r,t,e,i){jc(r.v,t),r.i=e}function em(r,t,e,i,n,s,o,a,l,h){var u=(l&c_)!==0,c=(l&d_)===0,f=u?c?yn(n):es(n):n,d=(l&f_)===0?o:es(o),_={i:d,v:f,k:s,a:null,e:null,prev:e,next:i};try{return _.e=is(()=>a(r,f,d,h),v_),_.e.prev=e&&e.e,_.e.next=i&&i.e,e===null?t.first=_:(e.next=_,e.e.next=_.e),i!==null&&(i.prev=_,i.e.prev=_.e),_}finally{}}function uu(r,t,e){for(var i=r.next?r.next.e.nodes_start:e,n=t?t.e.nodes_start:e,s=r.e.nodes_start;s!==i;){var o=zo(s);n.before(s),s=o}}function Mi(r,t,e){t===null?r.first=e:(t.next=e,t.e.next=e&&e.e),e!==null&&(e.prev=t,e.e.prev=t&&t.e)}const im=Symbol("is custom element"),nm=Symbol("is html");function fo(r,t,e,i){var n=rm(r);n[t]!==(n[t]=e)&&(t==="loading"&&(r[Qg]=e),e==null?r.removeAttribute(t):typeof e!="string"&&sm(r).includes(t)?r[t]=e:r.setAttribute(t,e))}function rm(r){return r.__attributes??(r.__attributes={[im]:r.nodeName.includes("-"),[nm]:r.namespaceURI===p_})}var cu=new Map;function sm(r){var t=cu.get(r.nodeName);if(t)return t;cu.set(r.nodeName,t=[]);for(var e,i=r,n=Element.prototype;n!==i;){e=Gc(i);for(var s in e)e[s].set&&t.push(s);i=Xl(i)}return t}function fu(r,t){return r===t||(r==null?void 0:r[cn])===t}function go(r={},t,e,i){return Kl(()=>{var n,s;return Xo(()=>{n=s,s=(i==null?void 0:i())||[],Tr(()=>{r!==e(...s)&&(t(r,...s),n&&fu(e(...n),r)&&t(null,...n))})}),()=>{uf(()=>{s&&fu(e(...s),r)&&t(null,...s)})}}),r}function Rr(r=!1){const t=ot,e=t.l.u;if(!e)return;let i=()=>Js(t.s);if(r){let n=0,s={};const o=Bl(()=>{let a=!1;const l=t.s;for(const h in l)l[h]!==s[h]&&(s[h]=l[h],a=!0);return a&&n++,n});i=()=>K(o)}e.b.length&&T_(()=>{du(t,i),io(e.b)}),rl(()=>{const n=Tr(()=>e.m.map(jg));return()=>{for(const s of n)typeof s=="function"&&s()}}),e.a.length&&rl(()=>{du(t,i),io(e.a)})}function du(r,t){if(r.l.s)for(const e of r.l.s)K(e);t()}let Ns=!1;function om(r){var t=Ns;try{return Ns=!1,[r(),Ns]}finally{Ns=t}}function gu(r,t,e,i){var _;var n=!Er||(e&g_)!==0,s=!1,o;[o,s]=om(()=>r[t]);var a=cn in r||Jg in r,l=(((_=Jn(r,t))==null?void 0:_.set)??(a&&t in r&&(g=>r[t]=g)))||void 0,h=i,u=!0,c=()=>(u&&(u=!1,h=i),h);o===void 0&&i!==void 0&&(l&&n&&s_(),o=c(),l&&l(o));var f;if(n)f=()=>{var g=r[t];return g===void 0?c():(u=!0,g)};else{var d=Uc(()=>r[t]);d.f|=qg,f=()=>{var g=K(d);return g!==void 0&&(h=void 0),g===void 0?h:g}}return f}function Sr(r){ot===null&&Bc(),Er&&ot.l!==null?lm(ot).m.push(r):rl(()=>{const t=Tr(r);if(typeof t=="function")return t})}function am(r){ot===null&&Bc(),Sr(()=>()=>Tr(r))}function lm(r){var t=r.l;return t.u??(t.u={a:[],b:[],m:[]})}const hm="5";var Nc;typeof window<"u"&&((Nc=window.__svelte??(window.__svelte={})).v??(Nc.v=new Set)).add(hm);u_();function li(r){if(r===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}function xf(r,t){r.prototype=Object.create(t.prototype),r.prototype.constructor=r,r.__proto__=t}/*!
 * GSAP 3.13.0
 * https://gsap.com
 *
 * @license Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var ce={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},ar={duration:.5,overwrite:!1,delay:0},jl,At,ht,$e=1e8,kt=1/$e,ll=Math.PI*2,um=ll/4,cm=0,vf=Math.sqrt,fm=Math.cos,dm=Math.sin,It=function(t){return typeof t=="string"},_t=function(t){return typeof t=="function"},mi=function(t){return typeof t=="number"},Hl=function(t){return typeof t>"u"},ti=function(t){return typeof t=="object"},Jt=function(t){return t!==!1},ql=function(){return typeof window<"u"},Gs=function(t){return _t(t)||It(t)},Ef=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},Nt=Array.isArray,hl=/(?:-?\.?\d|\.)+/gi,wf=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,Vn=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,Ca=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,Cf=/[+-]=-?[.\d]+/,Tf=/[^,'"\[\]\s]+/gi,gm=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,ut,Be,ul,$l,de={},_o={},Rf,Sf=function(t){return(_o=lr(t,de))&&ie},Jl=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},rs=function(t,e){return!e&&console.warn(t)},If=function(t,e){return t&&(de[t]=e)&&_o&&(_o[t]=e)||de},ss=function(){return 0},_m={suppressEvents:!0,isStart:!0,kill:!1},Qs={suppressEvents:!0,kill:!1},mm={suppressEvents:!0},Ql={},Ni=[],cl={},bf,ae={},Ta={},_u=30,to=[],th="",eh=function(t){var e=t[0],i,n;if(ti(e)||_t(e)||(t=[t]),!(i=(e._gsap||{}).harness)){for(n=to.length;n--&&!to[n].targetTest(e););i=to[n]}for(n=t.length;n--;)t[n]&&(t[n]._gsap||(t[n]._gsap=new Jf(t[n],i)))||t.splice(n,1);return t},dn=function(t){return t._gsap||eh(Te(t))[0]._gsap},Mf=function(t,e,i){return(i=t[e])&&_t(i)?t[e]():Hl(i)&&t.getAttribute&&t.getAttribute(e)||i},Qt=function(t,e){return(t=t.split(",")).forEach(e)||t},mt=function(t){return Math.round(t*1e5)/1e5||0},yt=function(t){return Math.round(t*1e7)/1e7||0},Qn=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),i==="+"?t+n:i==="-"?t-n:i==="*"?t*n:t/n},pm=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},mo=function(){var t=Ni.length,e=Ni.slice(0),i,n;for(cl={},Ni.length=0,i=0;i<t;i++)n=e[i],n&&n._lazy&&(n.render(n._lazy[0],n._lazy[1],!0)._lazy=0)},ih=function(t){return!!(t._initted||t._startAt||t.add)},Af=function(t,e,i,n){Ni.length&&!At&&mo(),t.render(e,i,!!(At&&e<0&&ih(t))),Ni.length&&!At&&mo()},Pf=function(t){var e=parseFloat(t);return(e||e===0)&&(t+"").match(Tf).length<2?e:It(t)?t.trim():t},Lf=function(t){return t},ge=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},ym=function(t){return function(e,i){for(var n in i)n in e||n==="duration"&&t||n==="ease"||(e[n]=i[n])}},lr=function(t,e){for(var i in e)t[i]=e[i];return t},mu=function r(t,e){for(var i in e)i!=="__proto__"&&i!=="constructor"&&i!=="prototype"&&(t[i]=ti(e[i])?r(t[i]||(t[i]={}),e[i]):e[i]);return t},po=function(t,e){var i={},n;for(n in t)n in e||(i[n]=t[n]);return i},Hr=function(t){var e=t.parent||ut,i=t.keyframes?ym(Nt(t.keyframes)):ge;if(Jt(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},xm=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},Of=function(t,e,i,n,s){var o=t[n],a;if(s)for(a=e[s];o&&o[s]>a;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},Uo=function(t,e,i,n){i===void 0&&(i="_first"),n===void 0&&(n="_last");var s=e._prev,o=e._next;s?s._next=o:t[i]===e&&(t[i]=o),o?o._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},Ui=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove&&t.parent.remove(t),t._act=0},gn=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},vm=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},fl=function(t,e,i,n){return t._startAt&&(At?t._startAt.revert(Qs):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},Em=function r(t){return!t||t._ts&&r(t.parent)},pu=function(t){return t._repeat?hr(t._tTime,t=t.duration()+t._rDelay)*t:0},hr=function(t,e){var i=Math.floor(t=yt(t/e));return t&&i===t?i-1:i},yo=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Ko=function(t){return t._end=yt(t._start+(t._tDur/Math.abs(t._ts||t._rts||kt)||0))},Vo=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=yt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Ko(t),i._dirty||gn(i,t)),t},Df=function(t,e){var i;if((e._time||!e._dur&&e._initted||e._start<t._time&&(e._dur||!e.add))&&(i=yo(t.rawTime(),e),(!e._dur||Ts(0,e.totalDuration(),i)-e._tTime>kt)&&e.render(i,!0)),gn(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-1e-8}},Ke=function(t,e,i,n){return e.parent&&Ui(e),e._start=yt((mi(i)?i:i||t!==ut?ve(t,i,e):t._time)+e._delay),e._end=yt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Of(t,e,"_first","_last",t._sort?"_start":0),dl(e)||(t._recent=e),n||Df(t,e),t._ts<0&&Vo(t,t._tTime),t},Ff=function(t,e){return(de.ScrollTrigger||Jl("scrollTrigger",e))&&de.ScrollTrigger.create(e,t)},kf=function(t,e,i,n,s){if(rh(t,e,s),!t._initted)return 1;if(!i&&t._pt&&!At&&(t._dur&&t.vars.lazy!==!1||!t._dur&&t.vars.lazy)&&bf!==le.frame)return Ni.push(t),t._lazy=[s,n],1},wm=function r(t){var e=t.parent;return e&&e._ts&&e._initted&&!e._lock&&(e.rawTime()<0||r(e))},dl=function(t){var e=t.data;return e==="isFromStart"||e==="isStart"},Cm=function(t,e,i,n){var s=t.ratio,o=e<0||!e&&(!t._start&&wm(t)&&!(!t._initted&&dl(t))||(t._ts<0||t._dp._ts<0)&&!dl(t))?0:1,a=t._rDelay,l=0,h,u,c;if(a&&t._repeat&&(l=Ts(0,t._tDur,e),u=hr(l,a),t._yoyo&&u&1&&(o=1-o),u!==hr(t._tTime,a)&&(s=1-o,t.vars.repeatRefresh&&t._initted&&t.invalidate())),o!==s||At||n||t._zTime===kt||!e&&t._zTime){if(!t._initted&&kf(t,e,n,i,l))return;for(c=t._zTime,t._zTime=e||(i?kt:0),i||(i=e&&!c),t.ratio=o,t._from&&(o=1-o),t._time=0,t._tTime=l,h=t._pt;h;)h.r(o,h.d),h=h._next;e<0&&fl(t,e,i,!0),t._onUpdate&&!i&&he(t,"onUpdate"),l&&t._repeat&&!i&&t.parent&&he(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===o&&(o&&Ui(t,1),!i&&!At&&(he(t,o?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},Tm=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if(n.data==="isPause"&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if(n.data==="isPause"&&n._start<e)return n;n=n._prev}},ur=function(t,e,i,n){var s=t._repeat,o=yt(e)||0,a=t._tTime/t._tDur;return a&&!n&&(t._time*=o/t._dur),t._dur=o,t._tDur=s?s<0?1e10:yt(o*(s+1)+t._rDelay*s):o,a>0&&!n&&Vo(t,t._tTime=t._tDur*a),t.parent&&Ko(t),i||gn(t.parent,t),t},yu=function(t){return t instanceof Wt?gn(t):ur(t,t._dur)},Rm={_start:0,endTime:ss,totalDuration:ss},ve=function r(t,e,i){var n=t.labels,s=t._recent||Rm,o=t.duration()>=$e?s.endTime(!1):t._dur,a,l,h;return It(e)&&(isNaN(e)||e in n)?(l=e.charAt(0),h=e.substr(-1)==="%",a=e.indexOf("="),l==="<"||l===">"?(a>=0&&(e=e.replace(/=/,"")),(l==="<"?s._start:s.endTime(s._repeat>=0))+(parseFloat(e.substr(1))||0)*(h?(a<0?s:i).totalDuration()/100:1)):a<0?(e in n||(n[e]=o),n[e]):(l=parseFloat(e.charAt(a-1)+e.substr(a+1)),h&&i&&(l=l/100*(Nt(i)?i[0]:i).totalDuration()),a>1?r(t,e.substr(0,a-1),i)+l:o+l)):e==null?o:+e},qr=function(t,e,i){var n=mi(e[1]),s=(n?2:1)+(t<2?0:1),o=e[s],a,l;if(n&&(o.duration=e[1]),o.parent=i,t){for(a=o,l=i;l&&!("immediateRender"in a);)a=l.vars.defaults||{},l=Jt(l.vars.inherit)&&l.parent;o.immediateRender=Jt(a.immediateRender),t<2?o.runBackwards=1:o.startAt=e[s-1]}return new pt(e[0],o,e[s+1])},ji=function(t,e){return t||t===0?e(t):e},Ts=function(t,e,i){return i<t?t:i>e?e:i},Ft=function(t,e){return!It(t)||!(e=gm.exec(t))?"":e[1]},Sm=function(t,e,i){return ji(i,function(n){return Ts(t,e,n)})},gl=[].slice,Nf=function(t,e){return t&&ti(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&ti(t[0]))&&!t.nodeType&&t!==Be},Im=function(t,e,i){return i===void 0&&(i=[]),t.forEach(function(n){var s;return It(n)&&!e||Nf(n,1)?(s=i).push.apply(s,Te(n)):i.push(n)})||i},Te=function(t,e,i){return ht&&!e&&ht.selector?ht.selector(t):It(t)&&!i&&(ul||!cr())?gl.call((e||$l).querySelectorAll(t),0):Nt(t)?Im(t,i):Nf(t)?gl.call(t,0):t?[t]:[]},_l=function(t){return t=Te(t)[0]||rs("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return Te(e,i.querySelectorAll?i:i===t?rs("Invalid scope")||$l.createElement("div"):t)}},Gf=function(t){return t.sort(function(){return .5-Math.random()})},zf=function(t){if(_t(t))return t;var e=ti(t)?t:{each:t},i=_n(e.ease),n=e.from||0,s=parseFloat(e.base)||0,o={},a=n>0&&n<1,l=isNaN(n)||a,h=e.axis,u=n,c=n;return It(n)?u=c={center:.5,edges:.5,end:1}[n]||0:!a&&l&&(u=n[0],c=n[1]),function(f,d,_){var g=(_||e).length,m=o[g],p,y,E,v,x,C,R,T,w;if(!m){if(w=e.grid==="auto"?0:(e.grid||[1,$e])[1],!w){for(R=-1e8;R<(R=_[w++].getBoundingClientRect().left)&&w<g;);w<g&&w--}for(m=o[g]=[],p=l?Math.min(w,g)*u-.5:n%w,y=w===$e?0:l?g*c/w-.5:n/w|0,R=0,T=$e,C=0;C<g;C++)E=C%w-p,v=y-(C/w|0),m[C]=x=h?Math.abs(h==="y"?v:E):vf(E*E+v*v),x>R&&(R=x),x<T&&(T=x);n==="random"&&Gf(m),m.max=R-T,m.min=T,m.v=g=(parseFloat(e.amount)||parseFloat(e.each)*(w>g?g-1:h?h==="y"?g/w:w:Math.max(w,g/w))||0)*(n==="edges"?-1:1),m.b=g<0?s-g:s,m.u=Ft(e.amount||e.each)||0,i=i&&g<0?Hf(i):i}return g=(m[f]-m.min)/m.max||0,yt(m.b+(i?i(g):g)*m.v)+m.u}},ml=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=yt(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(mi(i)?0:Ft(i))}},Xf=function(t,e){var i=Nt(t),n,s;return!i&&ti(t)&&(n=i=t.radius||$e,t.values?(t=Te(t.values),(s=!mi(t[0]))&&(n*=n)):t=ml(t.increment)),ji(e,i?_t(t)?function(o){return s=t(o),Math.abs(s-o)<=n?s:o}:function(o){for(var a=parseFloat(s?o.x:o),l=parseFloat(s?o.y:0),h=$e,u=0,c=t.length,f,d;c--;)s?(f=t[c].x-a,d=t[c].y-l,f=f*f+d*d):f=Math.abs(t[c]-a),f<h&&(h=f,u=c);return u=!n||h<=n?t[u]:o,s||u===o||mi(o)?u:u+Ft(o)}:ml(t))},Wf=function(t,e,i,n){return ji(Nt(t)?!e:i===!0?!!(i=0):!n,function(){return Nt(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+i*.99))/i)*i*n)/n})},bm=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(n){return e.reduce(function(s,o){return o(s)},n)}},Mm=function(t,e){return function(i){return t(parseFloat(i))+(e||Ft(i))}},Am=function(t,e,i){return Bf(t,e,0,1,i)},Yf=function(t,e,i){return ji(i,function(n){return t[~~e(n)]})},Pm=function r(t,e,i){var n=e-t;return Nt(t)?Yf(t,r(0,t.length),e):ji(i,function(s){return(n+(s-t)%n)%n+t})},Lm=function r(t,e,i){var n=e-t,s=n*2;return Nt(t)?Yf(t,r(0,t.length-1),e):ji(i,function(o){return o=(s+(o-t)%s)%s||0,t+(o>n?s-o:o)})},os=function(t){for(var e=0,i="",n,s,o,a;~(n=t.indexOf("random(",e));)o=t.indexOf(")",n),a=t.charAt(n+7)==="[",s=t.substr(n+7,o-n-7).match(a?Tf:hl),i+=t.substr(e,n-e)+Wf(a?s:+s[0],a?0:+s[1],+s[2]||1e-5),e=o+1;return i+t.substr(e,t.length-e)},Bf=function(t,e,i,n,s){var o=e-t,a=n-i;return ji(s,function(l){return i+((l-t)/o*a||0)})},Om=function r(t,e,i,n){var s=isNaN(t+e)?0:function(d){return(1-d)*t+d*e};if(!s){var o=It(t),a={},l,h,u,c,f;if(i===!0&&(n=1)&&(i=null),o)t={p:t},e={p:e};else if(Nt(t)&&!Nt(e)){for(u=[],c=t.length,f=c-2,h=1;h<c;h++)u.push(r(t[h-1],t[h]));c--,s=function(_){_*=c;var g=Math.min(f,~~_);return u[g](_-g)},i=e}else n||(t=lr(Nt(t)?[]:{},t));if(!u){for(l in e)nh.call(a,t,l,"get",e[l]);s=function(_){return ah(_,a)||(o?t.p:t)}}}return ji(i,s)},xu=function(t,e,i){var n=t.labels,s=$e,o,a,l;for(o in n)a=n[o]-e,a<0==!!i&&a&&s>(a=Math.abs(a))&&(l=o,s=a);return l},he=function(t,e,i){var n=t.vars,s=n[e],o=ht,a=t._ctx,l,h,u;if(s)return l=n[e+"Params"],h=n.callbackScope||t,i&&Ni.length&&mo(),a&&(ht=a),u=l?s.apply(h,l):s.call(h),ht=o,u},Xr=function(t){return Ui(t),t.scrollTrigger&&t.scrollTrigger.kill(!!At),t.progress()<1&&he(t,"onInterrupt"),t},Zn,Uf=[],Kf=function(t){if(t)if(t=!t.name&&t.default||t,ql()||t.headless){var e=t.name,i=_t(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:ss,render:ah,add:nh,kill:Hm,modifier:jm,rawVars:0},o={targetTest:0,get:0,getSetter:oh,aliases:{},register:0};if(cr(),t!==n){if(ae[e])return;ge(n,ge(po(t,s),o)),lr(n.prototype,lr(s,po(t,o))),ae[n.prop=e]=n,t.targetTest&&(to.push(n),Ql[e]=1),e=(e==="css"?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}If(e,n),t.register&&t.register(ie,n,te)}else Uf.push(t)},nt=255,Wr={aqua:[0,nt,nt],lime:[0,nt,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,nt],navy:[0,0,128],white:[nt,nt,nt],olive:[128,128,0],yellow:[nt,nt,0],orange:[nt,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[nt,0,0],pink:[nt,192,203],cyan:[0,nt,nt],transparent:[nt,nt,nt,0]},Ra=function(t,e,i){return t+=t<0?1:t>1?-1:0,(t*6<1?e+(i-e)*t*6:t<.5?i:t*3<2?e+(i-e)*(2/3-t)*6:e)*nt+.5|0},Vf=function(t,e,i){var n=t?mi(t)?[t>>16,t>>8&nt,t&nt]:0:Wr.black,s,o,a,l,h,u,c,f,d,_;if(!n){if(t.substr(-1)===","&&(t=t.substr(0,t.length-1)),Wr[t])n=Wr[t];else if(t.charAt(0)==="#"){if(t.length<6&&(s=t.charAt(1),o=t.charAt(2),a=t.charAt(3),t="#"+s+s+o+o+a+a+(t.length===5?t.charAt(4)+t.charAt(4):"")),t.length===9)return n=parseInt(t.substr(1,6),16),[n>>16,n>>8&nt,n&nt,parseInt(t.substr(7),16)/255];t=parseInt(t.substr(1),16),n=[t>>16,t>>8&nt,t&nt]}else if(t.substr(0,3)==="hsl"){if(n=_=t.match(hl),!e)l=+n[0]%360/360,h=+n[1]/100,u=+n[2]/100,o=u<=.5?u*(h+1):u+h-u*h,s=u*2-o,n.length>3&&(n[3]*=1),n[0]=Ra(l+1/3,s,o),n[1]=Ra(l,s,o),n[2]=Ra(l-1/3,s,o);else if(~t.indexOf("="))return n=t.match(wf),i&&n.length<4&&(n[3]=1),n}else n=t.match(hl)||Wr.transparent;n=n.map(Number)}return e&&!_&&(s=n[0]/nt,o=n[1]/nt,a=n[2]/nt,c=Math.max(s,o,a),f=Math.min(s,o,a),u=(c+f)/2,c===f?l=h=0:(d=c-f,h=u>.5?d/(2-c-f):d/(c+f),l=c===s?(o-a)/d+(o<a?6:0):c===o?(a-s)/d+2:(s-o)/d+4,l*=60),n[0]=~~(l+.5),n[1]=~~(h*100+.5),n[2]=~~(u*100+.5)),i&&n.length<4&&(n[3]=1),n},Zf=function(t){var e=[],i=[],n=-1;return t.split(Gi).forEach(function(s){var o=s.match(Vn)||[];e.push.apply(e,o),i.push(n+=o.length+1)}),e.c=i,e},vu=function(t,e,i){var n="",s=(t+n).match(Gi),o=e?"hsla(":"rgba(",a=0,l,h,u,c;if(!s)return t;if(s=s.map(function(f){return(f=Vf(f,e,1))&&o+(e?f[0]+","+f[1]+"%,"+f[2]+"%,"+f[3]:f.join(","))+")"}),i&&(u=Zf(t),l=i.c,l.join(n)!==u.c.join(n)))for(h=t.replace(Gi,"1").split(Vn),c=h.length-1;a<c;a++)n+=h[a]+(~l.indexOf(a)?s.shift()||o+"0,0,0,0)":(u.length?u:s.length?s:i).shift());if(!h)for(h=t.split(Gi),c=h.length-1;a<c;a++)n+=h[a]+s[a];return n+h[c]},Gi=function(){var r="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",t;for(t in Wr)r+="|"+t+"\\b";return new RegExp(r+")","gi")}(),Dm=/hsl[a]?\(/,jf=function(t){var e=t.join(" "),i;if(Gi.lastIndex=0,Gi.test(e))return i=Dm.test(e),t[1]=vu(t[1],i),t[0]=vu(t[0],i,Zf(t[1])),!0},as,le=function(){var r=Date.now,t=500,e=33,i=r(),n=i,s=1e3/240,o=s,a=[],l,h,u,c,f,d,_=function g(m){var p=r()-n,y=m===!0,E,v,x,C;if((p>t||p<0)&&(i+=p-e),n+=p,x=n-i,E=x-o,(E>0||y)&&(C=++c.frame,f=x-c.time*1e3,c.time=x=x/1e3,o+=E+(E>=s?4:s-E),v=1),y||(l=h(g)),v)for(d=0;d<a.length;d++)a[d](x,f,C,m)};return c={time:0,frame:0,tick:function(){_(!0)},deltaRatio:function(m){return f/(1e3/(m||60))},wake:function(){Rf&&(!ul&&ql()&&(Be=ul=window,$l=Be.document||{},de.gsap=ie,(Be.gsapVersions||(Be.gsapVersions=[])).push(ie.version),Sf(_o||Be.GreenSockGlobals||!Be.gsap&&Be||{}),Uf.forEach(Kf)),u=typeof requestAnimationFrame<"u"&&requestAnimationFrame,l&&c.sleep(),h=u||function(m){return setTimeout(m,o-c.time*1e3+1|0)},as=1,_(2))},sleep:function(){(u?cancelAnimationFrame:clearTimeout)(l),as=0,h=ss},lagSmoothing:function(m,p){t=m||1/0,e=Math.min(p||33,t)},fps:function(m){s=1e3/(m||240),o=c.time*1e3+s},add:function(m,p,y){var E=p?function(v,x,C,R){m(v,x,C,R),c.remove(E)}:m;return c.remove(m),a[y?"unshift":"push"](E),cr(),E},remove:function(m,p){~(p=a.indexOf(m))&&a.splice(p,1)&&d>=p&&d--},_listeners:a},c}(),cr=function(){return!as&&le.wake()},Z={},Fm=/^[\d.\-M][\d.\-,\s]/,km=/["']/g,Nm=function(t){for(var e={},i=t.substr(1,t.length-3).split(":"),n=i[0],s=1,o=i.length,a,l,h;s<o;s++)l=i[s],a=s!==o-1?l.lastIndexOf(","):l.length,h=l.substr(0,a),e[n]=isNaN(h)?h.replace(km,"").trim():+h,n=l.substr(a+1).trim();return e},Gm=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},zm=function(t){var e=(t+"").split("("),i=Z[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[Nm(e[1])]:Gm(t).split(",").map(Pf)):Z._CE&&Fm.test(t)?Z._CE("",t):i},Hf=function(t){return function(e){return 1-t(1-e)}},qf=function r(t,e){for(var i=t._first,n;i;)i instanceof Wt?r(i,e):i.vars.yoyoEase&&(!i._yoyo||!i._repeat)&&i._yoyo!==e&&(i.timeline?r(i.timeline,e):(n=i._ease,i._ease=i._yEase,i._yEase=n,i._yoyo=e)),i=i._next},_n=function(t,e){return t&&(_t(t)?t:Z[t]||zm(t))||e},Rn=function(t,e,i,n){i===void 0&&(i=function(l){return 1-e(1-l)}),n===void 0&&(n=function(l){return l<.5?e(l*2)/2:1-e((1-l)*2)/2});var s={easeIn:e,easeOut:i,easeInOut:n},o;return Qt(t,function(a){Z[a]=de[a]=s,Z[o=a.toLowerCase()]=i;for(var l in s)Z[o+(l==="easeIn"?".in":l==="easeOut"?".out":".inOut")]=Z[a+"."+l]=s[l]}),s},$f=function(t){return function(e){return e<.5?(1-t(1-e*2))/2:.5+t((e-.5)*2)/2}},Sa=function r(t,e,i){var n=e>=1?e:1,s=(i||(t?.3:.45))/(e<1?e:1),o=s/ll*(Math.asin(1/n)||0),a=function(u){return u===1?1:n*Math.pow(2,-10*u)*dm((u-o)*s)+1},l=t==="out"?a:t==="in"?function(h){return 1-a(1-h)}:$f(a);return s=ll/s,l.config=function(h,u){return r(t,h,u)},l},Ia=function r(t,e){e===void 0&&(e=1.70158);var i=function(o){return o?--o*o*((e+1)*o+e)+1:0},n=t==="out"?i:t==="in"?function(s){return 1-i(1-s)}:$f(i);return n.config=function(s){return r(t,s)},n};Qt("Linear,Quad,Cubic,Quart,Quint,Strong",function(r,t){var e=t<5?t+1:t;Rn(r+",Power"+(e-1),t?function(i){return Math.pow(i,e)}:function(i){return i},function(i){return 1-Math.pow(1-i,e)},function(i){return i<.5?Math.pow(i*2,e)/2:1-Math.pow((1-i)*2,e)/2})});Z.Linear.easeNone=Z.none=Z.Linear.easeIn;Rn("Elastic",Sa("in"),Sa("out"),Sa());(function(r,t){var e=1/t,i=2*e,n=2.5*e,s=function(a){return a<e?r*a*a:a<i?r*Math.pow(a-1.5/t,2)+.75:a<n?r*(a-=2.25/t)*a+.9375:r*Math.pow(a-2.625/t,2)+.984375};Rn("Bounce",function(o){return 1-s(1-o)},s)})(7.5625,2.75);Rn("Expo",function(r){return Math.pow(2,10*(r-1))*r+r*r*r*r*r*r*(1-r)});Rn("Circ",function(r){return-(vf(1-r*r)-1)});Rn("Sine",function(r){return r===1?1:-fm(r*um)+1});Rn("Back",Ia("in"),Ia("out"),Ia());Z.SteppedEase=Z.steps=de.SteppedEase={config:function(t,e){t===void 0&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,o=1-kt;return function(a){return((n*Ts(0,o,a)|0)+s)*i}}};ar.ease=Z["quad.out"];Qt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(r){return th+=r+","+r+"Params,"});var Jf=function(t,e){this.id=cm++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:Mf,this.set=e?e.getSetter:oh},ls=function(){function r(e){this.vars=e,this._delay=+e.delay||0,(this._repeat=e.repeat===1/0?-2:e.repeat||0)&&(this._rDelay=e.repeatDelay||0,this._yoyo=!!e.yoyo||!!e.yoyoEase),this._ts=1,ur(this,+e.duration,1,1),this.data=e.data,ht&&(this._ctx=ht,ht.data.push(this)),as||le.wake()}var t=r.prototype;return t.delay=function(i){return i||i===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+i-this._delay),this._delay=i,this):this._delay},t.duration=function(i){return arguments.length?this.totalDuration(this._repeat>0?i+(i+this._rDelay)*this._repeat:i):this.totalDuration()&&this._dur},t.totalDuration=function(i){return arguments.length?(this._dirty=0,ur(this,this._repeat<0?i:(i-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},t.totalTime=function(i,n){if(cr(),!arguments.length)return this._tTime;var s=this._dp;if(s&&s.smoothChildTiming&&this._ts){for(Vo(this,i),!s._dp||s.parent||Df(s,this);s&&s.parent;)s.parent._time!==s._start+(s._ts>=0?s._tTime/s._ts:(s.totalDuration()-s._tTime)/-s._ts)&&s.totalTime(s._tTime,!0),s=s.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&i<this._tDur||this._ts<0&&i>0||!this._tDur&&!i)&&Ke(this._dp,this,this._start-this._delay)}return(this._tTime!==i||!this._dur&&!n||this._initted&&Math.abs(this._zTime)===kt||!i&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=i),Af(this,i,n)),this},t.time=function(i,n){return arguments.length?this.totalTime(Math.min(this.totalDuration(),i+pu(this))%(this._dur+this._rDelay)||(i?this._dur:0),n):this._time},t.totalProgress=function(i,n){return arguments.length?this.totalTime(this.totalDuration()*i,n):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>=0&&this._initted?1:0},t.progress=function(i,n){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-i:i)+pu(this),n):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},t.iteration=function(i,n){var s=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(i-1)*s,n):this._repeat?hr(this._tTime,s)+1:1},t.timeScale=function(i,n){if(!arguments.length)return this._rts===-1e-8?0:this._rts;if(this._rts===i)return this;var s=this.parent&&this._ts?yo(this.parent._time,this):this._tTime;return this._rts=+i||0,this._ts=this._ps||i===-1e-8?0:this._rts,this.totalTime(Ts(-Math.abs(this._delay),this.totalDuration(),s),n!==!1),Ko(this),vm(this)},t.paused=function(i){return arguments.length?(this._ps!==i&&(this._ps=i,i?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(cr(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==kt&&(this._tTime-=kt)))),this):this._ps},t.startTime=function(i){if(arguments.length){this._start=i;var n=this.parent||this._dp;return n&&(n._sort||!this.parent)&&Ke(n,this,i-this._delay),this}return this._start},t.endTime=function(i){return this._start+(Jt(i)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},t.rawTime=function(i){var n=this.parent||this._dp;return n?i&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?yo(n.rawTime(i),this):this._tTime:this._tTime},t.revert=function(i){i===void 0&&(i=mm);var n=At;return At=i,ih(this)&&(this.timeline&&this.timeline.revert(i),this.totalTime(-.01,i.suppressEvents)),this.data!=="nested"&&i.kill!==!1&&this.kill(),At=n,this},t.globalTime=function(i){for(var n=this,s=arguments.length?i:n.rawTime();n;)s=n._start+s/(Math.abs(n._ts)||1),n=n._dp;return!this.parent&&this._sat?this._sat.globalTime(i):s},t.repeat=function(i){return arguments.length?(this._repeat=i===1/0?-2:i,yu(this)):this._repeat===-2?1/0:this._repeat},t.repeatDelay=function(i){if(arguments.length){var n=this._time;return this._rDelay=i,yu(this),n?this.time(n):this}return this._rDelay},t.yoyo=function(i){return arguments.length?(this._yoyo=i,this):this._yoyo},t.seek=function(i,n){return this.totalTime(ve(this,i),Jt(n))},t.restart=function(i,n){return this.play().totalTime(i?-this._delay:0,Jt(n)),this._dur||(this._zTime=-1e-8),this},t.play=function(i,n){return i!=null&&this.seek(i,n),this.reversed(!1).paused(!1)},t.reverse=function(i,n){return i!=null&&this.seek(i||this.totalDuration(),n),this.reversed(!0).paused(!1)},t.pause=function(i,n){return i!=null&&this.seek(i,n),this.paused(!0)},t.resume=function(){return this.paused(!1)},t.reversed=function(i){return arguments.length?(!!i!==this.reversed()&&this.timeScale(-this._rts||(i?-1e-8:0)),this):this._rts<0},t.invalidate=function(){return this._initted=this._act=0,this._zTime=-1e-8,this},t.isActive=function(){var i=this.parent||this._dp,n=this._start,s;return!!(!i||this._ts&&this._initted&&i.isActive()&&(s=i.rawTime(!0))>=n&&s<this.endTime(!0)-kt)},t.eventCallback=function(i,n,s){var o=this.vars;return arguments.length>1?(n?(o[i]=n,s&&(o[i+"Params"]=s),i==="onUpdate"&&(this._onUpdate=n)):delete o[i],this):o[i]},t.then=function(i){var n=this;return new Promise(function(s){var o=_t(i)?i:Lf,a=function(){var h=n.then;n.then=null,_t(o)&&(o=o(n))&&(o.then||o===n)&&(n.then=h),s(o),n.then=h};n._initted&&n.totalProgress()===1&&n._ts>=0||!n._tTime&&n._ts<0?a():n._prom=a})},t.kill=function(){Xr(this)},r}();ge(ls.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-1e-8,_prom:0,_ps:!1,_rts:1});var Wt=function(r){xf(t,r);function t(i,n){var s;return i===void 0&&(i={}),s=r.call(this,i)||this,s.labels={},s.smoothChildTiming=!!i.smoothChildTiming,s.autoRemoveChildren=!!i.autoRemoveChildren,s._sort=Jt(i.sortChildren),ut&&Ke(i.parent||ut,li(s),n),i.reversed&&s.reverse(),i.paused&&s.paused(!0),i.scrollTrigger&&Ff(li(s),i.scrollTrigger),s}var e=t.prototype;return e.to=function(n,s,o){return qr(0,arguments,this),this},e.from=function(n,s,o){return qr(1,arguments,this),this},e.fromTo=function(n,s,o,a){return qr(2,arguments,this),this},e.set=function(n,s,o){return s.duration=0,s.parent=this,Hr(s).repeatDelay||(s.repeat=0),s.immediateRender=!!s.immediateRender,new pt(n,s,ve(this,o),1),this},e.call=function(n,s,o){return Ke(this,pt.delayedCall(0,n,s),o)},e.staggerTo=function(n,s,o,a,l,h,u){return o.duration=s,o.stagger=o.stagger||a,o.onComplete=h,o.onCompleteParams=u,o.parent=this,new pt(n,o,ve(this,l)),this},e.staggerFrom=function(n,s,o,a,l,h,u){return o.runBackwards=1,Hr(o).immediateRender=Jt(o.immediateRender),this.staggerTo(n,s,o,a,l,h,u)},e.staggerFromTo=function(n,s,o,a,l,h,u,c){return a.startAt=o,Hr(a).immediateRender=Jt(a.immediateRender),this.staggerTo(n,s,a,l,h,u,c)},e.render=function(n,s,o){var a=this._time,l=this._dirty?this.totalDuration():this._tDur,h=this._dur,u=n<=0?0:yt(n),c=this._zTime<0!=n<0&&(this._initted||!h),f,d,_,g,m,p,y,E,v,x,C,R;if(this!==ut&&u>l&&n>=0&&(u=l),u!==this._tTime||o||c){if(a!==this._time&&h&&(u+=this._time-a,n+=this._time-a),f=u,v=this._start,E=this._ts,p=!E,c&&(h||(a=this._zTime),(n||!s)&&(this._zTime=n)),this._repeat){if(C=this._yoyo,m=h+this._rDelay,this._repeat<-1&&n<0)return this.totalTime(m*100+n,s,o);if(f=yt(u%m),u===l?(g=this._repeat,f=h):(x=yt(u/m),g=~~x,g&&g===x&&(f=h,g--),f>h&&(f=h)),x=hr(this._tTime,m),!a&&this._tTime&&x!==g&&this._tTime-x*m-this._dur<=0&&(x=g),C&&g&1&&(f=h-f,R=1),g!==x&&!this._lock){var T=C&&x&1,w=T===(C&&g&1);if(g<x&&(T=!T),a=T?0:u%h?h:u,this._lock=1,this.render(a||(R?0:yt(g*m)),s,!h)._lock=0,this._tTime=u,!s&&this.parent&&he(this,"onRepeat"),this.vars.repeatRefresh&&!R&&(this.invalidate()._lock=1),a&&a!==this._time||p!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(h=this._dur,l=this._tDur,w&&(this._lock=2,a=T?h:-1e-4,this.render(a,!0),this.vars.repeatRefresh&&!R&&this.invalidate()),this._lock=0,!this._ts&&!p)return this;qf(this,R)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(y=Tm(this,yt(a),yt(f)),y&&(u-=f-(f=y._start))),this._tTime=u,this._time=f,this._act=!E,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=n,a=0),!a&&u&&!s&&!x&&(he(this,"onStart"),this._tTime!==u))return this;if(f>=a&&n>=0)for(d=this._first;d;){if(_=d._next,(d._act||f>=d._start)&&d._ts&&y!==d){if(d.parent!==this)return this.render(n,s,o);if(d.render(d._ts>0?(f-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(f-d._start)*d._ts,s,o),f!==this._time||!this._ts&&!p){y=0,_&&(u+=this._zTime=-1e-8);break}}d=_}else{d=this._last;for(var I=n<0?n:f;d;){if(_=d._prev,(d._act||I<=d._end)&&d._ts&&y!==d){if(d.parent!==this)return this.render(n,s,o);if(d.render(d._ts>0?(I-d._start)*d._ts:(d._dirty?d.totalDuration():d._tDur)+(I-d._start)*d._ts,s,o||At&&ih(d)),f!==this._time||!this._ts&&!p){y=0,_&&(u+=this._zTime=I?-1e-8:kt);break}}d=_}}if(y&&!s&&(this.pause(),y.render(f>=a?0:-1e-8)._zTime=f>=a?1:-1,this._ts))return this._start=v,Ko(this),this.render(n,s,o);this._onUpdate&&!s&&he(this,"onUpdate",!0),(u===l&&this._tTime>=this.totalDuration()||!u&&a)&&(v===this._start||Math.abs(E)!==Math.abs(this._ts))&&(this._lock||((n||!h)&&(u===l&&this._ts>0||!u&&this._ts<0)&&Ui(this,1),!s&&!(n<0&&!a)&&(u||a||!l)&&(he(this,u===l&&n>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(u<l&&this.timeScale()>0)&&this._prom())))}return this},e.add=function(n,s){var o=this;if(mi(s)||(s=ve(this,s,n)),!(n instanceof ls)){if(Nt(n))return n.forEach(function(a){return o.add(a,s)}),this;if(It(n))return this.addLabel(n,s);if(_t(n))n=pt.delayedCall(0,n);else return this}return this!==n?Ke(this,n,s):this},e.getChildren=function(n,s,o,a){n===void 0&&(n=!0),s===void 0&&(s=!0),o===void 0&&(o=!0),a===void 0&&(a=-1e8);for(var l=[],h=this._first;h;)h._start>=a&&(h instanceof pt?s&&l.push(h):(o&&l.push(h),n&&l.push.apply(l,h.getChildren(!0,s,o)))),h=h._next;return l},e.getById=function(n){for(var s=this.getChildren(1,1,1),o=s.length;o--;)if(s[o].vars.id===n)return s[o]},e.remove=function(n){return It(n)?this.removeLabel(n):_t(n)?this.killTweensOf(n):(n.parent===this&&Uo(this,n),n===this._recent&&(this._recent=this._last),gn(this))},e.totalTime=function(n,s){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=yt(le.time-(this._ts>0?n/this._ts:(this.totalDuration()-n)/-this._ts))),r.prototype.totalTime.call(this,n,s),this._forcing=0,this):this._tTime},e.addLabel=function(n,s){return this.labels[n]=ve(this,s),this},e.removeLabel=function(n){return delete this.labels[n],this},e.addPause=function(n,s,o){var a=pt.delayedCall(0,s||ss,o);return a.data="isPause",this._hasPause=1,Ke(this,a,ve(this,n))},e.removePause=function(n){var s=this._first;for(n=ve(this,n);s;)s._start===n&&s.data==="isPause"&&Ui(s),s=s._next},e.killTweensOf=function(n,s,o){for(var a=this.getTweensOf(n,o),l=a.length;l--;)Li!==a[l]&&a[l].kill(n,s);return this},e.getTweensOf=function(n,s){for(var o=[],a=Te(n),l=this._first,h=mi(s),u;l;)l instanceof pt?pm(l._targets,a)&&(h?(!Li||l._initted&&l._ts)&&l.globalTime(0)<=s&&l.globalTime(l.totalDuration())>s:!s||l.isActive())&&o.push(l):(u=l.getTweensOf(a,s)).length&&o.push.apply(o,u),l=l._next;return o},e.tweenTo=function(n,s){s=s||{};var o=this,a=ve(o,n),l=s,h=l.startAt,u=l.onStart,c=l.onStartParams,f=l.immediateRender,d,_=pt.to(o,ge({ease:s.ease||"none",lazy:!1,immediateRender:!1,time:a,overwrite:"auto",duration:s.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale())||kt,onStart:function(){if(o.pause(),!d){var m=s.duration||Math.abs((a-(h&&"time"in h?h.time:o._time))/o.timeScale());_._dur!==m&&ur(_,m,0,1).render(_._time,!0,!0),d=1}u&&u.apply(_,c||[])}},s));return f?_.render(0):_},e.tweenFromTo=function(n,s,o){return this.tweenTo(s,ge({startAt:{time:ve(this,n)}},o))},e.recent=function(){return this._recent},e.nextLabel=function(n){return n===void 0&&(n=this._time),xu(this,ve(this,n))},e.previousLabel=function(n){return n===void 0&&(n=this._time),xu(this,ve(this,n),1)},e.currentLabel=function(n){return arguments.length?this.seek(n,!0):this.previousLabel(this._time+kt)},e.shiftChildren=function(n,s,o){o===void 0&&(o=0);for(var a=this._first,l=this.labels,h;a;)a._start>=o&&(a._start+=n,a._end+=n),a=a._next;if(s)for(h in l)l[h]>=o&&(l[h]+=n);return gn(this)},e.invalidate=function(n){var s=this._first;for(this._lock=0;s;)s.invalidate(n),s=s._next;return r.prototype.invalidate.call(this,n)},e.clear=function(n){n===void 0&&(n=!0);for(var s=this._first,o;s;)o=s._next,this.remove(s),s=o;return this._dp&&(this._time=this._tTime=this._pTime=0),n&&(this.labels={}),gn(this)},e.totalDuration=function(n){var s=0,o=this,a=o._last,l=$e,h,u,c;if(arguments.length)return o.timeScale((o._repeat<0?o.duration():o.totalDuration())/(o.reversed()?-n:n));if(o._dirty){for(c=o.parent;a;)h=a._prev,a._dirty&&a.totalDuration(),u=a._start,u>l&&o._sort&&a._ts&&!o._lock?(o._lock=1,Ke(o,a,u-a._delay,1)._lock=0):l=u,u<0&&a._ts&&(s-=u,(!c&&!o._dp||c&&c.smoothChildTiming)&&(o._start+=u/o._ts,o._time-=u,o._tTime-=u),o.shiftChildren(-u,!1,-1/0),l=0),a._end>s&&a._ts&&(s=a._end),a=h;ur(o,o===ut&&o._time>s?o._time:s,1,1),o._dirty=0}return o._tDur},t.updateRoot=function(n){if(ut._ts&&(Af(ut,yo(n,ut)),bf=le.frame),le.frame>=_u){_u+=ce.autoSleep||120;var s=ut._first;if((!s||!s._ts)&&ce.autoSleep&&le._listeners.length<2){for(;s&&!s._ts;)s=s._next;s||le.sleep()}}},t}(ls);ge(Wt.prototype,{_lock:0,_hasPause:0,_forcing:0});var Xm=function(t,e,i,n,s,o,a){var l=new te(this._pt,t,e,0,1,rd,null,s),h=0,u=0,c,f,d,_,g,m,p,y;for(l.b=i,l.e=n,i+="",n+="",(p=~n.indexOf("random("))&&(n=os(n)),o&&(y=[i,n],o(y,t,e),i=y[0],n=y[1]),f=i.match(Ca)||[];c=Ca.exec(n);)_=c[0],g=n.substring(h,c.index),d?d=(d+1)%5:g.substr(-5)==="rgba("&&(d=1),_!==f[u++]&&(m=parseFloat(f[u-1])||0,l._pt={_next:l._pt,p:g||u===1?g:",",s:m,c:_.charAt(1)==="="?Qn(m,_)-m:parseFloat(_)-m,m:d&&d<4?Math.round:0},h=Ca.lastIndex);return l.c=h<n.length?n.substring(h,n.length):"",l.fp=a,(Cf.test(n)||p)&&(l.e=0),this._pt=l,l},nh=function(t,e,i,n,s,o,a,l,h,u){_t(n)&&(n=n(s||0,t,o));var c=t[e],f=i!=="get"?i:_t(c)?h?t[e.indexOf("set")||!_t(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():c,d=_t(c)?h?Km:id:sh,_;if(It(n)&&(~n.indexOf("random(")&&(n=os(n)),n.charAt(1)==="="&&(_=Qn(f,n)+(Ft(f)||0),(_||_===0)&&(n=_))),!u||f!==n||pl)return!isNaN(f*n)&&n!==""?(_=new te(this._pt,t,e,+f||0,n-(f||0),typeof c=="boolean"?Zm:nd,0,d),h&&(_.fp=h),a&&_.modifier(a,this,t),this._pt=_):(!c&&!(e in t)&&Jl(e,n),Xm.call(this,t,e,f,n,d,l||ce.stringFilter,h))},Wm=function(t,e,i,n,s){if(_t(t)&&(t=$r(t,s,e,i,n)),!ti(t)||t.style&&t.nodeType||Nt(t)||Ef(t))return It(t)?$r(t,s,e,i,n):t;var o={},a;for(a in t)o[a]=$r(t[a],s,e,i,n);return o},Qf=function(t,e,i,n,s,o){var a,l,h,u;if(ae[t]&&(a=new ae[t]).init(s,a.rawVars?e[t]:Wm(e[t],n,s,o,i),i,n,o)!==!1&&(i._pt=l=new te(i._pt,s,t,0,1,a.render,a,0,a.priority),i!==Zn))for(h=i._ptLookup[i._targets.indexOf(s)],u=a._props.length;u--;)h[a._props[u]]=l;return a},Li,pl,rh=function r(t,e,i){var n=t.vars,s=n.ease,o=n.startAt,a=n.immediateRender,l=n.lazy,h=n.onUpdate,u=n.runBackwards,c=n.yoyoEase,f=n.keyframes,d=n.autoRevert,_=t._dur,g=t._startAt,m=t._targets,p=t.parent,y=p&&p.data==="nested"?p.vars.targets:m,E=t._overwrite==="auto"&&!jl,v=t.timeline,x,C,R,T,w,I,P,A,M,L,k,O,F;if(v&&(!f||!s)&&(s="none"),t._ease=_n(s,ar.ease),t._yEase=c?Hf(_n(c===!0?s:c,ar.ease)):0,c&&t._yoyo&&!t._repeat&&(c=t._yEase,t._yEase=t._ease,t._ease=c),t._from=!v&&!!n.runBackwards,!v||f&&!n.stagger){if(A=m[0]?dn(m[0]).harness:0,O=A&&n[A.prop],x=po(n,Ql),g&&(g._zTime<0&&g.progress(1),e<0&&u&&a&&!d?g.render(-1,!0):g.revert(u&&_?Qs:_m),g._lazy=0),o){if(Ui(t._startAt=pt.set(m,ge({data:"isStart",overwrite:!1,parent:p,immediateRender:!0,lazy:!g&&Jt(l),startAt:null,delay:0,onUpdate:h&&function(){return he(t,"onUpdate")},stagger:0},o))),t._startAt._dp=0,t._startAt._sat=t,e<0&&(At||!a&&!d)&&t._startAt.revert(Qs),a&&_&&e<=0&&i<=0){e&&(t._zTime=e);return}}else if(u&&_&&!g){if(e&&(a=!1),R=ge({overwrite:!1,data:"isFromStart",lazy:a&&!g&&Jt(l),immediateRender:a,stagger:0,parent:p},x),O&&(R[A.prop]=O),Ui(t._startAt=pt.set(m,R)),t._startAt._dp=0,t._startAt._sat=t,e<0&&(At?t._startAt.revert(Qs):t._startAt.render(-1,!0)),t._zTime=e,!a)r(t._startAt,kt,kt);else if(!e)return}for(t._pt=t._ptCache=0,l=_&&Jt(l)||l&&!_,C=0;C<m.length;C++){if(w=m[C],P=w._gsap||eh(m)[C]._gsap,t._ptLookup[C]=L={},cl[P.id]&&Ni.length&&mo(),k=y===m?C:y.indexOf(w),A&&(M=new A).init(w,O||x,t,k,y)!==!1&&(t._pt=T=new te(t._pt,w,M.name,0,1,M.render,M,0,M.priority),M._props.forEach(function(D){L[D]=T}),M.priority&&(I=1)),!A||O)for(R in x)ae[R]&&(M=Qf(R,x,t,k,w,y))?M.priority&&(I=1):L[R]=T=nh.call(t,w,R,"get",x[R],k,y,0,n.stringFilter);t._op&&t._op[C]&&t.kill(w,t._op[C]),E&&t._pt&&(Li=t,ut.killTweensOf(w,L,t.globalTime(e)),F=!t.parent,Li=0),t._pt&&l&&(cl[P.id]=1)}I&&sd(t),t._onInit&&t._onInit(t)}t._onUpdate=h,t._initted=(!t._op||t._pt)&&!F,f&&e<=0&&v.render($e,!0,!0)},Ym=function(t,e,i,n,s,o,a,l){var h=(t._pt&&t._ptCache||(t._ptCache={}))[e],u,c,f,d;if(!h)for(h=t._ptCache[e]=[],f=t._ptLookup,d=t._targets.length;d--;){if(u=f[d][e],u&&u.d&&u.d._pt)for(u=u.d._pt;u&&u.p!==e&&u.fp!==e;)u=u._next;if(!u)return pl=1,t.vars[e]="+=0",rh(t,a),pl=0,l?rs(e+" not eligible for reset"):1;h.push(u)}for(d=h.length;d--;)c=h[d],u=c._pt||c,u.s=(n||n===0)&&!s?n:u.s+(n||0)+o*u.c,u.c=i-u.s,c.e&&(c.e=mt(i)+Ft(c.e)),c.b&&(c.b=u.s+Ft(c.b))},Bm=function(t,e){var i=t[0]?dn(t[0]).harness:0,n=i&&i.aliases,s,o,a,l;if(!n)return e;s=lr({},e);for(o in n)if(o in s)for(l=n[o].split(","),a=l.length;a--;)s[l[a]]=s[o];return s},Um=function(t,e,i,n){var s=e.ease||n||"power1.inOut",o,a;if(Nt(e))a=i[t]||(i[t]=[]),e.forEach(function(l,h){return a.push({t:h/(e.length-1)*100,v:l,e:s})});else for(o in e)a=i[o]||(i[o]=[]),o==="ease"||a.push({t:parseFloat(t),v:e[o],e:s})},$r=function(t,e,i,n,s){return _t(t)?t.call(e,i,n,s):It(t)&&~t.indexOf("random(")?os(t):t},td=th+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",ed={};Qt(td+",id,stagger,delay,duration,paused,scrollTrigger",function(r){return ed[r]=1});var pt=function(r){xf(t,r);function t(i,n,s,o){var a;typeof n=="number"&&(s.duration=n,n=s,s=null),a=r.call(this,o?n:Hr(n))||this;var l=a.vars,h=l.duration,u=l.delay,c=l.immediateRender,f=l.stagger,d=l.overwrite,_=l.keyframes,g=l.defaults,m=l.scrollTrigger,p=l.yoyoEase,y=n.parent||ut,E=(Nt(i)||Ef(i)?mi(i[0]):"length"in n)?[i]:Te(i),v,x,C,R,T,w,I,P;if(a._targets=E.length?eh(E):rs("GSAP target "+i+" not found. https://gsap.com",!ce.nullTargetWarn)||[],a._ptLookup=[],a._overwrite=d,_||f||Gs(h)||Gs(u)){if(n=a.vars,v=a.timeline=new Wt({data:"nested",defaults:g||{},targets:y&&y.data==="nested"?y.vars.targets:E}),v.kill(),v.parent=v._dp=li(a),v._start=0,f||Gs(h)||Gs(u)){if(R=E.length,I=f&&zf(f),ti(f))for(T in f)~td.indexOf(T)&&(P||(P={}),P[T]=f[T]);for(x=0;x<R;x++)C=po(n,ed),C.stagger=0,p&&(C.yoyoEase=p),P&&lr(C,P),w=E[x],C.duration=+$r(h,li(a),x,w,E),C.delay=(+$r(u,li(a),x,w,E)||0)-a._delay,!f&&R===1&&C.delay&&(a._delay=u=C.delay,a._start+=u,C.delay=0),v.to(w,C,I?I(x,w,E):0),v._ease=Z.none;v.duration()?h=u=0:a.timeline=0}else if(_){Hr(ge(v.vars.defaults,{ease:"none"})),v._ease=_n(_.ease||n.ease||"none");var A=0,M,L,k;if(Nt(_))_.forEach(function(O){return v.to(E,O,">")}),v.duration();else{C={};for(T in _)T==="ease"||T==="easeEach"||Um(T,_[T],C,_.easeEach);for(T in C)for(M=C[T].sort(function(O,F){return O.t-F.t}),A=0,x=0;x<M.length;x++)L=M[x],k={ease:L.e,duration:(L.t-(x?M[x-1].t:0))/100*h},k[T]=L.v,v.to(E,k,A),A+=k.duration;v.duration()<h&&v.to({},{duration:h-v.duration()})}}h||a.duration(h=v.duration())}else a.timeline=0;return d===!0&&!jl&&(Li=li(a),ut.killTweensOf(E),Li=0),Ke(y,li(a),s),n.reversed&&a.reverse(),n.paused&&a.paused(!0),(c||!h&&!_&&a._start===yt(y._time)&&Jt(c)&&Em(li(a))&&y.data!=="nested")&&(a._tTime=-1e-8,a.render(Math.max(0,-u)||0)),m&&Ff(li(a),m),a}var e=t.prototype;return e.render=function(n,s,o){var a=this._time,l=this._tDur,h=this._dur,u=n<0,c=n>l-kt&&!u?l:n<kt?0:n,f,d,_,g,m,p,y,E,v;if(!h)Cm(this,n,s,o);else if(c!==this._tTime||!n||o||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==u||this._lazy){if(f=c,E=this.timeline,this._repeat){if(g=h+this._rDelay,this._repeat<-1&&u)return this.totalTime(g*100+n,s,o);if(f=yt(c%g),c===l?(_=this._repeat,f=h):(m=yt(c/g),_=~~m,_&&_===m?(f=h,_--):f>h&&(f=h)),p=this._yoyo&&_&1,p&&(v=this._yEase,f=h-f),m=hr(this._tTime,g),f===a&&!o&&this._initted&&_===m)return this._tTime=c,this;_!==m&&(E&&this._yEase&&qf(E,p),this.vars.repeatRefresh&&!p&&!this._lock&&f!==g&&this._initted&&(this._lock=o=1,this.render(yt(g*_),!0).invalidate()._lock=0))}if(!this._initted){if(kf(this,u?n:f,o,s,c))return this._tTime=0,this;if(a!==this._time&&!(o&&this.vars.repeatRefresh&&_!==m))return this;if(h!==this._dur)return this.render(n,s,o)}if(this._tTime=c,this._time=f,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=y=(v||this._ease)(f/h),this._from&&(this.ratio=y=1-y),!a&&c&&!s&&!m&&(he(this,"onStart"),this._tTime!==c))return this;for(d=this._pt;d;)d.r(y,d.d),d=d._next;E&&E.render(n<0?n:E._dur*E._ease(f/this._dur),s,o)||this._startAt&&(this._zTime=n),this._onUpdate&&!s&&(u&&fl(this,n,s,o),he(this,"onUpdate")),this._repeat&&_!==m&&this.vars.onRepeat&&!s&&this.parent&&he(this,"onRepeat"),(c===this._tDur||!c)&&this._tTime===c&&(u&&!this._onUpdate&&fl(this,n,!0,!0),(n||!h)&&(c===this._tDur&&this._ts>0||!c&&this._ts<0)&&Ui(this,1),!s&&!(u&&!a)&&(c||a||p)&&(he(this,c===l?"onComplete":"onReverseComplete",!0),this._prom&&!(c<l&&this.timeScale()>0)&&this._prom()))}return this},e.targets=function(){return this._targets},e.invalidate=function(n){return(!n||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(n),r.prototype.invalidate.call(this,n)},e.resetTo=function(n,s,o,a,l){as||le.wake(),this._ts||this.play();var h=Math.min(this._dur,(this._dp._time-this._start)*this._ts),u;return this._initted||rh(this,h),u=this._ease(h/this._dur),Ym(this,n,s,o,a,u,h,l)?this.resetTo(n,s,o,a,1):(Vo(this,0),this.parent||Of(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},e.kill=function(n,s){if(s===void 0&&(s="all"),!n&&(!s||s==="all"))return this._lazy=this._pt=0,this.parent?Xr(this):this.scrollTrigger&&this.scrollTrigger.kill(!!At),this;if(this.timeline){var o=this.timeline.totalDuration();return this.timeline.killTweensOf(n,s,Li&&Li.vars.overwrite!==!0)._first||Xr(this),this.parent&&o!==this.timeline.totalDuration()&&ur(this,this._dur*this.timeline._tDur/o,0,1),this}var a=this._targets,l=n?Te(n):a,h=this._ptLookup,u=this._pt,c,f,d,_,g,m,p;if((!s||s==="all")&&xm(a,l))return s==="all"&&(this._pt=0),Xr(this);for(c=this._op=this._op||[],s!=="all"&&(It(s)&&(g={},Qt(s,function(y){return g[y]=1}),s=g),s=Bm(a,s)),p=a.length;p--;)if(~l.indexOf(a[p])){f=h[p],s==="all"?(c[p]=s,_=f,d={}):(d=c[p]=c[p]||{},_=s);for(g in _)m=f&&f[g],m&&((!("kill"in m.d)||m.d.kill(g)===!0)&&Uo(this,m,"_pt"),delete f[g]),d!=="all"&&(d[g]=1)}return this._initted&&!this._pt&&u&&Xr(this),this},t.to=function(n,s){return new t(n,s,arguments[2])},t.from=function(n,s){return qr(1,arguments)},t.delayedCall=function(n,s,o,a){return new t(s,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:n,onComplete:s,onReverseComplete:s,onCompleteParams:o,onReverseCompleteParams:o,callbackScope:a})},t.fromTo=function(n,s,o){return qr(2,arguments)},t.set=function(n,s){return s.duration=0,s.repeatDelay||(s.repeat=0),new t(n,s)},t.killTweensOf=function(n,s,o){return ut.killTweensOf(n,s,o)},t}(ls);ge(pt.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});Qt("staggerTo,staggerFrom,staggerFromTo",function(r){pt[r]=function(){var t=new Wt,e=gl.call(arguments,0);return e.splice(r==="staggerFromTo"?5:4,0,0),t[r].apply(t,e)}});var sh=function(t,e,i){return t[e]=i},id=function(t,e,i){return t[e](i)},Km=function(t,e,i,n){return t[e](n.fp,i)},Vm=function(t,e,i){return t.setAttribute(e,i)},oh=function(t,e){return _t(t[e])?id:Hl(t[e])&&t.setAttribute?Vm:sh},nd=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e6)/1e6,e)},Zm=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},rd=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(t===1&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round((i.s+i.c*t)*1e4)/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},ah=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},jm=function(t,e,i,n){for(var s=this._pt,o;s;)o=s._next,s.p===n&&s.modifier(t,e,i),s=o},Hm=function(t){for(var e=this._pt,i,n;e;)n=e._next,e.p===t&&!e.op||e.op===t?Uo(this,e,"_pt"):e.dep||(i=1),e=n;return!i},qm=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},sd=function(t){for(var e=t._pt,i,n,s,o;e;){for(i=e._next,n=s;n&&n.pr>e.pr;)n=n._next;(e._prev=n?n._prev:o)?e._prev._next=e:s=e,(e._next=n)?n._prev=e:o=e,e=i}t._pt=s},te=function(){function r(e,i,n,s,o,a,l,h,u){this.t=i,this.s=s,this.c=o,this.p=n,this.r=a||nd,this.d=l||this,this.set=h||sh,this.pr=u||0,this._next=e,e&&(e._prev=this)}var t=r.prototype;return t.modifier=function(i,n,s){this.mSet=this.mSet||this.set,this.set=qm,this.m=i,this.mt=s,this.tween=n},r}();Qt(th+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(r){return Ql[r]=1});de.TweenMax=de.TweenLite=pt;de.TimelineLite=de.TimelineMax=Wt;ut=new Wt({sortChildren:!1,defaults:ar,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});ce.stringFilter=jf;var mn=[],eo={},$m=[],Eu=0,Jm=0,ba=function(t){return(eo[t]||$m).map(function(e){return e()})},yl=function(){var t=Date.now(),e=[];t-Eu>2&&(ba("matchMediaInit"),mn.forEach(function(i){var n=i.queries,s=i.conditions,o,a,l,h;for(a in n)o=Be.matchMedia(n[a]).matches,o&&(l=1),o!==s[a]&&(s[a]=o,h=1);h&&(i.revert(),l&&e.push(i))}),ba("matchMediaRevert"),e.forEach(function(i){return i.onMatch(i,function(n){return i.add(null,n)})}),Eu=t,ba("matchMedia"))},od=function(){function r(e,i){this.selector=i&&_l(i),this.data=[],this._r=[],this.isReverted=!1,this.id=Jm++,e&&this.add(e)}var t=r.prototype;return t.add=function(i,n,s){_t(i)&&(s=n,n=i,i=_t);var o=this,a=function(){var h=ht,u=o.selector,c;return h&&h!==o&&h.data.push(o),s&&(o.selector=_l(s)),ht=o,c=n.apply(o,arguments),_t(c)&&o._r.push(c),ht=h,o.selector=u,o.isReverted=!1,c};return o.last=a,i===_t?a(o,function(l){return o.add(null,l)}):i?o[i]=a:a},t.ignore=function(i){var n=ht;ht=null,i(this),ht=n},t.getTweens=function(){var i=[];return this.data.forEach(function(n){return n instanceof r?i.push.apply(i,n.getTweens()):n instanceof pt&&!(n.parent&&n.parent.data==="nested")&&i.push(n)}),i},t.clear=function(){this._r.length=this.data.length=0},t.kill=function(i,n){var s=this;if(i?function(){for(var a=s.getTweens(),l=s.data.length,h;l--;)h=s.data[l],h.data==="isFlip"&&(h.revert(),h.getChildren(!0,!0,!1).forEach(function(u){return a.splice(a.indexOf(u),1)}));for(a.map(function(u){return{g:u._dur||u._delay||u._sat&&!u._sat.vars.immediateRender?u.globalTime(0):-1/0,t:u}}).sort(function(u,c){return c.g-u.g||-1/0}).forEach(function(u){return u.t.revert(i)}),l=s.data.length;l--;)h=s.data[l],h instanceof Wt?h.data!=="nested"&&(h.scrollTrigger&&h.scrollTrigger.revert(),h.kill()):!(h instanceof pt)&&h.revert&&h.revert(i);s._r.forEach(function(u){return u(i,s)}),s.isReverted=!0}():this.data.forEach(function(a){return a.kill&&a.kill()}),this.clear(),n)for(var o=mn.length;o--;)mn[o].id===this.id&&mn.splice(o,1)},t.revert=function(i){this.kill(i||{})},r}(),Qm=function(){function r(e){this.contexts=[],this.scope=e,ht&&ht.data.push(this)}var t=r.prototype;return t.add=function(i,n,s){ti(i)||(i={matches:i});var o=new od(0,s||this.scope),a=o.conditions={},l,h,u;ht&&!o.selector&&(o.selector=ht.selector),this.contexts.push(o),n=o.add("onMatch",n),o.queries=i;for(h in i)h==="all"?u=1:(l=Be.matchMedia(i[h]),l&&(mn.indexOf(o)<0&&mn.push(o),(a[h]=l.matches)&&(u=1),l.addListener?l.addListener(yl):l.addEventListener("change",yl)));return u&&n(o,function(c){return o.add(null,c)}),this},t.revert=function(i){this.kill(i||{})},t.kill=function(i){this.contexts.forEach(function(n){return n.kill(i,!0)})},r}(),xo={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach(function(n){return Kf(n)})},timeline:function(t){return new Wt(t)},getTweensOf:function(t,e){return ut.getTweensOf(t,e)},getProperty:function(t,e,i,n){It(t)&&(t=Te(t)[0]);var s=dn(t||{}).get,o=i?Lf:Pf;return i==="native"&&(i=""),t&&(e?o((ae[e]&&ae[e].get||s)(t,e,i,n)):function(a,l,h){return o((ae[a]&&ae[a].get||s)(t,a,l,h))})},quickSetter:function(t,e,i){if(t=Te(t),t.length>1){var n=t.map(function(u){return ie.quickSetter(u,e,i)}),s=n.length;return function(u){for(var c=s;c--;)n[c](u)}}t=t[0]||{};var o=ae[e],a=dn(t),l=a.harness&&(a.harness.aliases||{})[e]||e,h=o?function(u){var c=new o;Zn._pt=0,c.init(t,i?u+i:u,Zn,0,[t]),c.render(1,c),Zn._pt&&ah(1,Zn)}:a.set(t,l);return o?h:function(u){return h(t,l,i?u+i:u,a,1)}},quickTo:function(t,e,i){var n,s=ie.to(t,ge((n={},n[e]="+=0.1",n.paused=!0,n.stagger=0,n),i||{})),o=function(l,h,u){return s.resetTo(e,l,h,u)};return o.tween=s,o},isTweening:function(t){return ut.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=_n(t.ease,ar.ease)),mu(ar,t||{})},config:function(t){return mu(ce,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,o=t.extendTimeline;(n||"").split(",").forEach(function(a){return a&&!ae[a]&&!de[a]&&rs(e+" effect requires "+a+" plugin.")}),Ta[e]=function(a,l,h){return i(Te(a),ge(l||{},s),h)},o&&(Wt.prototype[e]=function(a,l,h){return this.add(Ta[e](a,ti(l)?l:(h=l)&&{},this),h)})},registerEase:function(t,e){Z[t]=_n(e)},parseEase:function(t,e){return arguments.length?_n(t,e):Z},getById:function(t){return ut.getById(t)},exportRoot:function(t,e){t===void 0&&(t={});var i=new Wt(t),n,s;for(i.smoothChildTiming=Jt(t.smoothChildTiming),ut.remove(i),i._dp=0,i._time=i._tTime=ut._time,n=ut._first;n;)s=n._next,(e||!(!n._dur&&n instanceof pt&&n.vars.onComplete===n._targets[0]))&&Ke(i,n,n._start-n._delay),n=s;return Ke(ut,i,0),i},context:function(t,e){return t?new od(t,e):ht},matchMedia:function(t){return new Qm(t)},matchMediaRefresh:function(){return mn.forEach(function(t){var e=t.conditions,i,n;for(n in e)e[n]&&(e[n]=!1,i=1);i&&t.revert()})||yl()},addEventListener:function(t,e){var i=eo[t]||(eo[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=eo[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:Pm,wrapYoyo:Lm,distribute:zf,random:Wf,snap:Xf,normalize:Am,getUnit:Ft,clamp:Sm,splitColor:Vf,toArray:Te,selector:_l,mapRange:Bf,pipe:bm,unitize:Mm,interpolate:Om,shuffle:Gf},install:Sf,effects:Ta,ticker:le,updateRoot:Wt.updateRoot,plugins:ae,globalTimeline:ut,core:{PropTween:te,globals:If,Tween:pt,Timeline:Wt,Animation:ls,getCache:dn,_removeLinkedListItem:Uo,reverting:function(){return At},context:function(t){return t&&ht&&(ht.data.push(t),t._ctx=ht),ht},suppressOverwrites:function(t){return jl=t}}};Qt("to,from,fromTo,delayedCall,set,killTweensOf",function(r){return xo[r]=pt[r]});le.add(Wt.updateRoot);Zn=xo.to({},{duration:0});var tp=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},ep=function(t,e){var i=t._targets,n,s,o;for(n in e)for(s=i.length;s--;)o=t._ptLookup[s][n],o&&(o=o.d)&&(o._pt&&(o=tp(o,n)),o&&o.modifier&&o.modifier(e[n],t,i[s],n))},Ma=function(t,e){return{name:t,headless:1,rawVars:1,init:function(n,s,o){o._onInit=function(a){var l,h;if(It(s)&&(l={},Qt(s,function(u){return l[u]=1}),s=l),e){l={};for(h in s)l[h]=e(s[h]);s=l}ep(a,s)}}}},ie=xo.registerPlugin({name:"attr",init:function(t,e,i,n,s){var o,a,l;this.tween=i;for(o in e)l=t.getAttribute(o)||"",a=this.add(t,"setAttribute",(l||0)+"",e[o],n,s,0,0,o),a.op=o,a.b=l,this._props.push(o)},render:function(t,e){for(var i=e._pt;i;)At?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",headless:1,init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Ma("roundProps",ml),Ma("modifiers"),Ma("snap",Xf))||xo;pt.version=Wt.version=ie.version="3.13.0";Rf=1;ql()&&cr();Z.Power0;Z.Power1;Z.Power2;Z.Power3;Z.Power4;Z.Linear;Z.Quad;Z.Cubic;Z.Quart;Z.Quint;Z.Strong;Z.Elastic;Z.Back;Z.SteppedEase;Z.Bounce;Z.Sine;Z.Expo;Z.Circ;/*!
 * CSSPlugin 3.13.0
 * https://gsap.com
 *
 * Copyright 2008-2025, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license
 * @author: Jack Doyle, jack@greensock.com
*/var wu,Oi,tr,lh,on,Cu,hh,ip=function(){return typeof window<"u"},pi={},rn=180/Math.PI,er=Math.PI/180,On=Math.atan2,Tu=1e8,uh=/([A-Z])/g,np=/(left|right|width|margin|padding|x)/i,rp=/[\s,\(]\S/,je={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},xl=function(t,e){return e.set(e.t,e.p,Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},sp=function(t,e){return e.set(e.t,e.p,t===1?e.e:Math.round((e.s+e.c*t)*1e4)/1e4+e.u,e)},op=function(t,e){return e.set(e.t,e.p,t?Math.round((e.s+e.c*t)*1e4)/1e4+e.u:e.b,e)},ap=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},ad=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},ld=function(t,e){return e.set(e.t,e.p,t!==1?e.b:e.e,e)},lp=function(t,e,i){return t.style[e]=i},hp=function(t,e,i){return t.style.setProperty(e,i)},up=function(t,e,i){return t._gsap[e]=i},cp=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},fp=function(t,e,i,n,s){var o=t._gsap;o.scaleX=o.scaleY=i,o.renderTransform(s,o)},dp=function(t,e,i,n,s){var o=t._gsap;o[e]=i,o.renderTransform(s,o)},ct="transform",ee=ct+"Origin",gp=function r(t,e){var i=this,n=this.target,s=n.style,o=n._gsap;if(t in pi&&s){if(this.tfm=this.tfm||{},t!=="transform")t=je[t]||t,~t.indexOf(",")?t.split(",").forEach(function(a){return i.tfm[a]=ui(n,a)}):this.tfm[t]=o.x?o[t]:ui(n,t),t===ee&&(this.tfm.zOrigin=o.zOrigin);else return je.transform.split(",").forEach(function(a){return r.call(i,a,e)});if(this.props.indexOf(ct)>=0)return;o.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(ee,e,"")),t=ct}(s||e)&&this.props.push(t,e,s[t])},hd=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},_p=function(){var t=this.props,e=this.target,i=e.style,n=e._gsap,s,o;for(s=0;s<t.length;s+=3)t[s+1]?t[s+1]===2?e[t[s]](t[s+2]):e[t[s]]=t[s+2]:t[s+2]?i[t[s]]=t[s+2]:i.removeProperty(t[s].substr(0,2)==="--"?t[s]:t[s].replace(uh,"-$1").toLowerCase());if(this.tfm){for(o in this.tfm)n[o]=this.tfm[o];n.svg&&(n.renderTransform(),e.setAttribute("data-svg-origin",this.svgo||"")),s=hh(),(!s||!s.isStart)&&!i[ct]&&(hd(i),n.zOrigin&&i[ee]&&(i[ee]+=" "+n.zOrigin+"px",n.zOrigin=0,n.renderTransform()),n.uncache=1)}},ud=function(t,e){var i={target:t,props:[],revert:_p,save:gp};return t._gsap||ie.core.getCache(t),e&&t.style&&t.nodeType&&e.split(",").forEach(function(n){return i.save(n)}),i},cd,vl=function(t,e){var i=Oi.createElementNS?Oi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Oi.createElement(t);return i&&i.style?i:Oi.createElement(t)},Re=function r(t,e,i){var n=getComputedStyle(t);return n[e]||n.getPropertyValue(e.replace(uh,"-$1").toLowerCase())||n.getPropertyValue(e)||!i&&r(t,fr(e)||e,1)||""},Ru="O,Moz,ms,Ms,Webkit".split(","),fr=function(t,e,i){var n=e||on,s=n.style,o=5;if(t in s&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);o--&&!(Ru[o]+t in s););return o<0?null:(o===3?"ms":o>=0?Ru[o]:"")+t},El=function(){ip()&&window.document&&(wu=window,Oi=wu.document,tr=Oi.documentElement,on=vl("div")||{style:{}},vl("div"),ct=fr(ct),ee=ct+"Origin",on.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",cd=!!fr("perspective"),hh=ie.core.reverting,lh=1)},Su=function(t){var e=t.ownerSVGElement,i=vl("svg",e&&e.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),n=t.cloneNode(!0),s;n.style.display="block",i.appendChild(n),tr.appendChild(i);try{s=n.getBBox()}catch{}return i.removeChild(n),tr.removeChild(i),s},Iu=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},fd=function(t){var e,i;try{e=t.getBBox()}catch{e=Su(t),i=1}return e&&(e.width||e.height)||i||(e=Su(t)),e&&!e.width&&!e.x&&!e.y?{x:+Iu(t,["x","cx","x1"])||0,y:+Iu(t,["y","cy","y1"])||0,width:0,height:0}:e},dd=function(t){return!!(t.getCTM&&(!t.parentNode||t.ownerSVGElement)&&fd(t))},xn=function(t,e){if(e){var i=t.style,n;e in pi&&e!==ee&&(e=ct),i.removeProperty?(n=e.substr(0,2),(n==="ms"||e.substr(0,6)==="webkit")&&(e="-"+e),i.removeProperty(n==="--"?e:e.replace(uh,"-$1").toLowerCase())):i.removeAttribute(e)}},Di=function(t,e,i,n,s,o){var a=new te(t._pt,e,i,0,1,o?ld:ad);return t._pt=a,a.b=n,a.e=s,t._props.push(i),a},bu={deg:1,rad:1,turn:1},mp={grid:1,flex:1},Ki=function r(t,e,i,n){var s=parseFloat(i)||0,o=(i+"").trim().substr((s+"").length)||"px",a=on.style,l=np.test(e),h=t.tagName.toLowerCase()==="svg",u=(h?"client":"offset")+(l?"Width":"Height"),c=100,f=n==="px",d=n==="%",_,g,m,p;if(n===o||!s||bu[n]||bu[o])return s;if(o!=="px"&&!f&&(s=r(t,e,i,"px")),p=t.getCTM&&dd(t),(d||o==="%")&&(pi[e]||~e.indexOf("adius")))return _=p?t.getBBox()[l?"width":"height"]:t[u],mt(d?s/_*c:s/100*_);if(a[l?"width":"height"]=c+(f?o:n),g=n!=="rem"&&~e.indexOf("adius")||n==="em"&&t.appendChild&&!h?t:t.parentNode,p&&(g=(t.ownerSVGElement||{}).parentNode),(!g||g===Oi||!g.appendChild)&&(g=Oi.body),m=g._gsap,m&&d&&m.width&&l&&m.time===le.time&&!m.uncache)return mt(s/m.width*c);if(d&&(e==="height"||e==="width")){var y=t.style[e];t.style[e]=c+n,_=t[u],y?t.style[e]=y:xn(t,e)}else(d||o==="%")&&!mp[Re(g,"display")]&&(a.position=Re(t,"position")),g===t&&(a.position="static"),g.appendChild(on),_=on[u],g.removeChild(on),a.position="absolute";return l&&d&&(m=dn(g),m.time=le.time,m.width=g[u]),mt(f?_*s/c:_&&s?c/_*s:0)},ui=function(t,e,i,n){var s;return lh||El(),e in je&&e!=="transform"&&(e=je[e],~e.indexOf(",")&&(e=e.split(",")[0])),pi[e]&&e!=="transform"?(s=us(t,n),s=e!=="transformOrigin"?s[e]:s.svg?s.origin:Eo(Re(t,ee))+" "+s.zOrigin+"px"):(s=t.style[e],(!s||s==="auto"||n||~(s+"").indexOf("calc("))&&(s=vo[e]&&vo[e](t,e,i)||Re(t,e)||Mf(t,e)||(e==="opacity"?1:0))),i&&!~(s+"").trim().indexOf(" ")?Ki(t,e,s,i)+i:s},pp=function(t,e,i,n){if(!i||i==="none"){var s=fr(e,t,1),o=s&&Re(t,s,1);o&&o!==i?(e=s,i=o):e==="borderColor"&&(i=Re(t,"borderTopColor"))}var a=new te(this._pt,t.style,e,0,1,rd),l=0,h=0,u,c,f,d,_,g,m,p,y,E,v,x;if(a.b=i,a.e=n,i+="",n+="",n.substring(0,6)==="var(--"&&(n=Re(t,n.substring(4,n.indexOf(")")))),n==="auto"&&(g=t.style[e],t.style[e]=n,n=Re(t,e)||n,g?t.style[e]=g:xn(t,e)),u=[i,n],jf(u),i=u[0],n=u[1],f=i.match(Vn)||[],x=n.match(Vn)||[],x.length){for(;c=Vn.exec(n);)m=c[0],y=n.substring(l,c.index),_?_=(_+1)%5:(y.substr(-5)==="rgba("||y.substr(-5)==="hsla(")&&(_=1),m!==(g=f[h++]||"")&&(d=parseFloat(g)||0,v=g.substr((d+"").length),m.charAt(1)==="="&&(m=Qn(d,m)+v),p=parseFloat(m),E=m.substr((p+"").length),l=Vn.lastIndex-E.length,E||(E=E||ce.units[e]||v,l===n.length&&(n+=E,a.e+=E)),v!==E&&(d=Ki(t,e,g,E)||0),a._pt={_next:a._pt,p:y||h===1?y:",",s:d,c:p-d,m:_&&_<4||e==="zIndex"?Math.round:0});a.c=l<n.length?n.substring(l,n.length):""}else a.r=e==="display"&&n==="none"?ld:ad;return Cf.test(n)&&(a.e=0),this._pt=a,a},Mu={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},yp=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return(i==="top"||i==="bottom"||n==="left"||n==="right")&&(t=i,i=n,n=t),e[0]=Mu[i]||i,e[1]=Mu[n]||n,e.join(" ")},xp=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i=e.t,n=i.style,s=e.u,o=i._gsap,a,l,h;if(s==="all"||s===!0)n.cssText="",l=1;else for(s=s.split(","),h=s.length;--h>-1;)a=s[h],pi[a]&&(l=1,a=a==="transformOrigin"?ee:ct),xn(i,a);l&&(xn(i,ct),o&&(o.svg&&i.removeAttribute("transform"),n.scale=n.rotate=n.translate="none",us(i,1),o.uncache=1,hd(n)))}},vo={clearProps:function(t,e,i,n,s){if(s.data!=="isFromStart"){var o=t._pt=new te(t._pt,e,i,0,0,xp);return o.u=n,o.pr=-10,o.tween=s,t._props.push(i),1}}},hs=[1,0,0,1,0,0],gd={},_d=function(t){return t==="matrix(1, 0, 0, 1, 0, 0)"||t==="none"||!t},Au=function(t){var e=Re(t,ct);return _d(e)?hs:e.substr(7).match(wf).map(mt)},ch=function(t,e){var i=t._gsap||dn(t),n=t.style,s=Au(t),o,a,l,h;return i.svg&&t.getAttribute("transform")?(l=t.transform.baseVal.consolidate().matrix,s=[l.a,l.b,l.c,l.d,l.e,l.f],s.join(",")==="1,0,0,1,0,0"?hs:s):(s===hs&&!t.offsetParent&&t!==tr&&!i.svg&&(l=n.display,n.display="block",o=t.parentNode,(!o||!t.offsetParent&&!t.getBoundingClientRect().width)&&(h=1,a=t.nextElementSibling,tr.appendChild(t)),s=Au(t),l?n.display=l:xn(t,"display"),h&&(a?o.insertBefore(t,a):o?o.appendChild(t):tr.removeChild(t))),e&&s.length>6?[s[0],s[1],s[4],s[5],s[12],s[13]]:s)},wl=function(t,e,i,n,s,o){var a=t._gsap,l=s||ch(t,!0),h=a.xOrigin||0,u=a.yOrigin||0,c=a.xOffset||0,f=a.yOffset||0,d=l[0],_=l[1],g=l[2],m=l[3],p=l[4],y=l[5],E=e.split(" "),v=parseFloat(E[0])||0,x=parseFloat(E[1])||0,C,R,T,w;i?l!==hs&&(R=d*m-_*g)&&(T=v*(m/R)+x*(-g/R)+(g*y-m*p)/R,w=v*(-_/R)+x*(d/R)-(d*y-_*p)/R,v=T,x=w):(C=fd(t),v=C.x+(~E[0].indexOf("%")?v/100*C.width:v),x=C.y+(~(E[1]||E[0]).indexOf("%")?x/100*C.height:x)),n||n!==!1&&a.smooth?(p=v-h,y=x-u,a.xOffset=c+(p*d+y*g)-p,a.yOffset=f+(p*_+y*m)-y):a.xOffset=a.yOffset=0,a.xOrigin=v,a.yOrigin=x,a.smooth=!!n,a.origin=e,a.originIsAbsolute=!!i,t.style[ee]="0px 0px",o&&(Di(o,a,"xOrigin",h,v),Di(o,a,"yOrigin",u,x),Di(o,a,"xOffset",c,a.xOffset),Di(o,a,"yOffset",f,a.yOffset)),t.setAttribute("data-svg-origin",v+" "+x)},us=function(t,e){var i=t._gsap||new Jf(t);if("x"in i&&!e&&!i.uncache)return i;var n=t.style,s=i.scaleX<0,o="px",a="deg",l=getComputedStyle(t),h=Re(t,ee)||"0",u,c,f,d,_,g,m,p,y,E,v,x,C,R,T,w,I,P,A,M,L,k,O,F,D,X,Y,j,b,xt,at,tt;return u=c=f=g=m=p=y=E=v=0,d=_=1,i.svg=!!(t.getCTM&&dd(t)),l.translate&&((l.translate!=="none"||l.scale!=="none"||l.rotate!=="none")&&(n[ct]=(l.translate!=="none"?"translate3d("+(l.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(l.rotate!=="none"?"rotate("+l.rotate+") ":"")+(l.scale!=="none"?"scale("+l.scale.split(" ").join(",")+") ":"")+(l[ct]!=="none"?l[ct]:"")),n.scale=n.rotate=n.translate="none"),R=ch(t,i.svg),i.svg&&(i.uncache?(D=t.getBBox(),h=i.xOrigin-D.x+"px "+(i.yOrigin-D.y)+"px",F=""):F=!e&&t.getAttribute("data-svg-origin"),wl(t,F||h,!!F||i.originIsAbsolute,i.smooth!==!1,R)),x=i.xOrigin||0,C=i.yOrigin||0,R!==hs&&(P=R[0],A=R[1],M=R[2],L=R[3],u=k=R[4],c=O=R[5],R.length===6?(d=Math.sqrt(P*P+A*A),_=Math.sqrt(L*L+M*M),g=P||A?On(A,P)*rn:0,y=M||L?On(M,L)*rn+g:0,y&&(_*=Math.abs(Math.cos(y*er))),i.svg&&(u-=x-(x*P+C*M),c-=C-(x*A+C*L))):(tt=R[6],xt=R[7],Y=R[8],j=R[9],b=R[10],at=R[11],u=R[12],c=R[13],f=R[14],T=On(tt,b),m=T*rn,T&&(w=Math.cos(-T),I=Math.sin(-T),F=k*w+Y*I,D=O*w+j*I,X=tt*w+b*I,Y=k*-I+Y*w,j=O*-I+j*w,b=tt*-I+b*w,at=xt*-I+at*w,k=F,O=D,tt=X),T=On(-M,b),p=T*rn,T&&(w=Math.cos(-T),I=Math.sin(-T),F=P*w-Y*I,D=A*w-j*I,X=M*w-b*I,at=L*I+at*w,P=F,A=D,M=X),T=On(A,P),g=T*rn,T&&(w=Math.cos(T),I=Math.sin(T),F=P*w+A*I,D=k*w+O*I,A=A*w-P*I,O=O*w-k*I,P=F,k=D),m&&Math.abs(m)+Math.abs(g)>359.9&&(m=g=0,p=180-p),d=mt(Math.sqrt(P*P+A*A+M*M)),_=mt(Math.sqrt(O*O+tt*tt)),T=On(k,O),y=Math.abs(T)>2e-4?T*rn:0,v=at?1/(at<0?-at:at):0),i.svg&&(F=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!_d(Re(t,ct)),F&&t.setAttribute("transform",F))),Math.abs(y)>90&&Math.abs(y)<270&&(s?(d*=-1,y+=g<=0?180:-180,g+=g<=0?180:-180):(_*=-1,y+=y<=0?180:-180)),e=e||i.uncache,i.x=u-((i.xPercent=u&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-u)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+o,i.y=c-((i.yPercent=c&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-c)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+o,i.z=f+o,i.scaleX=mt(d),i.scaleY=mt(_),i.rotation=mt(g)+a,i.rotationX=mt(m)+a,i.rotationY=mt(p)+a,i.skewX=y+a,i.skewY=E+a,i.transformPerspective=v+o,(i.zOrigin=parseFloat(h.split(" ")[2])||!e&&i.zOrigin||0)&&(n[ee]=Eo(h)),i.xOffset=i.yOffset=0,i.force3D=ce.force3D,i.renderTransform=i.svg?Ep:cd?md:vp,i.uncache=0,i},Eo=function(t){return(t=t.split(" "))[0]+" "+t[1]},Aa=function(t,e,i){var n=Ft(e);return mt(parseFloat(e)+parseFloat(Ki(t,"x",i+"px",n)))+n},vp=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,md(t,e)},Qi="0deg",Dr="0px",tn=") ",md=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.z,h=i.rotation,u=i.rotationY,c=i.rotationX,f=i.skewX,d=i.skewY,_=i.scaleX,g=i.scaleY,m=i.transformPerspective,p=i.force3D,y=i.target,E=i.zOrigin,v="",x=p==="auto"&&t&&t!==1||p===!0;if(E&&(c!==Qi||u!==Qi)){var C=parseFloat(u)*er,R=Math.sin(C),T=Math.cos(C),w;C=parseFloat(c)*er,w=Math.cos(C),o=Aa(y,o,R*w*-E),a=Aa(y,a,-Math.sin(C)*-E),l=Aa(y,l,T*w*-E+E)}m!==Dr&&(v+="perspective("+m+tn),(n||s)&&(v+="translate("+n+"%, "+s+"%) "),(x||o!==Dr||a!==Dr||l!==Dr)&&(v+=l!==Dr||x?"translate3d("+o+", "+a+", "+l+") ":"translate("+o+", "+a+tn),h!==Qi&&(v+="rotate("+h+tn),u!==Qi&&(v+="rotateY("+u+tn),c!==Qi&&(v+="rotateX("+c+tn),(f!==Qi||d!==Qi)&&(v+="skew("+f+", "+d+tn),(_!==1||g!==1)&&(v+="scale("+_+", "+g+tn),y.style[ct]=v||"translate(0, 0)"},Ep=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,o=i.x,a=i.y,l=i.rotation,h=i.skewX,u=i.skewY,c=i.scaleX,f=i.scaleY,d=i.target,_=i.xOrigin,g=i.yOrigin,m=i.xOffset,p=i.yOffset,y=i.forceCSS,E=parseFloat(o),v=parseFloat(a),x,C,R,T,w;l=parseFloat(l),h=parseFloat(h),u=parseFloat(u),u&&(u=parseFloat(u),h+=u,l+=u),l||h?(l*=er,h*=er,x=Math.cos(l)*c,C=Math.sin(l)*c,R=Math.sin(l-h)*-f,T=Math.cos(l-h)*f,h&&(u*=er,w=Math.tan(h-u),w=Math.sqrt(1+w*w),R*=w,T*=w,u&&(w=Math.tan(u),w=Math.sqrt(1+w*w),x*=w,C*=w)),x=mt(x),C=mt(C),R=mt(R),T=mt(T)):(x=c,T=f,C=R=0),(E&&!~(o+"").indexOf("px")||v&&!~(a+"").indexOf("px"))&&(E=Ki(d,"x",o,"px"),v=Ki(d,"y",a,"px")),(_||g||m||p)&&(E=mt(E+_-(_*x+g*R)+m),v=mt(v+g-(_*C+g*T)+p)),(n||s)&&(w=d.getBBox(),E=mt(E+n/100*w.width),v=mt(v+s/100*w.height)),w="matrix("+x+","+C+","+R+","+T+","+E+","+v+")",d.setAttribute("transform",w),y&&(d.style[ct]=w)},wp=function(t,e,i,n,s){var o=360,a=It(s),l=parseFloat(s)*(a&&~s.indexOf("rad")?rn:1),h=l-n,u=n+h+"deg",c,f;return a&&(c=s.split("_")[1],c==="short"&&(h%=o,h!==h%(o/2)&&(h+=h<0?o:-360)),c==="cw"&&h<0?h=(h+o*Tu)%o-~~(h/o)*o:c==="ccw"&&h>0&&(h=(h-o*Tu)%o-~~(h/o)*o)),t._pt=f=new te(t._pt,e,i,n,h,sp),f.e=u,f.u="deg",t._props.push(i),f},Pu=function(t,e){for(var i in e)t[i]=e[i];return t},Cp=function(t,e,i){var n=Pu({},i._gsap),s="perspective,force3D,transformOrigin,svgOrigin",o=i.style,a,l,h,u,c,f,d,_;n.svg?(h=i.getAttribute("transform"),i.setAttribute("transform",""),o[ct]=e,a=us(i,1),xn(i,ct),i.setAttribute("transform",h)):(h=getComputedStyle(i)[ct],o[ct]=e,a=us(i,1),o[ct]=h);for(l in pi)h=n[l],u=a[l],h!==u&&s.indexOf(l)<0&&(d=Ft(h),_=Ft(u),c=d!==_?Ki(i,l,h,_):parseFloat(h),f=parseFloat(u),t._pt=new te(t._pt,a,l,c,f-c,xl),t._pt.u=_||0,t._props.push(l));Pu(a,n)};Qt("padding,margin,Width,Radius",function(r,t){var e="Top",i="Right",n="Bottom",s="Left",o=(t<3?[e,i,n,s]:[e+s,e+i,n+i,n+s]).map(function(a){return t<2?r+a:"border"+a+r});vo[t>1?"border"+r:r]=function(a,l,h,u,c){var f,d;if(arguments.length<4)return f=o.map(function(_){return ui(a,_,h)}),d=f.join(" "),d.split(f[0]).length===5?f[0]:d;f=(u+"").split(" "),d={},o.forEach(function(_,g){return d[_]=f[g]=f[g]||f[(g-1)/2|0]}),a.init(l,d,c)}});var pd={name:"css",register:El,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var o=this._props,a=t.style,l=i.vars.startAt,h,u,c,f,d,_,g,m,p,y,E,v,x,C,R,T;lh||El(),this.styles=this.styles||ud(t),T=this.styles.props,this.tween=i;for(g in e)if(g!=="autoRound"&&(u=e[g],!(ae[g]&&Qf(g,e,i,n,t,s)))){if(d=typeof u,_=vo[g],d==="function"&&(u=u.call(i,n,t,s),d=typeof u),d==="string"&&~u.indexOf("random(")&&(u=os(u)),_)_(this,t,g,u,i)&&(R=1);else if(g.substr(0,2)==="--")h=(getComputedStyle(t).getPropertyValue(g)+"").trim(),u+="",Gi.lastIndex=0,Gi.test(h)||(m=Ft(h),p=Ft(u)),p?m!==p&&(h=Ki(t,g,h,p)+p):m&&(u+=m),this.add(a,"setProperty",h,u,n,s,0,0,g),o.push(g),T.push(g,0,a[g]);else if(d!=="undefined"){if(l&&g in l?(h=typeof l[g]=="function"?l[g].call(i,n,t,s):l[g],It(h)&&~h.indexOf("random(")&&(h=os(h)),Ft(h+"")||h==="auto"||(h+=ce.units[g]||Ft(ui(t,g))||""),(h+"").charAt(1)==="="&&(h=ui(t,g))):h=ui(t,g),f=parseFloat(h),y=d==="string"&&u.charAt(1)==="="&&u.substr(0,2),y&&(u=u.substr(2)),c=parseFloat(u),g in je&&(g==="autoAlpha"&&(f===1&&ui(t,"visibility")==="hidden"&&c&&(f=0),T.push("visibility",0,a.visibility),Di(this,a,"visibility",f?"inherit":"hidden",c?"inherit":"hidden",!c)),g!=="scale"&&g!=="transform"&&(g=je[g],~g.indexOf(",")&&(g=g.split(",")[0]))),E=g in pi,E){if(this.styles.save(g),d==="string"&&u.substring(0,6)==="var(--"&&(u=Re(t,u.substring(4,u.indexOf(")"))),c=parseFloat(u)),v||(x=t._gsap,x.renderTransform&&!e.parseTransform||us(t,e.parseTransform),C=e.smoothOrigin!==!1&&x.smooth,v=this._pt=new te(this._pt,a,ct,0,1,x.renderTransform,x,0,-1),v.dep=1),g==="scale")this._pt=new te(this._pt,x,"scaleY",x.scaleY,(y?Qn(x.scaleY,y+c):c)-x.scaleY||0,xl),this._pt.u=0,o.push("scaleY",g),g+="X";else if(g==="transformOrigin"){T.push(ee,0,a[ee]),u=yp(u),x.svg?wl(t,u,0,C,0,this):(p=parseFloat(u.split(" ")[2])||0,p!==x.zOrigin&&Di(this,x,"zOrigin",x.zOrigin,p),Di(this,a,g,Eo(h),Eo(u)));continue}else if(g==="svgOrigin"){wl(t,u,1,C,0,this);continue}else if(g in gd){wp(this,x,g,f,y?Qn(f,y+u):u);continue}else if(g==="smoothOrigin"){Di(this,x,"smooth",x.smooth,u);continue}else if(g==="force3D"){x[g]=u;continue}else if(g==="transform"){Cp(this,u,t);continue}}else g in a||(g=fr(g)||g);if(E||(c||c===0)&&(f||f===0)&&!rp.test(u)&&g in a)m=(h+"").substr((f+"").length),c||(c=0),p=Ft(u)||(g in ce.units?ce.units[g]:m),m!==p&&(f=Ki(t,g,h,p)),this._pt=new te(this._pt,E?x:a,g,f,(y?Qn(f,y+c):c)-f,!E&&(p==="px"||g==="zIndex")&&e.autoRound!==!1?ap:xl),this._pt.u=p||0,m!==p&&p!=="%"&&(this._pt.b=h,this._pt.r=op);else if(g in a)pp.call(this,t,g,h,y?y+u:u);else if(g in t)this.add(t,g,h||t[g],y?y+u:u,n,s);else if(g!=="parseTransform"){Jl(g,u);continue}E||(g in a?T.push(g,0,a[g]):typeof t[g]=="function"?T.push(g,2,t[g]()):T.push(g,1,h||t[g])),o.push(g)}}R&&sd(this)},render:function(t,e){if(e.tween._time||!hh())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:ui,aliases:je,getSetter:function(t,e,i){var n=je[e];return n&&n.indexOf(",")<0&&(e=n),e in pi&&e!==ee&&(t._gsap.x||ui(t,"x"))?i&&Cu===i?e==="scale"?cp:up:(Cu=i||{})&&(e==="scale"?fp:dp):t.style&&!Hl(t.style[e])?lp:~e.indexOf("-")?hp:oh(t,e)},core:{_removeProperty:xn,_getMatrix:ch}};ie.utils.checkPrefix=fr;ie.core.getStyleSaver=ud;(function(r,t,e,i){var n=Qt(r+","+t+","+e,function(s){pi[s]=1});Qt(t,function(s){ce.units[s]="deg",gd[s]=1}),je[n[13]]=r+","+t,Qt(i,function(s){var o=s.split(":");je[o[1]]=n[o[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");Qt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(r){ce.units[r]="px"});ie.registerPlugin(pd);var Ce=ie.registerPlugin(pd)||ie;Ce.core.Tween;var Tp=Pe('<section class="dropdown"><div><ul class="links bebas-neue-regular"><li><a href="#home">Inicio</a></li> <li><a href="#service">Servicios</a></li> <li><a href="#gallery">Galera</a></li> <li><a href="#location">Ubicacin</a></li></ul> <button type="button" aria-label="button-dropdown" class="btn-hamburger"><img src="/assets/icons/close.svg" alt="cerrar men"></button></div></section>');function Rp(r,t){Cn(t,!1);let e=gu(t,"visible",8,!1),i=gu(t,"onClose",8,()=>{}),n=yn(),s=yn(e());Ea(()=>(Js(e()),K(s)),()=>{e()&&!K(s)&&bt(s,!0)}),Ea(()=>(Js(e()),K(n),Ce),()=>{e()&&K(n)&&Ce.fromTo(K(n),{opacity:0,x:100},{opacity:1,x:0,duration:.3,ease:"power2.out"})}),Ea(()=>(Js(e()),K(n),Ce),()=>{!e()&&K(n)&&Ce.to(K(n),{opacity:0,x:100,duration:.3,ease:"power2.in",onComplete:()=>{bt(s,!1)}})}),S_(),Rr();var o=Z_(),a=Qc(o);{var l=h=>{var u=Tp(),c=Et(u),f=wt(Et(c),2);go(u,d=>bt(n,d),()=>K(n)),mf("click",f,function(...d){var _;(_=i())==null||_.apply(this,d)}),fe(h,u)};$_(a,h=>{K(s)&&h(l)})}fe(r,o),Tn()}var Sp=Pe('<header><nav><div class="logo"><img src="/assets/logobarber.png" alt="logo-barberia"></div> <div class="container-buttons"><ul class="bebas-neue-regular"><li><a href="#home">Inicio</a></li> <li><a href="#services">Servicios</a></li> <li><a href="#gallery">Galera</a></li> <li><a href="#location">Ubicacin</a></li></ul> <a href="#form" class="bebas-neue-regular btn-cta">Reservar Turno</a> <button type="button" aria-label="Abrir men" class="btn-hamburger"><img src="/assets/icons/icon-hamburguer.svg" alt="icono men"></button></div></nav> <!></header>');function Ip(r){let t=yn(!1);function e(){bt(t,!K(t))}function i(){bt(t,!1)}var n=Sp(),s=Et(n),o=wt(Et(s),2),a=wt(Et(o),4),l=wt(s,2);Rp(l,{get visible(){return K(t)},onClose:i}),mf("click",a,e),fe(r,n)}var bp=Pe('<section class="hero" id="home" style="scroll-margin-top: 1rem;"><div class="overlay"></div> <picture><source class="background-desktop" srcset="/assets/bg-desktop.avif" media="(min-width: 1024px)"> <img class="background-image" src="/assets/bg-mobile.avif" alt="bg"></picture> <div class="content"><h1 class="bebas-neue-regular">TU ESTILO EMPIEZA EN LA BARBER</h1> <p class="bebas-neue-regular">Cortes, fades y barbera con distincin. Sac tu turno y sal con estilo</p></div></section>');function Mp(r,t){Cn(t,!1),Sr(()=>{Ce.from(".hero",{y:100,opacity:0,duration:2,stagger:.3,ease:"power3.out"})}),Rr();var e=bp();fe(r,e),Tn()}var Ap=Pe('<article class="reverse "><img class="margen" src="/assets/icons/margen.png" alt="margen"> <ul><li class="card"><div class="card-content"><h3 class="font-title bebas-neue-regular"> </h3> <p class="font-description opensans"> </p> <p class="price"> </p></div> <div class="card-image"><img width="200"></div></li></ul></article>'),Pp=Pe('<section id="services" class="service art" style="scroll-margin-top: 2.5rem;"><h2 class="bebas-neue-regular">Servicios</h2> <div class="desktop-services services"></div></section>');function Lp(r,t){Cn(t,!1);const e=[{id:1,title:"Corte de cabello",description:"Corte clsico o con onda, siempre ajustado a tu look.",price:"$10.000",image:"/assets/img3-servicios.avif"},{id:2,title:"Corte + Barba",description:"Combo completo: pelo alineado, barba marcada y prolija. Una sesin para salir renovado.",price:"$12.000",image:"/assets/img1-servicios.avif"},{id:3,title:"Barba Sola",description:"Barba prolija, con forma y estilo. Te la dejamos al ras, bien marcada.",price:"$8.000",image:"/assets/img2-servicios.avif"}];Sr(()=>{Ce.from(".art",{y:100,opacity:0,duration:2,stagger:.3,ease:"power3.out"})}),Rr();var i=Pp(),n=wt(Et(i),2);yf(n,5,()=>e,pf,(s,o)=>{var a=Ap(),l=wt(Et(a),2),h=Et(l),u=Et(h),c=Et(u),f=Et(c),d=wt(c,2),_=Et(d),g=wt(d,2),m=Et(g),p=wt(u,2),y=Et(p);nf(()=>{wa(f,K(o).title),wa(_,K(o).description),wa(m,K(o).price),fo(y,"src",K(o).image),fo(y,"alt",K(o).title)}),fe(s,a)}),fe(r,i),Tn()}var Op=Pe('<img alt="Imagen" class="image">'),Dp=Pe('<section id="gallery" class="gallery" style="scroll-margin-top: 4rem;"><h3 class="bebas-neue-regular">Looks</h3> <div class="carousel"></div></section>');function Fp(r,t){Cn(t,!1);let e=["/assets/carrusel.avif","/assets/carrusel1.avif","/assets/carrusel2.avif","/assets/carrusel3.avif"],i=0,n=yn([]),s;function o(u,c){const f=K(n)[u],d=K(n)[c];Ce.set(d,{x:"100%"}),Ce.to(f,{x:"-100%",duration:.8}),Ce.to(d,{x:"0%",duration:.8})}function a(){const u=(i+1)%e.length;o(i,u),i=u}Sr(()=>{Ce.set(K(n),{x:"100%"}),Ce.set(K(n)[0],{x:"0%"}),s=setInterval(a,3e3)}),am(()=>{clearInterval(s)}),Rr();var l=Dp(),h=wt(Et(l),2);yf(h,5,()=>e,pf,(u,c,f)=>{var d=Op();go(d,(_,g)=>x_(n,K(n)[g]=_),_=>{var g;return(g=K(n))==null?void 0:g[_]},()=>[f]),nf(()=>fo(d,"src",K(c))),fe(u,d)}),fe(r,l),Tn()}const Vt={ADD:"add",REMOVE:"remove"},dr={PROPERTYCHANGE:"propertychange"},W={CHANGE:"change",ERROR:"error",CONTEXTMENU:"contextmenu",CLICK:"click",DBLCLICK:"dblclick",KEYDOWN:"keydown",KEYPRESS:"keypress",LOAD:"load",TOUCHMOVE:"touchmove",WHEEL:"wheel"};class Zo{constructor(){this.disposed=!1}dispose(){this.disposed||(this.disposed=!0,this.disposeInternal())}disposeInternal(){}}function kp(r,t,e){let i,n;e=e||di;let s=0,o=r.length,a=!1;for(;s<o;)i=s+(o-s>>1),n=+e(r[i],t),n<0?s=i+1:(o=i,a=!n);return a?s:~s}function di(r,t){return r>t?1:r<t?-1:0}function Np(r,t){return r<t?1:r>t?-1:0}function fh(r,t,e){if(r[0]<=t)return 0;const i=r.length;if(t<=r[i-1])return i-1;if(typeof e=="function"){for(let n=1;n<i;++n){const s=r[n];if(s===t)return n;if(s<t)return e(t,r[n-1],s)>0?n-1:n}return i-1}if(e>0){for(let n=1;n<i;++n)if(r[n]<t)return n-1;return i-1}if(e<0){for(let n=1;n<i;++n)if(r[n]<=t)return n;return i-1}for(let n=1;n<i;++n){if(r[n]==t)return n;if(r[n]<t)return r[n-1]-t<t-r[n]?n-1:n}return i-1}function Gp(r,t,e){for(;t<e;){const i=r[t];r[t]=r[e],r[e]=i,++t,--e}}function dh(r,t){const e=Array.isArray(t)?t:[t],i=e.length;for(let n=0;n<i;n++)r[r.length]=e[n]}function Hi(r,t){const e=r.length;if(e!==t.length)return!1;for(let i=0;i<e;i++)if(r[i]!==t[i])return!1;return!0}function zp(r,t,e){const i=t||di;return r.every(function(n,s){if(s===0)return!0;const o=i(r[s-1],n);return!(o>0||o===0)})}function cs(){return!0}function jo(){return!1}function fs(){}function yd(r){let t,e,i;return function(){const n=Array.prototype.slice.call(arguments);return(!e||this!==i||!Hi(n,e))&&(i=this,e=n,t=r.apply(this,arguments)),t}}function Xp(r){function t(){let e;try{e=r()}catch(i){return Promise.reject(i)}return e instanceof Promise?e:Promise.resolve(e)}return t()}function Rs(r){for(const t in r)delete r[t]}function gr(r){let t;for(t in r)return!1;return!t}class vi{constructor(t){this.propagationStopped,this.defaultPrevented,this.type=t,this.target=null}preventDefault(){this.defaultPrevented=!0}stopPropagation(){this.propagationStopped=!0}}class Ho extends Zo{constructor(t){super(),this.eventTarget_=t,this.pendingRemovals_=null,this.dispatching_=null,this.listeners_=null}addEventListener(t,e){if(!t||!e)return;const i=this.listeners_||(this.listeners_={}),n=i[t]||(i[t]=[]);n.includes(e)||n.push(e)}dispatchEvent(t){const e=typeof t=="string",i=e?t:t.type,n=this.listeners_&&this.listeners_[i];if(!n)return;const s=e?new vi(t):t;s.target||(s.target=this.eventTarget_||this);const o=this.dispatching_||(this.dispatching_={}),a=this.pendingRemovals_||(this.pendingRemovals_={});i in o||(o[i]=0,a[i]=0),++o[i];let l;for(let h=0,u=n.length;h<u;++h)if("handleEvent"in n[h]?l=n[h].handleEvent(s):l=n[h].call(this,s),l===!1||s.propagationStopped){l=!1;break}if(--o[i]===0){let h=a[i];for(delete a[i];h--;)this.removeEventListener(i,fs);delete o[i]}return l}disposeInternal(){this.listeners_&&Rs(this.listeners_)}getListeners(t){return this.listeners_&&this.listeners_[t]||void 0}hasListener(t){return this.listeners_?t?t in this.listeners_:Object.keys(this.listeners_).length>0:!1}removeEventListener(t,e){if(!this.listeners_)return;const i=this.listeners_[t];if(!i)return;const n=i.indexOf(e);n!==-1&&(this.pendingRemovals_&&t in this.pendingRemovals_?(i[n]=fs,++this.pendingRemovals_[t]):(i.splice(n,1),i.length===0&&delete this.listeners_[t]))}}function H(r,t,e,i,n){if(n){const o=e;e=function(a){return r.removeEventListener(t,e),o.call(i??this,a)}}else i&&i!==r&&(e=e.bind(i));const s={target:r,type:t,listener:e};return r.addEventListener(t,e),s}function wo(r,t,e,i){return H(r,t,e,i,!0)}function lt(r){r&&r.target&&(r.target.removeEventListener(r.type,r.listener),Rs(r))}class Ss extends Ho{constructor(){super(),this.on=this.onInternal,this.once=this.onceInternal,this.un=this.unInternal,this.revision_=0}changed(){++this.revision_,this.dispatchEvent(W.CHANGE)}getRevision(){return this.revision_}onInternal(t,e){if(Array.isArray(t)){const i=t.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=H(this,t[s],e);return n}return H(this,t,e)}onceInternal(t,e){let i;if(Array.isArray(t)){const n=t.length;i=new Array(n);for(let s=0;s<n;++s)i[s]=wo(this,t[s],e)}else i=wo(this,t,e);return e.ol_key=i,i}unInternal(t,e){const i=e.ol_key;if(i)Wp(i);else if(Array.isArray(t))for(let n=0,s=t.length;n<s;++n)this.removeEventListener(t[n],e);else this.removeEventListener(t,e)}}Ss.prototype.on;Ss.prototype.once;Ss.prototype.un;function Wp(r){if(Array.isArray(r))for(let t=0,e=r.length;t<e;++t)lt(r[t]);else lt(r)}function q(){throw new Error("Unimplemented abstract method.")}let Yp=0;function J(r){return r.ol_uid||(r.ol_uid=String(++Yp))}class Lu extends vi{constructor(t,e,i){super(t),this.key=e,this.oldValue=i}}class ze extends Ss{constructor(t){super(),this.on,this.once,this.un,J(this),this.values_=null,t!==void 0&&this.setProperties(t)}get(t){let e;return this.values_&&this.values_.hasOwnProperty(t)&&(e=this.values_[t]),e}getKeys(){return this.values_&&Object.keys(this.values_)||[]}getProperties(){return this.values_&&Object.assign({},this.values_)||{}}getPropertiesInternal(){return this.values_}hasProperties(){return!!this.values_}notify(t,e){let i;i=`change:${t}`,this.hasListener(i)&&this.dispatchEvent(new Lu(i,t,e)),i=dr.PROPERTYCHANGE,this.hasListener(i)&&this.dispatchEvent(new Lu(i,t,e))}addChangeListener(t,e){this.addEventListener(`change:${t}`,e)}removeChangeListener(t,e){this.removeEventListener(`change:${t}`,e)}set(t,e,i){const n=this.values_||(this.values_={});if(i)n[t]=e;else{const s=n[t];n[t]=e,s!==e&&this.notify(t,s)}}setProperties(t,e){for(const i in t)this.set(i,t[i],e)}applyProperties(t){t.values_&&Object.assign(this.values_||(this.values_={}),t.values_)}unset(t,e){if(this.values_&&t in this.values_){const i=this.values_[t];delete this.values_[t],gr(this.values_)&&(this.values_=null),e||this.notify(t,i)}}}const Ou={LENGTH:"length"};class zs extends vi{constructor(t,e,i){super(t),this.element=e,this.index=i}}class He extends ze{constructor(t,e){if(super(),this.on,this.once,this.un,e=e||{},this.unique_=!!e.unique,this.array_=t||[],this.unique_)for(let i=0,n=this.array_.length;i<n;++i)this.assertUnique_(this.array_[i],i);this.updateLength_()}clear(){for(;this.getLength()>0;)this.pop()}extend(t){for(let e=0,i=t.length;e<i;++e)this.push(t[e]);return this}forEach(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)t(e[i],i,e)}getArray(){return this.array_}item(t){return this.array_[t]}getLength(){return this.get(Ou.LENGTH)}insertAt(t,e){if(t<0||t>this.getLength())throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e),this.array_.splice(t,0,e),this.updateLength_(),this.dispatchEvent(new zs(Vt.ADD,e,t))}pop(){return this.removeAt(this.getLength()-1)}push(t){this.unique_&&this.assertUnique_(t);const e=this.getLength();return this.insertAt(e,t),this.getLength()}remove(t){const e=this.array_;for(let i=0,n=e.length;i<n;++i)if(e[i]===t)return this.removeAt(i)}removeAt(t){if(t<0||t>=this.getLength())return;const e=this.array_[t];return this.array_.splice(t,1),this.updateLength_(),this.dispatchEvent(new zs(Vt.REMOVE,e,t)),e}setAt(t,e){const i=this.getLength();if(t>=i){this.insertAt(t,e);return}if(t<0)throw new Error("Index out of bounds: "+t);this.unique_&&this.assertUnique_(e,t);const n=this.array_[t];this.array_[t]=e,this.dispatchEvent(new zs(Vt.REMOVE,n,t)),this.dispatchEvent(new zs(Vt.ADD,e,t))}updateLength_(){this.set(Ou.LENGTH,this.array_.length)}assertUnique_(t,e){for(let i=0,n=this.array_.length;i<n;++i)if(this.array_[i]===t&&i!==e)throw new Error("Duplicate item added to a unique collection")}}class Yn extends vi{constructor(t,e,i){super(t),this.map=e,this.frameState=i!==void 0?i:null}}class bi extends Yn{constructor(t,e,i,n,s,o){super(t,e,s),this.originalEvent=i,this.pixel_=null,this.coordinate_=null,this.dragging=n!==void 0?n:!1,this.activePointers=o}get pixel(){return this.pixel_||(this.pixel_=this.map.getEventPixel(this.originalEvent)),this.pixel_}set pixel(t){this.pixel_=t}get coordinate(){return this.coordinate_||(this.coordinate_=this.map.getCoordinateFromPixel(this.pixel)),this.coordinate_}set coordinate(t){this.coordinate_=t}preventDefault(){super.preventDefault(),"preventDefault"in this.originalEvent&&this.originalEvent.preventDefault()}stopPropagation(){super.stopPropagation(),"stopPropagation"in this.originalEvent&&this.originalEvent.stopPropagation()}}const gt={SINGLECLICK:"singleclick",CLICK:W.CLICK,DBLCLICK:W.DBLCLICK,POINTERDRAG:"pointerdrag",POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown",POINTERUP:"pointerup",POINTEROVER:"pointerover",POINTEROUT:"pointerout",POINTERENTER:"pointerenter",POINTERLEAVE:"pointerleave",POINTERCANCEL:"pointercancel"},vn=typeof navigator<"u"&&typeof navigator.userAgent<"u"?navigator.userAgent.toLowerCase():"",Bp=vn.includes("safari")&&!vn.includes("chrom");Bp&&(vn.includes("version/15.4")||/cpu (os|iphone os) 15_4 like mac os x/.test(vn));const Up=vn.includes("webkit")&&!vn.includes("edge"),xd=vn.includes("macintosh"),Kp=typeof devicePixelRatio<"u"?devicePixelRatio:1,vd=typeof WorkerGlobalScope<"u"&&typeof OffscreenCanvas<"u"&&self instanceof WorkerGlobalScope,Ed=typeof Image<"u"&&Image.prototype.decode,wd=function(){let r=!1;try{const t=Object.defineProperty({},"passive",{get:function(){r=!0}});window.addEventListener("_",null,t),window.removeEventListener("_",null,t)}catch{}return r}(),Cl={POINTERMOVE:"pointermove",POINTERDOWN:"pointerdown"};class Vp extends Ho{constructor(t,e){super(t),this.map_=t,this.clickTimeoutId_,this.emulateClicks_=!1,this.dragging_=!1,this.dragListenerKeys_=[],this.moveTolerance_=e===void 0?1:e,this.down_=null;const i=this.map_.getViewport();this.activePointers_=[],this.trackedTouches_={},this.element_=i,this.pointerdownListenerKey_=H(i,Cl.POINTERDOWN,this.handlePointerDown_,this),this.originalPointerMoveEvent_,this.relayedListenerKey_=H(i,Cl.POINTERMOVE,this.relayMoveEvent_,this),this.boundHandleTouchMove_=this.handleTouchMove_.bind(this),this.element_.addEventListener(W.TOUCHMOVE,this.boundHandleTouchMove_,wd?{passive:!1}:!1)}emulateClick_(t){let e=new bi(gt.CLICK,this.map_,t);this.dispatchEvent(e),this.clickTimeoutId_!==void 0?(clearTimeout(this.clickTimeoutId_),this.clickTimeoutId_=void 0,e=new bi(gt.DBLCLICK,this.map_,t),this.dispatchEvent(e)):this.clickTimeoutId_=setTimeout(()=>{this.clickTimeoutId_=void 0;const i=new bi(gt.SINGLECLICK,this.map_,t);this.dispatchEvent(i)},250)}updateActivePointers_(t){const e=t,i=e.pointerId;if(e.type==gt.POINTERUP||e.type==gt.POINTERCANCEL){delete this.trackedTouches_[i];for(const n in this.trackedTouches_)if(this.trackedTouches_[n].target!==e.target){delete this.trackedTouches_[n];break}}else(e.type==gt.POINTERDOWN||e.type==gt.POINTERMOVE)&&(this.trackedTouches_[i]=e);this.activePointers_=Object.values(this.trackedTouches_)}handlePointerUp_(t){this.updateActivePointers_(t);const e=new bi(gt.POINTERUP,this.map_,t,void 0,void 0,this.activePointers_);this.dispatchEvent(e),this.emulateClicks_&&!e.defaultPrevented&&!this.dragging_&&this.isMouseActionButton_(t)&&this.emulateClick_(this.down_),this.activePointers_.length===0&&(this.dragListenerKeys_.forEach(lt),this.dragListenerKeys_.length=0,this.dragging_=!1,this.down_=null)}isMouseActionButton_(t){return t.button===0}handlePointerDown_(t){this.emulateClicks_=this.activePointers_.length===0,this.updateActivePointers_(t);const e=new bi(gt.POINTERDOWN,this.map_,t,void 0,void 0,this.activePointers_);if(this.dispatchEvent(e),this.down_=new PointerEvent(t.type,t),Object.defineProperty(this.down_,"target",{writable:!1,value:t.target}),this.dragListenerKeys_.length===0){const i=this.map_.getOwnerDocument();this.dragListenerKeys_.push(H(i,gt.POINTERMOVE,this.handlePointerMove_,this),H(i,gt.POINTERUP,this.handlePointerUp_,this),H(this.element_,gt.POINTERCANCEL,this.handlePointerUp_,this)),this.element_.getRootNode&&this.element_.getRootNode()!==i&&this.dragListenerKeys_.push(H(this.element_.getRootNode(),gt.POINTERUP,this.handlePointerUp_,this))}}handlePointerMove_(t){if(this.isMoving_(t)){this.updateActivePointers_(t),this.dragging_=!0;const e=new bi(gt.POINTERDRAG,this.map_,t,this.dragging_,void 0,this.activePointers_);this.dispatchEvent(e)}}relayMoveEvent_(t){this.originalPointerMoveEvent_=t;const e=!!(this.down_&&this.isMoving_(t));this.dispatchEvent(new bi(gt.POINTERMOVE,this.map_,t,e))}handleTouchMove_(t){const e=this.originalPointerMoveEvent_;(!e||e.defaultPrevented)&&(typeof t.cancelable!="boolean"||t.cancelable===!0)&&t.preventDefault()}isMoving_(t){return this.dragging_||Math.abs(t.clientX-this.down_.clientX)>this.moveTolerance_||Math.abs(t.clientY-this.down_.clientY)>this.moveTolerance_}disposeInternal(){this.relayedListenerKey_&&(lt(this.relayedListenerKey_),this.relayedListenerKey_=null),this.element_.removeEventListener(W.TOUCHMOVE,this.boundHandleTouchMove_),this.pointerdownListenerKey_&&(lt(this.pointerdownListenerKey_),this.pointerdownListenerKey_=null),this.dragListenerKeys_.forEach(lt),this.dragListenerKeys_.length=0,this.element_=null,super.disposeInternal()}}const hi={POSTRENDER:"postrender",MOVESTART:"movestart",MOVEEND:"moveend",LOADSTART:"loadstart",LOADEND:"loadend"},Ot={LAYERGROUP:"layergroup",SIZE:"size",TARGET:"target",VIEW:"view"},G={IDLE:0,LOADING:1,LOADED:2,ERROR:3,EMPTY:4};function Q(r,t){if(!r)throw new Error(t)}const Co=1/0;class Zp{constructor(t,e){this.priorityFunction_=t,this.keyFunction_=e,this.elements_=[],this.priorities_=[],this.queuedElements_={}}clear(){this.elements_.length=0,this.priorities_.length=0,Rs(this.queuedElements_)}dequeue(){const t=this.elements_,e=this.priorities_,i=t[0];t.length==1?(t.length=0,e.length=0):(t[0]=t.pop(),e[0]=e.pop(),this.siftUp_(0));const n=this.keyFunction_(i);return delete this.queuedElements_[n],i}enqueue(t){Q(!(this.keyFunction_(t)in this.queuedElements_),"Tried to enqueue an `element` that was already added to the queue");const e=this.priorityFunction_(t);return e!=Co?(this.elements_.push(t),this.priorities_.push(e),this.queuedElements_[this.keyFunction_(t)]=!0,this.siftDown_(0,this.elements_.length-1),!0):!1}getCount(){return this.elements_.length}getLeftChildIndex_(t){return t*2+1}getRightChildIndex_(t){return t*2+2}getParentIndex_(t){return t-1>>1}heapify_(){let t;for(t=(this.elements_.length>>1)-1;t>=0;t--)this.siftUp_(t)}isEmpty(){return this.elements_.length===0}isKeyQueued(t){return t in this.queuedElements_}isQueued(t){return this.isKeyQueued(this.keyFunction_(t))}siftUp_(t){const e=this.elements_,i=this.priorities_,n=e.length,s=e[t],o=i[t],a=t;for(;t<n>>1;){const l=this.getLeftChildIndex_(t),h=this.getRightChildIndex_(t),u=h<n&&i[h]<i[l]?h:l;e[t]=e[u],i[t]=i[u],t=u}e[t]=s,i[t]=o,this.siftDown_(a,t)}siftDown_(t,e){const i=this.elements_,n=this.priorities_,s=i[e],o=n[e];for(;e>t;){const a=this.getParentIndex_(e);if(n[a]>o)i[e]=i[a],n[e]=n[a],e=a;else break}i[e]=s,n[e]=o}reprioritize(){const t=this.priorityFunction_,e=this.elements_,i=this.priorities_;let n=0;const s=e.length;let o,a,l;for(a=0;a<s;++a)o=e[a],l=t(o),l==Co?delete this.queuedElements_[this.keyFunction_(o)]:(i[n]=l,e[n++]=o);e.length=n,i.length=n,this.heapify_()}}class jp extends Zp{constructor(t,e){super(i=>t.apply(null,i),i=>i[0].getKey()),this.boundHandleTileChange_=this.handleTileChange.bind(this),this.tileChangeCallback_=e,this.tilesLoading_=0,this.tilesLoadingKeys_={}}enqueue(t){const e=super.enqueue(t);return e&&t[0].addEventListener(W.CHANGE,this.boundHandleTileChange_),e}getTilesLoading(){return this.tilesLoading_}handleTileChange(t){const e=t.target,i=e.getState();if(i===G.LOADED||i===G.ERROR||i===G.EMPTY){i!==G.ERROR&&e.removeEventListener(W.CHANGE,this.boundHandleTileChange_);const n=e.getKey();n in this.tilesLoadingKeys_&&(delete this.tilesLoadingKeys_[n],--this.tilesLoading_),this.tileChangeCallback_()}}loadMoreTiles(t,e){let i=0;for(;this.tilesLoading_<t&&i<e&&this.getCount()>0;){const n=this.dequeue()[0],s=n.getKey();n.getState()===G.IDLE&&!(s in this.tilesLoadingKeys_)&&(this.tilesLoadingKeys_[s]=!0,++this.tilesLoading_,++i,n.load())}}}function Hp(r,t,e,i,n){if(!r||!(e in r.wantedTiles)||!r.wantedTiles[e][t.getKey()])return Co;const s=r.viewState.center,o=i[0]-s[0],a=i[1]-s[1];return 65536*Math.log(n)+Math.sqrt(o*o+a*a)/n}const Dt={ANIMATING:0,INTERACTING:1},Oe={CENTER:"center",RESOLUTION:"resolution",ROTATION:"rotation"};function ft(r,t,e){return Math.min(Math.max(r,t),e)}function qp(r,t,e,i,n,s){const o=n-e,a=s-i;if(o!==0||a!==0){const l=((r-e)*o+(t-i)*a)/(o*o+a*a);l>1?(e=n,i=s):l>0&&(e+=o*l,i+=a*l)}return ir(r,t,e,i)}function ir(r,t,e,i){const n=e-r,s=i-t;return n*n+s*s}function $p(r){const t=r.length;for(let i=0;i<t;i++){let n=i,s=Math.abs(r[i][i]);for(let a=i+1;a<t;a++){const l=Math.abs(r[a][i]);l>s&&(s=l,n=a)}if(s===0)return null;const o=r[n];r[n]=r[i],r[i]=o;for(let a=i+1;a<t;a++){const l=-r[a][i]/r[i][i];for(let h=i;h<t+1;h++)i==h?r[a][h]=0:r[a][h]+=l*r[i][h]}}const e=new Array(t);for(let i=t-1;i>=0;i--){e[i]=r[i][t]/r[i][i];for(let n=i-1;n>=0;n--)r[n][t]-=r[n][i]*e[i]}return e}function Du(r){return r*180/Math.PI}function zi(r){return r*Math.PI/180}function nr(r,t){const e=r%t;return e*t<0?e+t:e}function we(r,t,e){return r+e*(t-r)}function qo(r,t){const e=Math.pow(10,t);return Math.round(r*e)/e}function Xs(r,t){return Math.floor(qo(r,t))}function Ws(r,t){return Math.ceil(qo(r,t))}function Tl(r,t,e){if(r>=t&&r<e)return r;const i=e-t;return((r-t)%i+i)%i+t}function Fu(r,t,e){return function(i,n,s,o,a){if(!i)return;if(!n&&!t)return i;const l=t?0:s[0]*n,h=t?0:s[1]*n,u=a?a[0]:0,c=a?a[1]:0;let f=r[0]+l/2+u,d=r[2]-l/2+u,_=r[1]+h/2+c,g=r[3]-h/2+c;f>d&&(f=(d+f)/2,d=f),_>g&&(_=(g+_)/2,g=_);let m=ft(i[0],f,d),p=ft(i[1],_,g);if(o&&e&&n){const y=30*n;m+=-y*Math.log(1+Math.max(0,f-i[0])/y)+y*Math.log(1+Math.max(0,i[0]-d)/y),p+=-y*Math.log(1+Math.max(0,_-i[1])/y)+y*Math.log(1+Math.max(0,i[1]-g)/y)}return[m,p]}}function Jp(r){return r}const Rt={UNKNOWN:0,INTERSECTING:1,ABOVE:2,RIGHT:4,BELOW:8,LEFT:16};function ku(r){const t=Ae();for(let e=0,i=r.length;e<i;++e)Jr(t,r[e]);return t}function gh(r,t,e){return e?(e[0]=r[0]-t,e[1]=r[1]-t,e[2]=r[2]+t,e[3]=r[3]+t,e):[r[0]-t,r[1]-t,r[2]+t,r[3]+t]}function Cd(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r.slice()}function Td(r,t,e){let i,n;return t<r[0]?i=r[0]-t:r[2]<t?i=t-r[2]:i=0,e<r[1]?n=r[1]-e:r[3]<e?n=e-r[3]:n=0,i*i+n*n}function _r(r,t){return Rd(r,t[0],t[1])}function jn(r,t){return r[0]<=t[0]&&t[2]<=r[2]&&r[1]<=t[1]&&t[3]<=r[3]}function Rd(r,t,e){return r[0]<=t&&t<=r[2]&&r[1]<=e&&e<=r[3]}function Rl(r,t){const e=r[0],i=r[1],n=r[2],s=r[3],o=t[0],a=t[1];let l=Rt.UNKNOWN;return o<e?l=l|Rt.LEFT:o>n&&(l=l|Rt.RIGHT),a<i?l=l|Rt.BELOW:a>s&&(l=l|Rt.ABOVE),l===Rt.UNKNOWN&&(l=Rt.INTERSECTING),l}function Ae(){return[1/0,1/0,-1/0,-1/0]}function Vi(r,t,e,i,n){return n?(n[0]=r,n[1]=t,n[2]=e,n[3]=i,n):[r,t,e,i]}function $o(r){return Vi(1/0,1/0,-1/0,-1/0,r)}function Sd(r,t){const e=r[0],i=r[1];return Vi(e,i,e,i,t)}function _h(r,t,e,i,n){const s=$o(n);return Id(s,r,t,e,i)}function ds(r,t){return r[0]==t[0]&&r[2]==t[2]&&r[1]==t[1]&&r[3]==t[3]}function Qp(r,t){return t[0]<r[0]&&(r[0]=t[0]),t[2]>r[2]&&(r[2]=t[2]),t[1]<r[1]&&(r[1]=t[1]),t[3]>r[3]&&(r[3]=t[3]),r}function Jr(r,t){t[0]<r[0]&&(r[0]=t[0]),t[0]>r[2]&&(r[2]=t[0]),t[1]<r[1]&&(r[1]=t[1]),t[1]>r[3]&&(r[3]=t[1])}function Id(r,t,e,i,n){for(;e<i;e+=n)t0(r,t[e],t[e+1]);return r}function t0(r,t,e){r[0]=Math.min(r[0],t),r[1]=Math.min(r[1],e),r[2]=Math.max(r[2],t),r[3]=Math.max(r[3],e)}function bd(r,t){let e;return e=t(Jo(r)),e||(e=t(Qo(r)),e)||(e=t(ta(r)),e)||(e=t(Sn(r)),e)?e:!1}function Sl(r){let t=0;return ea(r)||(t=it(r)*Yt(r)),t}function Jo(r){return[r[0],r[1]]}function Qo(r){return[r[2],r[1]]}function En(r){return[(r[0]+r[2])/2,(r[1]+r[3])/2]}function e0(r,t){let e;if(t==="bottom-left")e=Jo(r);else if(t==="bottom-right")e=Qo(r);else if(t==="top-left")e=Sn(r);else if(t==="top-right")e=ta(r);else throw new Error("Invalid corner");return e}function Il(r,t,e,i,n){const[s,o,a,l,h,u,c,f]=Md(r,t,e,i);return Vi(Math.min(s,a,h,c),Math.min(o,l,u,f),Math.max(s,a,h,c),Math.max(o,l,u,f),n)}function Md(r,t,e,i){const n=t*i[0]/2,s=t*i[1]/2,o=Math.cos(e),a=Math.sin(e),l=n*o,h=n*a,u=s*o,c=s*a,f=r[0],d=r[1];return[f-l+c,d-h-u,f-l-c,d-h+u,f+l-c,d+h+u,f+l+c,d+h-u,f-l+c,d-h-u]}function Yt(r){return r[3]-r[1]}function pn(r,t,e){const i=e||Ae();return Ht(r,t)?(r[0]>t[0]?i[0]=r[0]:i[0]=t[0],r[1]>t[1]?i[1]=r[1]:i[1]=t[1],r[2]<t[2]?i[2]=r[2]:i[2]=t[2],r[3]<t[3]?i[3]=r[3]:i[3]=t[3]):$o(i),i}function Sn(r){return[r[0],r[3]]}function ta(r){return[r[2],r[3]]}function it(r){return r[2]-r[0]}function Ht(r,t){return r[0]<=t[2]&&r[2]>=t[0]&&r[1]<=t[3]&&r[3]>=t[1]}function ea(r){return r[2]<r[0]||r[3]<r[1]}function i0(r,t){return t?(t[0]=r[0],t[1]=r[1],t[2]=r[2],t[3]=r[3],t):r}function n0(r,t,e){let i=!1;const n=Rl(r,t),s=Rl(r,e);if(n===Rt.INTERSECTING||s===Rt.INTERSECTING)i=!0;else{const o=r[0],a=r[1],l=r[2],h=r[3],u=t[0],c=t[1],f=e[0],d=e[1],_=(d-c)/(f-u);let g,m;s&Rt.ABOVE&&!(n&Rt.ABOVE)&&(g=f-(d-h)/_,i=g>=o&&g<=l),!i&&s&Rt.RIGHT&&!(n&Rt.RIGHT)&&(m=d-(f-l)*_,i=m>=a&&m<=h),!i&&s&Rt.BELOW&&!(n&Rt.BELOW)&&(g=f-(d-a)/_,i=g>=o&&g<=l),!i&&s&Rt.LEFT&&!(n&Rt.LEFT)&&(m=d-(f-o)*_,i=m>=a&&m<=h)}return i}function Ad(r,t){const e=t.getExtent(),i=En(r);if(t.canWrapX()&&(i[0]<e[0]||i[0]>=e[2])){const n=it(e),o=Math.floor((i[0]-e[0])/n)*n;r[0]-=o,r[2]-=o}return r}function Pd(r,t,e){if(t.canWrapX()){const i=t.getExtent();if(!isFinite(r[0])||!isFinite(r[2]))return[[i[0],r[1],i[2],r[3]]];Ad(r,t);const n=it(i);if(it(r)>n&&!e)return[[i[0],r[1],i[2],r[3]]];if(r[0]<i[0])return[[r[0]+n,r[1],i[2],r[3]],[i[0],r[1],r[2],r[3]]];if(r[2]>i[2])return[[r[0],r[1],i[2],r[3]],[i[0],r[1],r[2]-n,r[3]]]}return[r]}function r0(r,t){return r[0]+=+t[0],r[1]+=+t[1],r}function To(r,t){let e=!0;for(let i=r.length-1;i>=0;--i)if(r[i]!=t[i]){e=!1;break}return e}function mh(r,t){const e=Math.cos(t),i=Math.sin(t),n=r[0]*e-r[1]*i,s=r[1]*e+r[0]*i;return r[0]=n,r[1]=s,r}function s0(r,t){return r[0]*=t,r[1]*=t,r}function Ld(r,t){if(t.canWrapX()){const e=it(t.getExtent()),i=o0(r,t,e);i&&(r[0]-=i*e)}return r}function o0(r,t,e){const i=t.getExtent();let n=0;return t.canWrapX()&&(r[0]<i[0]||r[0]>i[2])&&(e=e||it(i),n=Math.floor((r[0]-i[0])/e)),n}function Od(r){return Math.pow(r,3)}function Ir(r){return 1-Od(1-r)}function a0(r){return 3*r*r-2*r*r*r}function l0(r){return r}const h0=63710088e-1;function Nu(r,t,e){e=e||h0;const i=zi(r[1]),n=zi(t[1]),s=(n-i)/2,o=zi(t[0]-r[0])/2,a=Math.sin(s)*Math.sin(s)+Math.sin(o)*Math.sin(o)*Math.cos(i)*Math.cos(n);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function Dd(...r){console.warn(...r)}const ph={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class yh{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||ph[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const Is=6378137,Hn=Math.PI*Is,u0=[-Hn,-Hn,Hn,Hn],c0=[-180,-85,180,85],Ys=Is*Math.log(Math.tan(Math.PI/2));class Dn extends yh{constructor(t){super({code:t,units:"m",extent:u0,global:!0,worldExtent:c0,getPointResolution:function(e,i){return e/Math.cosh(i[1]/Is)}})}}const Gu=[new Dn("EPSG:3857"),new Dn("EPSG:102100"),new Dn("EPSG:102113"),new Dn("EPSG:900913"),new Dn("http://www.opengis.net/def/crs/EPSG/0/3857"),new Dn("http://www.opengis.net/gml/srs/epsg.xml#3857")];function f0(r,t,e,i){const n=r.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=r.slice():t=new Array(n));for(let s=0;s<n;s+=i){t[s]=Hn*r[s]/180;let o=Is*Math.log(Math.tan(Math.PI*(+r[s+1]+90)/360));o>Ys?o=Ys:o<-Ys&&(o=-Ys),t[s+1]=o}return t}function d0(r,t,e,i){const n=r.length;e=e>1?e:2,i=i??e,t===void 0&&(e>2?t=r.slice():t=new Array(n));for(let s=0;s<n;s+=i)t[s]=180*r[s]/Hn,t[s+1]=360*Math.atan(Math.exp(r[s+1]/Is))/Math.PI-90;return t}const g0=6378137,zu=[-180,-90,180,90],_0=Math.PI*g0/180;class en extends yh{constructor(t,e){super({code:t,units:"degrees",extent:zu,axisOrientation:e,global:!0,metersPerUnit:_0,worldExtent:zu})}}const Xu=[new en("CRS:84"),new en("EPSG:4326","neu"),new en("urn:ogc:def:crs:OGC:1.3:CRS84"),new en("urn:ogc:def:crs:OGC:2:84"),new en("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new en("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new en("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let bl={};function m0(r){return bl[r]||bl[r.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function p0(r,t){bl[r]=t}let rr={};function gs(r,t,e){const i=r.getCode(),n=t.getCode();i in rr||(rr[i]={}),rr[i][n]=e}function Pa(r,t){return r in rr&&t in rr[r]?rr[r][t]:null}const Ro=.9996,be=.00669438,ia=be*be,na=ia*be,an=be/(1-be),Wu=Math.sqrt(1-be),mr=(1-Wu)/(1+Wu),Fd=mr*mr,xh=Fd*mr,vh=xh*mr,kd=vh*mr,Nd=1-be/4-3*ia/64-5*na/256,y0=3*be/8+3*ia/32+45*na/1024,x0=15*ia/256+45*na/1024,v0=35*na/3072,E0=3/2*mr-27/32*xh+269/512*kd,w0=21/16*Fd-55/32*vh,C0=151/96*xh-417/128*kd,T0=1097/512*vh,So=6378137;function R0(r,t,e){const i=r-5e5,o=(e.north?t:t-1e7)/Ro/(So*Nd),a=o+E0*Math.sin(2*o)+w0*Math.sin(4*o)+C0*Math.sin(6*o)+T0*Math.sin(8*o),l=Math.sin(a),h=l*l,u=Math.cos(a),c=l/u,f=c*c,d=f*f,_=1-be*h,g=Math.sqrt(1-be*h),m=So/g,p=(1-be)/_,y=an*u**2,E=y*y,v=i/(m*Ro),x=v*v,C=x*v,R=C*v,T=R*v,w=T*v,I=a-c/p*(x/2-R/24*(5+3*f+10*y-4*E-9*an))+w/720*(61+90*f+298*y+45*d-252*an-3*E);let P=(v-C/6*(1+2*f+y)+T/120*(5-2*y+28*f-3*E+8*an+24*d))/u;return P=Tl(P+zi(Gd(e.number)),-Math.PI,Math.PI),[Du(P),Du(I)]}const Yu=-80,Bu=84,S0=-180,I0=180;function b0(r,t,e){r=Tl(r,S0,I0),t<Yu?t=Yu:t>Bu&&(t=Bu);const i=zi(t),n=Math.sin(i),s=Math.cos(i),o=n/s,a=o*o,l=a*a,h=zi(r),u=Gd(e.number),c=zi(u),f=So/Math.sqrt(1-be*n**2),d=an*s**2,_=s*Tl(h-c,-Math.PI,Math.PI),g=_*_,m=g*_,p=m*_,y=p*_,E=y*_,v=So*(Nd*i-y0*Math.sin(2*i)+x0*Math.sin(4*i)-v0*Math.sin(6*i)),x=Ro*f*(_+m/6*(1-a+d)+y/120*(5-18*a+l+72*d-58*an))+5e5;let C=Ro*(v+f*o*(g/2+p/24*(5-a+9*d+4*d**2)+E/720*(61-58*a+l+600*d-330*an)));return e.north||(C+=1e7),[x,C]}function Gd(r){return(r-1)*6-180+3}const M0=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function zd(r){let t=0;for(const n of M0){const s=r.match(n);if(s){t=parseInt(s[1]);break}}if(!t)return null;let e=0,i=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(i=!0,e=t-32600),e?{number:e,north:i}:null}function Uu(r,t){return function(e,i,n,s){const o=e.length;n=n>1?n:2,s=s??n,i||(n>2?i=e.slice():i=new Array(o));for(let a=0;a<o;a+=s){const l=e[a],h=e[a+1],u=r(l,h,t);i[a]=u[0],i[a+1]=u[1]}return i}}function A0(r){return zd(r)?new yh({code:r,units:"m"}):null}function P0(r){const t=zd(r.getCode());return t?{forward:Uu(b0,t),inverse:Uu(R0,t)}:null}const L0=[P0],O0=[A0];let Ml=!0;function Xd(r){Ml=!1}function Eh(r,t){if(t!==void 0){for(let e=0,i=r.length;e<i;++e)t[e]=r[e];t=t}else t=r.slice();return t}function Al(r){p0(r.getCode(),r),gs(r,r,Eh)}function D0(r){r.forEach(Al)}function ne(r){if(typeof r!="string")return r;const t=m0(r);if(t)return t;for(const e of O0){const i=e(r);if(i)return i}return null}function Ku(r,t,e,i){r=ne(r);let n;const s=r.getPointResolutionFunc();if(s)n=s(t,e);else{const o=r.getUnits();if(o=="degrees"||i=="degrees")n=t;else{const a=Ch(r,ne("EPSG:4326"));if(!a&&o!=="degrees")n=t*r.getMetersPerUnit();else{let h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];h=a(h,h,2);const u=Nu(h.slice(0,2),h.slice(2,4)),c=Nu(h.slice(4,6),h.slice(6,8));n=(u+c)/2}const l=r.getMetersPerUnit();l!==void 0&&(n/=l)}}return n}function Vu(r){D0(r),r.forEach(function(t){r.forEach(function(e){t!==e&&gs(t,e,Eh)})})}function F0(r,t,e,i){r.forEach(function(n){t.forEach(function(s){gs(n,s,e),gs(s,n,i)})})}function wh(r,t){return r?typeof r=="string"?ne(r):r:ne(t)}function k0(r){return function(t,e,i,n){const s=t.length;i=i!==void 0?i:2,n=n??i,e=e!==void 0?e:new Array(s);for(let o=0;o<s;o+=n){const a=r(t.slice(o,o+i)),l=a.length;for(let h=0,u=n;h<u;++h)e[o+h]=h>=l?t[o+h]:a[h]}return e}}function N0(r,t){return Xd(),Th(r,"EPSG:4326","EPSG:3857")}function La(r,t){if(r===t)return!0;const e=r.getUnits()===t.getUnits();return(r.getCode()===t.getCode()||Ch(r,t)===Eh)&&e}function Ch(r,t){const e=r.getCode(),i=t.getCode();let n=Pa(e,i);if(n)return n;let s=null,o=null;for(const l of L0)s||(s=l(r)),o||(o=l(t));if(!s&&!o)return null;const a="EPSG:4326";if(o)if(s)n=Oa(s.inverse,o.forward);else{const l=Pa(e,a);l&&(n=Oa(l,o.forward))}else{const l=Pa(a,i);l&&(n=Oa(s.inverse,l))}return n&&(Al(r),Al(t),gs(r,t,n)),n}function Oa(r,t){return function(e,i,n,s){return i=r(e,i,n,s),t(i,i,n,s)}}function Io(r,t){const e=ne(r),i=ne(t);return Ch(e,i)}function Th(r,t,e){const i=Io(t,e);if(!i){const n=ne(t).getCode(),s=ne(e).getCode();throw new Error(`No transform available between ${n} and ${s}`)}return i(r,void 0,r.length)}function Pl(r,t){return r}function oi(r,t){return Ml&&!To(r,[0,0])&&r[0]>=-180&&r[0]<=180&&r[1]>=-90&&r[1]<=90&&(Ml=!1,Dd("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),r}function Wd(r,t){return r}function Fi(r,t){return r}function G0(){Vu(Gu),Vu(Xu),F0(Xu,Gu,f0,d0)}G0();new Array(6);function ke(){return[1,0,0,1,0,0]}function z0(r,t){return r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r}function St(r,t){const e=t[0],i=t[1];return t[0]=r[0]*e+r[2]*i+r[4],t[1]=r[1]*e+r[3]*i+r[5],t}function yi(r,t,e,i,n,s,o,a){const l=Math.sin(s),h=Math.cos(s);return r[0]=i*h,r[1]=n*l,r[2]=-i*l,r[3]=n*h,r[4]=o*i*h-a*i*l+t,r[5]=o*n*l+a*n*h+e,r}function Yd(r,t){const e=X0(t);Q(e!==0,"Transformation matrix cannot be inverted");const i=t[0],n=t[1],s=t[2],o=t[3],a=t[4],l=t[5];return r[0]=o/e,r[1]=-n/e,r[2]=-s/e,r[3]=i/e,r[4]=(s*l-o*a)/e,r[5]=-(i*l-n*a)/e,r}function X0(r){return r[0]*r[3]-r[1]*r[2]}const W0=[1e5,1e5,1e5,1e5,2,2];function Y0(r){return"matrix("+r.join(", ")+")"}function Zu(r){return r.substring(7,r.length-1).split(",").map(parseFloat)}function B0(r,t){const e=Zu(r),i=Zu(t);for(let n=0;n<6;++n)if(Math.round((e[n]-i[n])*W0[n])!==0)return!1;return!0}function Xi(r,t,e,i,n,s,o){s=s||[],o=o||2;let a=0;for(let l=t;l<e;l+=i){const h=r[l],u=r[l+1];s[a++]=n[0]*h+n[2]*u+n[4],s[a++]=n[1]*h+n[3]*u+n[5];for(let c=2;c<o;c++)s[a++]=r[l+c]}return s&&s.length!=a&&(s.length=a),s}function Bd(r,t,e,i,n,s,o){o=o||[];const a=Math.cos(n),l=Math.sin(n),h=s[0],u=s[1];let c=0;for(let f=t;f<e;f+=i){const d=r[f]-h,_=r[f+1]-u;o[c++]=h+d*a-_*l,o[c++]=u+d*l+_*a;for(let g=f+2;g<f+i;++g)o[c++]=r[g]}return o&&o.length!=c&&(o.length=c),o}function U0(r,t,e,i,n,s,o,a){a=a||[];const l=o[0],h=o[1];let u=0;for(let c=t;c<e;c+=i){const f=r[c]-l,d=r[c+1]-h;a[u++]=l+n*f,a[u++]=h+s*d;for(let _=c+2;_<c+i;++_)a[u++]=r[_]}return a&&a.length!=u&&(a.length=u),a}function K0(r,t,e,i,n,s,o){o=o||[];let a=0;for(let l=t;l<e;l+=i){o[a++]=r[l]+n,o[a++]=r[l+1]+s;for(let h=l+2;h<l+i;++h)o[a++]=r[h]}return o&&o.length!=a&&(o.length=a),o}const ju=ke(),V0=[NaN,NaN];class Z0 extends ze{constructor(){super(),this.extent_=Ae(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=yd((t,e,i)=>{if(!i)return this.getSimplifiedGeometry(e);const n=this.clone();return n.applyTransform(i),n.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return q()}closestPointXY(t,e,i,n){return q()}containsXY(t,e){return this.closestPointXY(t,e,V0,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return q()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&$o(e),this.extentRevision_=this.getRevision()}return i0(this.extent_,t)}rotate(t,e){q()}scale(t,e,i){q()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return q()}getType(){return q()}applyTransform(t){q()}intersectsExtent(t){return q()}translate(t,e){q()}transform(t,e){const i=ne(t),n=i.getUnits()=="tile-pixels"?function(s,o,a){const l=i.getExtent(),h=i.getWorldExtent(),u=Yt(h)/Yt(l);yi(ju,h[0],h[3],u,-u,0,0,0);const c=Xi(s,0,s.length,a,ju,o),f=Io(i,e);return f?f(c,c,a):c}:Io(i,e);return this.applyTransform(n),this}}class Rh extends Z0{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return _h(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return q()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=Hu(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){q()}setLayout(t,e,i){let n;if(t)n=Hu(t);else{for(let s=0;s<i;++s){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}n=e.length,t=j0(n)}this.layout=t,this.stride=n}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();Bd(i,0,i.length,n,t,e,i),this.changed()}}scale(t,e,i){e===void 0&&(e=t),i||(i=En(this.getExtent()));const n=this.getFlatCoordinates();if(n){const s=this.getStride();U0(n,0,n.length,s,t,e,i,n),this.changed()}}translate(t,e){const i=this.getFlatCoordinates();if(i){const n=this.getStride();K0(i,0,i.length,n,t,e,i),this.changed()}}}function j0(r){let t;return r==2?t="XY":r==3?t="XYZ":r==4&&(t="XYZM"),t}function Hu(r){let t;return r=="XY"?t=2:r=="XYZ"||r=="XYM"?t=3:r=="XYZM"&&(t=4),t}function H0(r,t,e){const i=r.getFlatCoordinates();if(!i)return null;const n=r.getStride();return Xi(i,0,i.length,n,t,e)}function Ud(r,t,e,i){let n=0;const s=r[e-i],o=r[e-i+1];let a=0,l=0;for(;t<e;t+=i){const h=r[t]-s,u=r[t+1]-o;n+=l*h-a*u,a=h,l=u}return n/2}function q0(r,t,e,i){let n=0;for(let s=0,o=e.length;s<o;++s){const a=e[s];n+=Ud(r,t,a,i),t=a}return n}function qu(r,t,e,i,n,s,o){const a=r[t],l=r[t+1],h=r[e]-a,u=r[e+1]-l;let c;if(h===0&&u===0)c=t;else{const f=((n-a)*h+(s-l)*u)/(h*h+u*u);if(f>1)c=e;else if(f>0){for(let d=0;d<i;++d)o[d]=we(r[t+d],r[e+d],f);o.length=i;return}else c=t}for(let f=0;f<i;++f)o[f]=r[c+f];o.length=i}function Kd(r,t,e,i,n){let s=r[t],o=r[t+1];for(t+=i;t<e;t+=i){const a=r[t],l=r[t+1],h=ir(s,o,a,l);h>n&&(n=h),s=a,o=l}return n}function $0(r,t,e,i,n){for(let s=0,o=e.length;s<o;++s){const a=e[s];n=Kd(r,t,a,i,n),t=a}return n}function Vd(r,t,e,i,n,s,o,a,l,h,u){if(t==e)return h;let c,f;if(n===0){if(f=ir(o,a,r[t],r[t+1]),f<h){for(c=0;c<i;++c)l[c]=r[t+c];return l.length=i,f}return h}u=u||[NaN,NaN];let d=t+i;for(;d<e;)if(qu(r,d-i,d,i,o,a,u),f=ir(o,a,u[0],u[1]),f<h){for(h=f,c=0;c<i;++c)l[c]=u[c];l.length=i,d+=i}else d+=i*Math.max((Math.sqrt(f)-Math.sqrt(h))/n|0,1);if(qu(r,e-i,t,i,o,a,u),f=ir(o,a,u[0],u[1]),f<h){for(h=f,c=0;c<i;++c)l[c]=u[c];l.length=i}return h}function J0(r,t,e,i,n,s,o,a,l,h,u){u=u||[NaN,NaN];for(let c=0,f=e.length;c<f;++c){const d=e[c];h=Vd(r,t,d,i,n,s,o,a,l,h,u),t=d}return h}function Q0(r,t,e,i){for(let n=0,s=e.length;n<s;++n)r[t++]=e[n];return t}function Zd(r,t,e,i){for(let n=0,s=e.length;n<s;++n){const o=e[n];for(let a=0;a<i;++a)r[t++]=o[a]}return t}function ty(r,t,e,i,n){n=n||[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=Zd(r,t,e[o],i);n[s++]=l,t=l}return n.length=s,n}function qn(r,t,e,i,n){n=n!==void 0?n:[];let s=0;for(let o=t;o<e;o+=i)n[s++]=r.slice(o,o+i);return n.length=s,n}function bo(r,t,e,i,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];n[s++]=qn(r,t,l,i,n[s]),t=l}return n.length=s,n}function $u(r,t,e,i,n){n=n!==void 0?n:[];let s=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];n[s++]=l.length===1&&l[0]===t?[]:bo(r,t,l,i,n[s]),t=l[l.length-1]}return n.length=s,n}function Sh(r,t,e,i,n,s,o){const a=(e-t)/i;if(a<3){for(;t<e;t+=i)s[o++]=r[t],s[o++]=r[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[t,e-i];let u=0;for(;h.length>0;){const c=h.pop(),f=h.pop();let d=0;const _=r[f],g=r[f+1],m=r[c],p=r[c+1];for(let y=f+i;y<c;y+=i){const E=r[y],v=r[y+1],x=qp(E,v,_,g,m,p);x>d&&(u=y,d=x)}d>n&&(l[(u-t)/i]=1,f+i<u&&h.push(f,u),u+i<c&&h.push(u,c))}for(let c=0;c<a;++c)l[c]&&(s[o++]=r[t+c*i],s[o++]=r[t+c*i+1]);return o}function ey(r,t,e,i,n,s,o,a){for(let l=0,h=e.length;l<h;++l){const u=e[l];o=Sh(r,t,u,i,n,s,o),a.push(o),t=u}return o}function sn(r,t){return t*Math.round(r/t)}function iy(r,t,e,i,n,s,o){if(t==e)return o;let a=sn(r[t],n),l=sn(r[t+1],n);t+=i,s[o++]=a,s[o++]=l;let h,u;do if(h=sn(r[t],n),u=sn(r[t+1],n),t+=i,t==e)return s[o++]=h,s[o++]=u,o;while(h==a&&u==l);for(;t<e;){const c=sn(r[t],n),f=sn(r[t+1],n);if(t+=i,c==h&&f==u)continue;const d=h-a,_=u-l,g=c-a,m=f-l;if(d*m==_*g&&(d<0&&g<d||d==g||d>0&&g>d)&&(_<0&&m<_||_==m||_>0&&m>_)){h=c,u=f;continue}s[o++]=h,s[o++]=u,a=h,l=u,h=c,u=f}return s[o++]=h,s[o++]=u,o}function jd(r,t,e,i,n,s,o,a){for(let l=0,h=e.length;l<h;++l){const u=e[l];o=iy(r,t,u,i,n,s,o),a.push(o),t=u}return o}class _s extends Rh{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new _s(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,i,n){return n<Td(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Kd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Vd(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,i,n))}getArea(){return Ud(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return qn(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=Sh(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new _s(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Zd(this.flatCoordinates,0,t,this.stride),this.changed()}}class ra extends Rh{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new ra(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,n){const s=this.flatCoordinates,o=ir(t,e,s[0],s[1]);if(o<n){const a=this.stride;for(let l=0;l<a;++l)i[l]=s[l];return i.length=a,o}return n}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return Sd(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Rd(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Q0(this.flatCoordinates,0,t,this.stride),this.changed()}}function ny(r,t,e,i,n){return!bd(n,function(o){return!ln(r,t,e,i,o[0],o[1])})}function ln(r,t,e,i,n,s){let o=0,a=r[e-i],l=r[e-i+1];for(;t<e;t+=i){const h=r[t],u=r[t+1];l<=s?u>s&&(h-a)*(s-l)-(n-a)*(u-l)>0&&o++:u<=s&&(h-a)*(s-l)-(n-a)*(u-l)<0&&o--,a=h,l=u}return o!==0}function Hd(r,t,e,i,n,s){if(e.length===0||!ln(r,t,e[0],i,n,s))return!1;for(let o=1,a=e.length;o<a;++o)if(ln(r,e[o-1],e[o],i,n,s))return!1;return!0}function Ih(r,t,e,i,n,s,o){let a,l,h,u,c,f,d;const _=n[s+1],g=[];for(let y=0,E=e.length;y<E;++y){const v=e[y];for(u=r[v-i],f=r[v-i+1],a=t;a<v;a+=i)c=r[a],d=r[a+1],(_<=f&&d<=_||f<=_&&_<=d)&&(h=(_-f)/(d-f)*(c-u)+u,g.push(h)),u=c,f=d}let m=NaN,p=-1/0;for(g.sort(di),u=g[0],a=1,l=g.length;a<l;++a){c=g[a];const y=Math.abs(c-u);y>p&&(h=(u+c)/2,Hd(r,t,e,i,h,_)&&(m=h,p=y)),u=c}return isNaN(m)&&(m=n[s]),o?(o.push(m,_,p),o):[m,_,p]}function ry(r,t,e,i,n){let s=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];s=Ih(r,t,l,i,n,2*o,s),t=l[l.length-1]}return s}function sy(r,t,e,i,n){let s;for(t+=i;t<e;t+=i)if(s=n(r.slice(t-i,t),r.slice(t,t+i)),s)return s;return!1}function qd(r,t,e,i,n,s){return s=s??Id(Ae(),r,t,e,i),Ht(n,s)?s[0]>=n[0]&&s[2]<=n[2]||s[1]>=n[1]&&s[3]<=n[3]?!0:sy(r,t,e,i,function(o,a){return n0(n,o,a)}):!1}function $d(r,t,e,i,n){return!!(qd(r,t,e,i,n)||ln(r,t,e,i,n[0],n[1])||ln(r,t,e,i,n[0],n[3])||ln(r,t,e,i,n[2],n[1])||ln(r,t,e,i,n[2],n[3]))}function oy(r,t,e,i,n){if(!$d(r,t,e[0],i,n))return!1;if(e.length===1)return!0;for(let s=1,o=e.length;s<o;++s)if(ny(r,e[s-1],e[s],i,n)&&!qd(r,e[s-1],e[s],i,n))return!1;return!0}function ay(r,t,e,i){for(;t<e-i;){for(let n=0;n<i;++n){const s=r[t+n];r[t+n]=r[e-i+n],r[e-i+n]=s}t+=i,e-=i}}function bh(r,t,e,i){let n=0,s=r[e-i],o=r[e-i+1];for(;t<e;t+=i){const a=r[t],l=r[t+1];n+=(a-s)*(l+o),s=a,o=l}return n===0?void 0:n>0}function ly(r,t,e,i,n){n=n!==void 0?n:!1;for(let s=0,o=e.length;s<o;++s){const a=e[s],l=bh(r,t,a,i);if(s===0){if(n&&l||!n&&!l)return!1}else if(n&&!l||!n&&l)return!1;t=a}return!0}function Ju(r,t,e,i,n){n=n!==void 0?n:!1;for(let s=0,o=e.length;s<o;++s){const a=e[s],l=bh(r,t,a,i);(s===0?n&&l||!n&&!l:n&&!l||!n&&l)&&ay(r,t,a,i),t=a}return t}function hy(r,t){const e=[];let i=0,n=0,s;for(let o=0,a=t.length;o<a;++o){const l=t[o],h=bh(r,i,l,2);if(s===void 0&&(s=h),h===s)e.push(t.slice(n,o+1));else{if(e.length===0)continue;e[e.length-1].push(t[n])}n=o+1,i=l}return e}class ms extends Rh{constructor(t,e,i){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&i?(this.setFlatCoordinates(e,t),this.ends_=i):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?dh(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ms(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,n){return n<Td(this.getExtent(),t,e)?n:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($0(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),J0(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,i,n))}containsXY(t,e){return Hd(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return q0(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Ju(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,bo(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=En(this.getExtent());this.flatInteriorPoint_=Ih(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new ra(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new _s(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,i=this.ends_,n=[];let s=0;for(let o=0,a=i.length;o<a;++o){const l=i[o],h=new _s(e.slice(s,l),t);n.push(h),s=l}return n}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;ly(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Ju(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],i=[];return e.length=jd(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,i),new ms(e,"XY",i)}getType(){return"Polygon"}intersectsExtent(t){return oy(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const i=ty(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=i.length===0?0:i[i.length-1],this.changed()}}function Qu(r){if(ea(r))throw new Error("Cannot create polygon from empty extent");const t=r[0],e=r[1],i=r[2],n=r[3],s=[t,e,t,n,i,n,i,e,t,e];return new ms(s,"XY",[s.length])}function Mh(r,t,e,i){const n=it(t)/e[0],s=Yt(t)/e[1];return i?Math.min(r,Math.max(n,s)):Math.min(r,Math.min(n,s))}function Ah(r,t,e){let i=Math.min(r,t);const n=50;return i*=Math.log(1+n*Math.max(0,r/t-1))/n+1,e&&(i=Math.max(i,e),i/=Math.log(1+n*Math.max(0,e/r-1))/n+1),ft(i,e/2,t*2)}function uy(r,t,e,i){return t=t!==void 0?t:!0,function(n,s,o,a){if(n!==void 0){const l=r[0],h=r[r.length-1],u=e?Mh(l,e,o,i):l;if(a)return t?Ah(n,u,h):ft(n,h,u);const c=Math.min(u,n),f=Math.floor(fh(r,c,s));return r[f]>u&&f<r.length-1?r[f+1]:r[f]}}}function cy(r,t,e,i,n,s){return i=i!==void 0?i:!0,e=e!==void 0?e:0,function(o,a,l,h){if(o!==void 0){const u=n?Mh(t,n,l,s):t;if(h)return i?Ah(o,u,e):ft(o,e,u);const c=1e-9,f=Math.ceil(Math.log(t/u)/Math.log(r)-c),d=-a*(.5-c)+.5,_=Math.min(u,o),g=Math.floor(Math.log(t/_)/Math.log(r)+d),m=Math.max(f,g),p=t/Math.pow(r,m);return ft(p,e,u)}}}function tc(r,t,e,i,n){return e=e!==void 0?e:!0,function(s,o,a,l){if(s!==void 0){const h=i?Mh(r,i,a,n):r;return!e||!l?ft(s,t,h):Ah(s,h,t)}}}function Ph(r){if(r!==void 0)return 0}function ec(r){if(r!==void 0)return r}function fy(r){const t=2*Math.PI/r;return function(e,i){if(i)return e;if(e!==void 0)return e=Math.floor(e/t+.5)*t,e}}function dy(r){const t=zi(5);return function(e,i){return i||e===void 0?e:Math.abs(e)<=t?0:e}}const gy=42,Lh=256,Da=0;class Ve extends ze{constructor(t){super(),this.on,this.once,this.un,t=Object.assign({},t),this.hints_=[0,0],this.animations_=[],this.updateAnimationKey_,this.projection_=wh(t.projection,"EPSG:3857"),this.viewportSize_=[100,100],this.targetCenter_=null,this.targetResolution_,this.targetRotation_,this.nextCenter_=null,this.nextResolution_,this.nextRotation_,this.cancelAnchor_=void 0,t.projection&&Xd(),t.center&&(t.center=oi(t.center,this.projection_)),t.extent&&(t.extent=Fi(t.extent,this.projection_)),this.applyOptions_(t)}applyOptions_(t){const e=Object.assign({},t);for(const a in Oe)delete e[a];this.setProperties(e,!0);const i=my(t);this.maxResolution_=i.maxResolution,this.minResolution_=i.minResolution,this.zoomFactor_=i.zoomFactor,this.resolutions_=t.resolutions,this.padding_=t.padding,this.minZoom_=i.minZoom;const n=_y(t),s=i.constraint,o=py(t);this.constraints_={center:n,resolution:s,rotation:o},this.setRotation(t.rotation!==void 0?t.rotation:0),this.setCenterInternal(t.center!==void 0?t.center:null),t.resolution!==void 0?this.setResolution(t.resolution):t.zoom!==void 0&&this.setZoom(t.zoom)}get padding(){return this.padding_}set padding(t){let e=this.padding_;this.padding_=t;const i=this.getCenterInternal();if(i){const n=t||[0,0,0,0];e=e||[0,0,0,0];const s=this.getResolution(),o=s/2*(n[3]-e[3]+e[1]-n[1]),a=s/2*(n[0]-e[0]+e[2]-n[2]);this.setCenterInternal([i[0]+o,i[1]-a])}}getUpdatedOptions_(t){const e=this.getProperties();return e.resolution!==void 0?e.resolution=this.getResolution():e.zoom=this.getZoom(),e.center=this.getCenterInternal(),e.rotation=this.getRotation(),Object.assign({},e,t)}animate(t){this.isDef()&&!this.getAnimating()&&this.resolveConstraints(0);const e=new Array(arguments.length);for(let i=0;i<e.length;++i){let n=arguments[i];n.center&&(n=Object.assign({},n),n.center=oi(n.center,this.getProjection())),n.anchor&&(n=Object.assign({},n),n.anchor=oi(n.anchor,this.getProjection())),e[i]=n}this.animateInternal.apply(this,e)}animateInternal(t){let e=arguments.length,i;e>1&&typeof arguments[e-1]=="function"&&(i=arguments[e-1],--e);let n=0;for(;n<e&&!this.isDef();++n){const u=arguments[n];u.center&&this.setCenterInternal(u.center),u.zoom!==void 0?this.setZoom(u.zoom):u.resolution&&this.setResolution(u.resolution),u.rotation!==void 0&&this.setRotation(u.rotation)}if(n===e){i&&Bs(i,!0);return}let s=Date.now(),o=this.targetCenter_.slice(),a=this.targetResolution_,l=this.targetRotation_;const h=[];for(;n<e;++n){const u=arguments[n],c={start:s,complete:!1,anchor:u.anchor,duration:u.duration!==void 0?u.duration:1e3,easing:u.easing||a0,callback:i};if(u.center&&(c.sourceCenter=o,c.targetCenter=u.center.slice(),o=c.targetCenter),u.zoom!==void 0?(c.sourceResolution=a,c.targetResolution=this.getResolutionForZoom(u.zoom),a=c.targetResolution):u.resolution&&(c.sourceResolution=a,c.targetResolution=u.resolution,a=c.targetResolution),u.rotation!==void 0){c.sourceRotation=l;const f=nr(u.rotation-l+Math.PI,2*Math.PI)-Math.PI;c.targetRotation=l+f,l=c.targetRotation}yy(c)?c.complete=!0:s+=c.duration,h.push(c)}this.animations_.push(h),this.setHint(Dt.ANIMATING,1),this.updateAnimations_()}getAnimating(){return this.hints_[Dt.ANIMATING]>0}getInteracting(){return this.hints_[Dt.INTERACTING]>0}cancelAnimations(){this.setHint(Dt.ANIMATING,-this.hints_[Dt.ANIMATING]);let t;for(let e=0,i=this.animations_.length;e<i;++e){const n=this.animations_[e];if(n[0].callback&&Bs(n[0].callback,!1),!t)for(let s=0,o=n.length;s<o;++s){const a=n[s];if(!a.complete){t=a.anchor;break}}}this.animations_.length=0,this.cancelAnchor_=t,this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN}updateAnimations_(){if(this.updateAnimationKey_!==void 0&&(cancelAnimationFrame(this.updateAnimationKey_),this.updateAnimationKey_=void 0),!this.getAnimating())return;const t=Date.now();let e=!1;for(let i=this.animations_.length-1;i>=0;--i){const n=this.animations_[i];let s=!0;for(let o=0,a=n.length;o<a;++o){const l=n[o];if(l.complete)continue;const h=t-l.start;let u=l.duration>0?h/l.duration:1;u>=1?(l.complete=!0,u=1):s=!1;const c=l.easing(u);if(l.sourceCenter){const f=l.sourceCenter[0],d=l.sourceCenter[1],_=l.targetCenter[0],g=l.targetCenter[1];this.nextCenter_=l.targetCenter;const m=f+c*(_-f),p=d+c*(g-d);this.targetCenter_=[m,p]}if(l.sourceResolution&&l.targetResolution){const f=c===1?l.targetResolution:l.sourceResolution+c*(l.targetResolution-l.sourceResolution);if(l.anchor){const d=this.getViewportSize_(this.getRotation()),_=this.constraints_.resolution(f,0,d,!0);this.targetCenter_=this.calculateCenterZoom(_,l.anchor)}this.nextResolution_=l.targetResolution,this.targetResolution_=f,this.applyTargetState_(!0)}if(l.sourceRotation!==void 0&&l.targetRotation!==void 0){const f=c===1?nr(l.targetRotation+Math.PI,2*Math.PI)-Math.PI:l.sourceRotation+c*(l.targetRotation-l.sourceRotation);if(l.anchor){const d=this.constraints_.rotation(f,!0);this.targetCenter_=this.calculateCenterRotate(d,l.anchor)}this.nextRotation_=l.targetRotation,this.targetRotation_=f}if(this.applyTargetState_(!0),e=!0,!l.complete)break}if(s){this.animations_[i]=null,this.setHint(Dt.ANIMATING,-1),this.nextCenter_=null,this.nextResolution_=NaN,this.nextRotation_=NaN;const o=n[0].callback;o&&Bs(o,!0)}}this.animations_=this.animations_.filter(Boolean),e&&this.updateAnimationKey_===void 0&&(this.updateAnimationKey_=requestAnimationFrame(this.updateAnimations_.bind(this)))}calculateCenterRotate(t,e){let i;const n=this.getCenterInternal();return n!==void 0&&(i=[n[0]-e[0],n[1]-e[1]],mh(i,t-this.getRotation()),r0(i,e)),i}calculateCenterZoom(t,e){let i;const n=this.getCenterInternal(),s=this.getResolution();if(n!==void 0&&s!==void 0){const o=e[0]-t*(e[0]-n[0])/s,a=e[1]-t*(e[1]-n[1])/s;i=[o,a]}return i}getViewportSize_(t){const e=this.viewportSize_;if(t){const i=e[0],n=e[1];return[Math.abs(i*Math.cos(t))+Math.abs(n*Math.sin(t)),Math.abs(i*Math.sin(t))+Math.abs(n*Math.cos(t))]}return e}setViewportSize(t){this.viewportSize_=Array.isArray(t)?t.slice():[100,100],this.getAnimating()||this.resolveConstraints(0)}getCenter(){const t=this.getCenterInternal();return t&&Pl(t,this.getProjection())}getCenterInternal(){return this.get(Oe.CENTER)}getConstraints(){return this.constraints_}getConstrainResolution(){return this.get("constrainResolution")}getHints(t){return t!==void 0?(t[0]=this.hints_[0],t[1]=this.hints_[1],t):this.hints_.slice()}calculateExtent(t){const e=this.calculateExtentInternal(t);return Wd(e,this.getProjection())}calculateExtentInternal(t){t=t||this.getViewportSizeMinusPadding_();const e=this.getCenterInternal();Q(e,"The view center is not defined");const i=this.getResolution();Q(i!==void 0,"The view resolution is not defined");const n=this.getRotation();return Q(n!==void 0,"The view rotation is not defined"),Il(e,i,n,t)}getMaxResolution(){return this.maxResolution_}getMinResolution(){return this.minResolution_}getMaxZoom(){return this.getZoomForResolution(this.minResolution_)}setMaxZoom(t){this.applyOptions_(this.getUpdatedOptions_({maxZoom:t}))}getMinZoom(){return this.getZoomForResolution(this.maxResolution_)}setMinZoom(t){this.applyOptions_(this.getUpdatedOptions_({minZoom:t}))}setConstrainResolution(t){this.applyOptions_(this.getUpdatedOptions_({constrainResolution:t}))}getProjection(){return this.projection_}getResolution(){return this.get(Oe.RESOLUTION)}getResolutions(){return this.resolutions_}getResolutionForExtent(t,e){return this.getResolutionForExtentInternal(Fi(t,this.getProjection()),e)}getResolutionForExtentInternal(t,e){e=e||this.getViewportSizeMinusPadding_();const i=it(t)/e[0],n=Yt(t)/e[1];return Math.max(i,n)}getResolutionForValueFunction(t){t=t||2;const e=this.getConstrainedResolution(this.maxResolution_),i=this.minResolution_,n=Math.log(e/i)/Math.log(t);return function(s){return e/Math.pow(t,s*n)}}getRotation(){return this.get(Oe.ROTATION)}getValueForResolutionFunction(t){const e=Math.log(t||2),i=this.getConstrainedResolution(this.maxResolution_),n=this.minResolution_,s=Math.log(i/n)/e;return function(o){return Math.log(i/o)/e/s}}getViewportSizeMinusPadding_(t){let e=this.getViewportSize_(t);const i=this.padding_;return i&&(e=[e[0]-i[1]-i[3],e[1]-i[0]-i[2]]),e}getState(){const t=this.getProjection(),e=this.getResolution(),i=this.getRotation();let n=this.getCenterInternal();const s=this.padding_;if(s){const o=this.getViewportSizeMinusPadding_();n=Fa(n,this.getViewportSize_(),[o[0]/2+s[3],o[1]/2+s[0]],e,i)}return{center:n.slice(0),projection:t!==void 0?t:null,resolution:e,nextCenter:this.nextCenter_,nextResolution:this.nextResolution_,nextRotation:this.nextRotation_,rotation:i,zoom:this.getZoom()}}getViewStateAndExtent(){return{viewState:this.getState(),extent:this.calculateExtent()}}getZoom(){let t;const e=this.getResolution();return e!==void 0&&(t=this.getZoomForResolution(e)),t}getZoomForResolution(t){let e=this.minZoom_||0,i,n;if(this.resolutions_){const s=fh(this.resolutions_,t,1);e=s,i=this.resolutions_[s],s==this.resolutions_.length-1?n=2:n=i/this.resolutions_[s+1]}else i=this.maxResolution_,n=this.zoomFactor_;return e+Math.log(i/t)/Math.log(n)}getResolutionForZoom(t){var e;if((e=this.resolutions_)!=null&&e.length){if(this.resolutions_.length===1)return this.resolutions_[0];const i=ft(Math.floor(t),0,this.resolutions_.length-2),n=this.resolutions_[i]/this.resolutions_[i+1];return this.resolutions_[i]/Math.pow(n,ft(t-i,0,1))}return this.maxResolution_/Math.pow(this.zoomFactor_,t-this.minZoom_)}fit(t,e){let i;if(Q(Array.isArray(t)||typeof t.getSimplifiedGeometry=="function","Invalid extent or geometry provided as `geometry`"),Array.isArray(t)){Q(!ea(t),"Cannot fit empty extent provided as `geometry`");const n=Fi(t,this.getProjection());i=Qu(n)}else if(t.getType()==="Circle"){const n=Fi(t.getExtent(),this.getProjection());i=Qu(n),i.rotate(this.getRotation(),En(n))}else i=t;this.fitInternal(i,e)}rotatedExtentForGeometry(t){const e=this.getRotation(),i=Math.cos(e),n=Math.sin(-e),s=t.getFlatCoordinates(),o=t.getStride();let a=1/0,l=1/0,h=-1/0,u=-1/0;for(let c=0,f=s.length;c<f;c+=o){const d=s[c]*i-s[c+1]*n,_=s[c]*n+s[c+1]*i;a=Math.min(a,d),l=Math.min(l,_),h=Math.max(h,d),u=Math.max(u,_)}return[a,l,h,u]}fitInternal(t,e){e=e||{};let i=e.size;i||(i=this.getViewportSizeMinusPadding_());const n=e.padding!==void 0?e.padding:[0,0,0,0],s=e.nearest!==void 0?e.nearest:!1;let o;e.minResolution!==void 0?o=e.minResolution:e.maxZoom!==void 0?o=this.getResolutionForZoom(e.maxZoom):o=0;const a=this.rotatedExtentForGeometry(t);let l=this.getResolutionForExtentInternal(a,[i[0]-n[1]-n[3],i[1]-n[0]-n[2]]);l=isNaN(l)?o:Math.max(l,o),l=this.getConstrainedResolution(l,s?0:1);const h=this.getRotation(),u=Math.sin(h),c=Math.cos(h),f=En(a);f[0]+=(n[1]-n[3])/2*l,f[1]+=(n[0]-n[2])/2*l;const d=f[0]*c-f[1]*u,_=f[1]*c+f[0]*u,g=this.getConstrainedCenter([d,_],l),m=e.callback?e.callback:fs;e.duration!==void 0?this.animateInternal({resolution:l,center:g,duration:e.duration,easing:e.easing},m):(this.targetResolution_=l,this.targetCenter_=g,this.applyTargetState_(!1,!0),Bs(m,!0))}centerOn(t,e,i){this.centerOnInternal(oi(t,this.getProjection()),e,i)}centerOnInternal(t,e,i){this.setCenterInternal(Fa(t,e,i,this.getResolution(),this.getRotation()))}calculateCenterShift(t,e,i,n){let s;const o=this.padding_;if(o&&t){const a=this.getViewportSizeMinusPadding_(-i),l=Fa(t,n,[a[0]/2+o[3],a[1]/2+o[0]],e,i);s=[t[0]-l[0],t[1]-l[1]]}return s}isDef(){return!!this.getCenterInternal()&&this.getResolution()!==void 0}adjustCenter(t){const e=Pl(this.targetCenter_,this.getProjection());this.setCenter([e[0]+t[0],e[1]+t[1]])}adjustCenterInternal(t){const e=this.targetCenter_;this.setCenterInternal([e[0]+t[0],e[1]+t[1]])}adjustResolution(t,e){e=e&&oi(e,this.getProjection()),this.adjustResolutionInternal(t,e)}adjustResolutionInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.getViewportSize_(this.getRotation()),s=this.constraints_.resolution(this.targetResolution_*t,0,n,i);e&&(this.targetCenter_=this.calculateCenterZoom(s,e)),this.targetResolution_*=t,this.applyTargetState_()}adjustZoom(t,e){this.adjustResolution(Math.pow(this.zoomFactor_,-t),e)}adjustRotation(t,e){e&&(e=oi(e,this.getProjection())),this.adjustRotationInternal(t,e)}adjustRotationInternal(t,e){const i=this.getAnimating()||this.getInteracting(),n=this.constraints_.rotation(this.targetRotation_+t,i);e&&(this.targetCenter_=this.calculateCenterRotate(n,e)),this.targetRotation_+=t,this.applyTargetState_()}setCenter(t){this.setCenterInternal(t&&oi(t,this.getProjection()))}setCenterInternal(t){this.targetCenter_=t,this.applyTargetState_()}setHint(t,e){return this.hints_[t]+=e,this.changed(),this.hints_[t]}setResolution(t){this.targetResolution_=t,this.applyTargetState_()}setRotation(t){this.targetRotation_=t,this.applyTargetState_()}setZoom(t){this.setResolution(this.getResolutionForZoom(t))}applyTargetState_(t,e){const i=this.getAnimating()||this.getInteracting()||e,n=this.constraints_.rotation(this.targetRotation_,i),s=this.getViewportSize_(n),o=this.constraints_.resolution(this.targetResolution_,0,s,i),a=this.constraints_.center(this.targetCenter_,o,s,i,this.calculateCenterShift(this.targetCenter_,o,n,s));this.get(Oe.ROTATION)!==n&&this.set(Oe.ROTATION,n),this.get(Oe.RESOLUTION)!==o&&(this.set(Oe.RESOLUTION,o),this.set("zoom",this.getZoom(),!0)),(!a||!this.get(Oe.CENTER)||!To(this.get(Oe.CENTER),a))&&this.set(Oe.CENTER,a),this.getAnimating()&&!t&&this.cancelAnimations(),this.cancelAnchor_=void 0}resolveConstraints(t,e,i){t=t!==void 0?t:200;const n=e||0,s=this.constraints_.rotation(this.targetRotation_),o=this.getViewportSize_(s),a=this.constraints_.resolution(this.targetResolution_,n,o),l=this.constraints_.center(this.targetCenter_,a,o,!1,this.calculateCenterShift(this.targetCenter_,a,s,o));if(t===0&&!this.cancelAnchor_){this.targetResolution_=a,this.targetRotation_=s,this.targetCenter_=l,this.applyTargetState_();return}i=i||(t===0?this.cancelAnchor_:void 0),this.cancelAnchor_=void 0,(this.getResolution()!==a||this.getRotation()!==s||!this.getCenterInternal()||!To(this.getCenterInternal(),l))&&(this.getAnimating()&&this.cancelAnimations(),this.animateInternal({rotation:s,center:l,resolution:a,duration:t,easing:Ir,anchor:i}))}beginInteraction(){this.resolveConstraints(0),this.setHint(Dt.INTERACTING,1)}endInteraction(t,e,i){i=i&&oi(i,this.getProjection()),this.endInteractionInternal(t,e,i)}endInteractionInternal(t,e,i){this.getInteracting()&&(this.setHint(Dt.INTERACTING,-1),this.resolveConstraints(t,e,i))}getConstrainedCenter(t,e){const i=this.getViewportSize_(this.getRotation());return this.constraints_.center(t,e||this.getResolution(),i)}getConstrainedZoom(t,e){const i=this.getResolutionForZoom(t);return this.getZoomForResolution(this.getConstrainedResolution(i,e))}getConstrainedResolution(t,e){e=e||0;const i=this.getViewportSize_(this.getRotation());return this.constraints_.resolution(t,e,i)}}function Bs(r,t){setTimeout(function(){r(t)},0)}function _y(r){if(r.extent!==void 0){const e=r.smoothExtentConstraint!==void 0?r.smoothExtentConstraint:!0;return Fu(r.extent,r.constrainOnlyCenter,e)}const t=wh(r.projection,"EPSG:3857");if(r.multiWorld!==!0&&t.isGlobal()){const e=t.getExtent().slice();return e[0]=-1/0,e[2]=1/0,Fu(e,!1,!1)}return Jp}function my(r){let t,e,i,o=r.minZoom!==void 0?r.minZoom:Da,a=r.maxZoom!==void 0?r.maxZoom:28;const l=r.zoomFactor!==void 0?r.zoomFactor:2,h=r.multiWorld!==void 0?r.multiWorld:!1,u=r.smoothResolutionConstraint!==void 0?r.smoothResolutionConstraint:!0,c=r.showFullExtent!==void 0?r.showFullExtent:!1,f=wh(r.projection,"EPSG:3857"),d=f.getExtent();let _=r.constrainOnlyCenter,g=r.extent;if(!h&&!g&&f.isGlobal()&&(_=!1,g=d),r.resolutions!==void 0){const m=r.resolutions;e=m[o],i=m[a]!==void 0?m[a]:m[m.length-1],r.constrainResolution?t=uy(m,u,!_&&g,c):t=tc(e,i,u,!_&&g,c)}else{const p=(d?Math.max(it(d),Yt(d)):360*ph.degrees/f.getMetersPerUnit())/Lh/Math.pow(2,Da),y=p/Math.pow(2,28-Da);e=r.maxResolution,e!==void 0?o=0:e=p/Math.pow(l,o),i=r.minResolution,i===void 0&&(r.maxZoom!==void 0?r.maxResolution!==void 0?i=e/Math.pow(l,a):i=p/Math.pow(l,a):i=y),a=o+Math.floor(Math.log(e/i)/Math.log(l)),i=e/Math.pow(l,a-o),r.constrainResolution?t=cy(l,e,i,u,!_&&g,c):t=tc(e,i,u,!_&&g,c)}return{constraint:t,maxResolution:e,minResolution:i,minZoom:o,zoomFactor:l}}function py(r){if(r.enableRotation!==void 0?r.enableRotation:!0){const e=r.constrainRotation;return e===void 0||e===!0?dy():e===!1?ec:typeof e=="number"?fy(e):ec}return Ph}function yy(r){return!(r.sourceCenter&&r.targetCenter&&!To(r.sourceCenter,r.targetCenter)||r.sourceResolution!==r.targetResolution||r.sourceRotation!==r.targetRotation)}function Fa(r,t,e,i,n){const s=Math.cos(-n);let o=Math.sin(-n),a=r[0]*s-r[1]*o,l=r[1]*s+r[0]*o;a+=(t[0]/2-e[0])*i,l+=(e[1]-t[1]/2)*i,o=-o;const h=a*s-l*o,u=l*s+a*o;return[h,u]}const Us="ol-hidden",xy="ol-selectable",sa="ol-unselectable",Oh="ol-control",ic="ol-collapsed",vy=new RegExp(["^\\s*(?=(?:(?:[-a-z]+\\s*){0,2}(italic|oblique))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(small-caps))?)","(?=(?:(?:[-a-z]+\\s*){0,2}(bold(?:er)?|lighter|[1-9]00 ))?)","(?:(?:normal|\\1|\\2|\\3)\\s*){0,3}((?:xx?-)?","(?:small|large)|medium|smaller|larger|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx]))","(?:\\s*\\/\\s*(normal|[\\.\\d]+(?:\\%|in|[cem]m|ex|p[ctx])?))",`?\\s*([-,\\"\\'\\sa-z0-9]+?)\\s*$`].join(""),"i"),nc=["style","variant","weight","size","lineHeight","family"],Jd=function(r){const t=r.match(vy);if(!t)return null;const e={lineHeight:"normal",size:"1.2em",style:"normal",weight:"normal",variant:"normal"};for(let i=0,n=nc.length;i<n;++i){const s=t[i+1];s!==void 0&&(e[nc[i]]=s)}return e.families=e.family.split(/,\s?/),e};function Ct(r,t,e,i){let n;return e&&e.length?n=e.shift():vd?n=new OffscreenCanvas(r||300,t||300):n=document.createElement("canvas"),r&&(n.width=r),t&&(n.height=t),n.getContext("2d",i)}let ka;function Mo(){return ka||(ka=Ct(1,1)),ka}function oa(r){const t=r.canvas;t.width=1,t.height=1,r.clearRect(0,0,1,1)}function Ey(r){let t=r.offsetWidth;const e=getComputedStyle(r);return t+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10),t}function wy(r){let t=r.offsetHeight;const e=getComputedStyle(r);return t+=parseInt(e.marginTop,10)+parseInt(e.marginBottom,10),t}function rc(r,t){const e=t.parentNode;e&&e.replaceChild(r,t)}function Qd(r){for(;r.lastChild;)r.lastChild.remove()}function Cy(r,t){const e=r.childNodes;for(let i=0;;++i){const n=e[i],s=t[i];if(!n&&!s)break;if(n!==s){if(!n){r.appendChild(s);continue}if(!s){r.removeChild(n),--i;continue}r.insertBefore(s,n)}}}class Dh extends ze{constructor(t){super();const e=t.element;e&&!t.target&&!e.style.pointerEvents&&(e.style.pointerEvents="auto"),this.element=e||null,this.target_=null,this.map_=null,this.listenerKeys=[],t.render&&(this.render=t.render),t.target&&this.setTarget(t.target)}disposeInternal(){var t;(t=this.element)==null||t.remove(),super.disposeInternal()}getMap(){return this.map_}setMap(t){var e;this.map_&&((e=this.element)==null||e.remove());for(let i=0,n=this.listenerKeys.length;i<n;++i)lt(this.listenerKeys[i]);if(this.listenerKeys.length=0,this.map_=t,t){const i=this.target_??t.getOverlayContainerStopEvent();this.element&&i.appendChild(this.element),this.render!==fs&&this.listenerKeys.push(H(t,hi.POSTRENDER,this.render,this)),t.render()}}render(t){}setTarget(t){this.target_=typeof t=="string"?document.getElementById(t):t}}class Ty extends Dh{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target}),this.ulElement_=document.createElement("ul"),this.collapsed_=t.collapsed!==void 0?t.collapsed:!0,this.userCollapsed_=this.collapsed_,this.overrideCollapsible_=t.collapsible!==void 0,this.collapsible_=t.collapsible!==void 0?t.collapsible:!0,this.collapsible_||(this.collapsed_=!1),this.attributions_=t.attributions;const e=t.className!==void 0?t.className:"ol-attribution",i=t.tipLabel!==void 0?t.tipLabel:"Attributions",n=t.expandClassName!==void 0?t.expandClassName:e+"-expand",s=t.collapseLabel!==void 0?t.collapseLabel:"",o=t.collapseClassName!==void 0?t.collapseClassName:e+"-collapse";typeof s=="string"?(this.collapseLabel_=document.createElement("span"),this.collapseLabel_.textContent=s,this.collapseLabel_.className=o):this.collapseLabel_=s;const a=t.label!==void 0?t.label:"i";typeof a=="string"?(this.label_=document.createElement("span"),this.label_.textContent=a,this.label_.className=n):this.label_=a;const l=this.collapsible_&&!this.collapsed_?this.collapseLabel_:this.label_;this.toggleButton_=document.createElement("button"),this.toggleButton_.setAttribute("type","button"),this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_)),this.toggleButton_.title=i,this.toggleButton_.appendChild(l),this.toggleButton_.addEventListener(W.CLICK,this.handleClick_.bind(this),!1);const h=e+" "+sa+" "+Oh+(this.collapsed_&&this.collapsible_?" "+ic:"")+(this.collapsible_?"":" ol-uncollapsible"),u=this.element;u.className=h,u.appendChild(this.toggleButton_),u.appendChild(this.ulElement_),this.renderedAttributions_=[],this.renderedVisible_=!0}collectSourceAttributions_(t){const e=this.getMap().getAllLayers(),i=new Set(e.flatMap(n=>n.getAttributions(t)));if(this.attributions_!==void 0&&(Array.isArray(this.attributions_)?this.attributions_.forEach(n=>i.add(n)):i.add(this.attributions_)),!this.overrideCollapsible_){const n=!e.some(s=>{var o;return((o=s.getSource())==null?void 0:o.getAttributionsCollapsible())===!1});this.setCollapsible(n)}return Array.from(i)}async updateElement_(t){if(!t){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}const e=await Promise.all(this.collectSourceAttributions_(t).map(n=>Xp(()=>n))),i=e.length>0;if(this.renderedVisible_!=i&&(this.element.style.display=i?"":"none",this.renderedVisible_=i),!Hi(e,this.renderedAttributions_)){Qd(this.ulElement_);for(let n=0,s=e.length;n<s;++n){const o=document.createElement("li");o.innerHTML=e[n],this.ulElement_.appendChild(o)}this.renderedAttributions_=e}}handleClick_(t){t.preventDefault(),this.handleToggle_(),this.userCollapsed_=this.collapsed_}handleToggle_(){this.element.classList.toggle(ic),this.collapsed_?rc(this.collapseLabel_,this.label_):rc(this.label_,this.collapseLabel_),this.collapsed_=!this.collapsed_,this.toggleButton_.setAttribute("aria-expanded",String(!this.collapsed_))}getCollapsible(){return this.collapsible_}setCollapsible(t){this.collapsible_!==t&&(this.collapsible_=t,this.element.classList.toggle("ol-uncollapsible"),this.userCollapsed_&&this.handleToggle_())}setCollapsed(t){this.userCollapsed_=t,!(!this.collapsible_||this.collapsed_===t)&&this.handleToggle_()}getCollapsed(){return this.collapsed_}render(t){this.updateElement_(t.frameState)}}class Ry extends Dh{constructor(t){t=t||{},super({element:document.createElement("div"),render:t.render,target:t.target});const e=t.className!==void 0?t.className:"ol-rotate",i=t.label!==void 0?t.label:"",n=t.compassClassName!==void 0?t.compassClassName:"ol-compass";this.label_=null,typeof i=="string"?(this.label_=document.createElement("span"),this.label_.className=n,this.label_.textContent=i):(this.label_=i,this.label_.classList.add(n));const s=t.tipLabel?t.tipLabel:"Reset rotation",o=document.createElement("button");o.className=e+"-reset",o.setAttribute("type","button"),o.title=s,o.appendChild(this.label_),o.addEventListener(W.CLICK,this.handleClick_.bind(this),!1);const a=e+" "+sa+" "+Oh,l=this.element;l.className=a,l.appendChild(o),this.callResetNorth_=t.resetNorth?t.resetNorth:void 0,this.duration_=t.duration!==void 0?t.duration:250,this.autoHide_=t.autoHide!==void 0?t.autoHide:!0,this.rotation_=void 0,this.autoHide_&&this.element.classList.add(Us)}handleClick_(t){t.preventDefault(),this.callResetNorth_!==void 0?this.callResetNorth_():this.resetNorth_()}resetNorth_(){const e=this.getMap().getView();if(!e)return;const i=e.getRotation();i!==void 0&&(this.duration_>0&&i%(2*Math.PI)!==0?e.animate({rotation:0,duration:this.duration_,easing:Ir}):e.setRotation(0))}render(t){const e=t.frameState;if(!e)return;const i=e.viewState.rotation;if(i!=this.rotation_){const n="rotate("+i+"rad)";if(this.autoHide_){const s=this.element.classList.contains(Us);!s&&i===0?this.element.classList.add(Us):s&&i!==0&&this.element.classList.remove(Us)}this.label_.style.transform=n}this.rotation_=i}}class Sy extends Dh{constructor(t){t=t||{},super({element:document.createElement("div"),target:t.target});const e=t.className!==void 0?t.className:"ol-zoom",i=t.delta!==void 0?t.delta:1,n=t.zoomInClassName!==void 0?t.zoomInClassName:e+"-in",s=t.zoomOutClassName!==void 0?t.zoomOutClassName:e+"-out",o=t.zoomInLabel!==void 0?t.zoomInLabel:"+",a=t.zoomOutLabel!==void 0?t.zoomOutLabel:"",l=t.zoomInTipLabel!==void 0?t.zoomInTipLabel:"Zoom in",h=t.zoomOutTipLabel!==void 0?t.zoomOutTipLabel:"Zoom out",u=document.createElement("button");u.className=n,u.setAttribute("type","button"),u.title=l,u.appendChild(typeof o=="string"?document.createTextNode(o):o),u.addEventListener(W.CLICK,this.handleClick_.bind(this,i),!1);const c=document.createElement("button");c.className=s,c.setAttribute("type","button"),c.title=h,c.appendChild(typeof a=="string"?document.createTextNode(a):a),c.addEventListener(W.CLICK,this.handleClick_.bind(this,-i),!1);const f=e+" "+sa+" "+Oh,d=this.element;d.className=f,d.appendChild(u),d.appendChild(c),this.duration_=t.duration!==void 0?t.duration:250}handleClick_(t,e){e.preventDefault(),this.zoomByDelta_(t)}zoomByDelta_(t){const i=this.getMap().getView();if(!i)return;const n=i.getZoom();if(n!==void 0){const s=i.getConstrainedZoom(n+t);this.duration_>0?(i.getAnimating()&&i.cancelAnimations(),i.animate({zoom:s,duration:this.duration_,easing:Ir})):i.setZoom(s)}}}function Iy(r){r=r||{};const t=new He;return(r.zoom!==void 0?r.zoom:!0)&&t.push(new Sy(r.zoomOptions)),(r.rotate!==void 0?r.rotate:!0)&&t.push(new Ry(r.rotateOptions)),(r.attribution!==void 0?r.attribution:!0)&&t.push(new Ty(r.attributionOptions)),t}class by{constructor(t,e,i){this.decay_=t,this.minVelocity_=e,this.delay_=i,this.points_=[],this.angle_=0,this.initialVelocity_=0}begin(){this.points_.length=0,this.angle_=0,this.initialVelocity_=0}update(t,e){this.points_.push(t,e,Date.now())}end(){if(this.points_.length<6)return!1;const t=Date.now()-this.delay_,e=this.points_.length-3;if(this.points_[e+2]<t)return!1;let i=e-3;for(;i>0&&this.points_[i+2]>t;)i-=3;const n=this.points_[e+2]-this.points_[i+2];if(n<1e3/60)return!1;const s=this.points_[e]-this.points_[i],o=this.points_[e+1]-this.points_[i+1];return this.angle_=Math.atan2(o,s),this.initialVelocity_=Math.sqrt(s*s+o*o)/n,this.initialVelocity_>this.minVelocity_}getDistance(){return(this.minVelocity_-this.initialVelocity_)/this.decay_}getAngle(){return this.angle_}}const sc={ACTIVE:"active"};class bs extends ze{constructor(t){super(),this.on,this.once,this.un,t&&t.handleEvent&&(this.handleEvent=t.handleEvent),this.map_=null,this.setActive(!0)}getActive(){return this.get(sc.ACTIVE)}getMap(){return this.map_}handleEvent(t){return!0}setActive(t){this.set(sc.ACTIVE,t)}setMap(t){this.map_=t}}function My(r,t,e){const i=r.getCenterInternal();if(i){const n=[i[0]+t[0],i[1]+t[1]];r.animateInternal({duration:e!==void 0?e:250,easing:l0,center:r.getConstrainedCenter(n)})}}function Fh(r,t,e,i){const n=r.getZoom();if(n===void 0)return;const s=r.getConstrainedZoom(n+t),o=r.getResolutionForZoom(s);r.getAnimating()&&r.cancelAnimations(),r.animate({resolution:o,anchor:e,duration:i!==void 0?i:250,easing:Ir})}class Ay extends bs{constructor(t){super(),t=t||{},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:250}handleEvent(t){let e=!1;if(t.type==gt.DBLCLICK){const i=t.originalEvent,n=t.map,s=t.coordinate,o=i.shiftKey?-this.delta_:this.delta_,a=n.getView();Fh(a,o,s,this.duration_),i.preventDefault(),e=!0}return!e}}function Ll(r){const t=arguments;return function(e){let i=!0;for(let n=0,s=t.length;n<s&&(i=i&&t[n](e),!!i);++n);return i}}const Py=function(r){const t=r.originalEvent;return t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},Ly=function(r){const t=r.map.getTargetElement(),e=t.getRootNode(),i=r.map.getOwnerDocument().activeElement;return e instanceof ShadowRoot?e.host.contains(i):t.contains(i)},tg=function(r){const t=r.map.getTargetElement(),e=t.getRootNode();return(e instanceof ShadowRoot?e.host:t).hasAttribute("tabindex")?Ly(r):!0},Oy=cs,eg=function(r){const t=r.originalEvent;return t instanceof PointerEvent&&t.button==0&&!(Up&&xd&&t.ctrlKey)},ig=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&!t.shiftKey},Dy=function(r){const t=r.originalEvent;return xd?t.metaKey:t.ctrlKey},Fy=function(r){const t=r.originalEvent;return!t.altKey&&!(t.metaKey||t.ctrlKey)&&t.shiftKey},ng=function(r){const t=r.originalEvent,e=t.target.tagName;return e!=="INPUT"&&e!=="SELECT"&&e!=="TEXTAREA"&&!t.target.isContentEditable},Na=function(r){const t=r.originalEvent;return t instanceof PointerEvent&&t.pointerType=="mouse"},ky=function(r){const t=r.originalEvent;return t instanceof PointerEvent&&t.isPrimary&&t.button===0};class Ms extends bs{constructor(t){t=t||{},super(t),t.handleDownEvent&&(this.handleDownEvent=t.handleDownEvent),t.handleDragEvent&&(this.handleDragEvent=t.handleDragEvent),t.handleMoveEvent&&(this.handleMoveEvent=t.handleMoveEvent),t.handleUpEvent&&(this.handleUpEvent=t.handleUpEvent),t.stopDown&&(this.stopDown=t.stopDown),this.handlingDownUpSequence=!1,this.targetPointers=[]}getPointerCount(){return this.targetPointers.length}handleDownEvent(t){return!1}handleDragEvent(t){}handleEvent(t){if(!t.originalEvent)return!0;let e=!1;if(this.updateTrackedPointers_(t),this.handlingDownUpSequence){if(t.type==gt.POINTERDRAG)this.handleDragEvent(t),t.originalEvent.preventDefault();else if(t.type==gt.POINTERUP){const i=this.handleUpEvent(t);this.handlingDownUpSequence=i&&this.targetPointers.length>0}}else if(t.type==gt.POINTERDOWN){const i=this.handleDownEvent(t);this.handlingDownUpSequence=i,e=this.stopDown(i)}else t.type==gt.POINTERMOVE&&this.handleMoveEvent(t);return!e}handleMoveEvent(t){}handleUpEvent(t){return!1}stopDown(t){return t}updateTrackedPointers_(t){t.activePointers&&(this.targetPointers=t.activePointers)}}function kh(r){const t=r.length;let e=0,i=0;for(let n=0;n<t;n++)e+=r[n].clientX,i+=r[n].clientY;return{clientX:e/t,clientY:i/t}}class Ny extends Ms{constructor(t){super({stopDown:jo}),t=t||{},this.kinetic_=t.kinetic,this.lastCentroid=null,this.lastPointersCount_,this.panning_=!1;const e=t.condition?t.condition:Ll(ig,ky);this.condition_=t.onFocusOnly?Ll(tg,e):e,this.noKinetic_=!1}handleDragEvent(t){const e=t.map;this.panning_||(this.panning_=!0,e.getView().beginInteraction());const i=this.targetPointers,n=e.getEventPixel(kh(i));if(i.length==this.lastPointersCount_){if(this.kinetic_&&this.kinetic_.update(n[0],n[1]),this.lastCentroid){const s=[this.lastCentroid[0]-n[0],n[1]-this.lastCentroid[1]],a=t.map.getView();s0(s,a.getResolution()),mh(s,a.getRotation()),a.adjustCenterInternal(s)}}else this.kinetic_&&this.kinetic_.begin();this.lastCentroid=n,this.lastPointersCount_=i.length,t.originalEvent.preventDefault()}handleUpEvent(t){const e=t.map,i=e.getView();if(this.targetPointers.length===0){if(!this.noKinetic_&&this.kinetic_&&this.kinetic_.end()){const n=this.kinetic_.getDistance(),s=this.kinetic_.getAngle(),o=i.getCenterInternal(),a=e.getPixelFromCoordinateInternal(o),l=e.getCoordinateFromPixelInternal([a[0]-n*Math.cos(s),a[1]-n*Math.sin(s)]);i.animateInternal({center:i.getConstrainedCenter(l),duration:500,easing:Ir})}return this.panning_&&(this.panning_=!1,i.endInteraction()),!1}return this.kinetic_&&this.kinetic_.begin(),this.lastCentroid=null,!0}handleDownEvent(t){if(this.targetPointers.length>0&&this.condition_(t)){const i=t.map.getView();return this.lastCentroid=null,i.getAnimating()&&i.cancelAnimations(),this.kinetic_&&this.kinetic_.begin(),this.noKinetic_=this.targetPointers.length>1,!0}return!1}}class Gy extends Ms{constructor(t){t=t||{},super({stopDown:jo}),this.condition_=t.condition?t.condition:Py,this.lastAngle_=void 0,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){if(!Na(t))return;const e=t.map,i=e.getView();if(i.getConstraints().rotation===Ph)return;const n=e.getSize(),s=t.pixel,o=Math.atan2(n[1]/2-s[1],s[0]-n[0]/2);if(this.lastAngle_!==void 0){const a=o-this.lastAngle_;i.adjustRotationInternal(-a)}this.lastAngle_=o}handleUpEvent(t){return Na(t)?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){return Na(t)&&eg(t)&&this.condition_(t)?(t.map.getView().beginInteraction(),this.lastAngle_=void 0,!0):!1}}class zy extends Zo{constructor(t){super(),this.geometry_=null,this.element_=document.createElement("div"),this.element_.style.position="absolute",this.element_.style.pointerEvents="auto",this.element_.className="ol-box "+t,this.map_=null,this.startPixel_=null,this.endPixel_=null}disposeInternal(){this.setMap(null)}render_(){const t=this.startPixel_,e=this.endPixel_,i="px",n=this.element_.style;n.left=Math.min(t[0],e[0])+i,n.top=Math.min(t[1],e[1])+i,n.width=Math.abs(e[0]-t[0])+i,n.height=Math.abs(e[1]-t[1])+i}setMap(t){if(this.map_){this.map_.getOverlayContainer().removeChild(this.element_);const e=this.element_.style;e.left="inherit",e.top="inherit",e.width="inherit",e.height="inherit"}this.map_=t,this.map_&&this.map_.getOverlayContainer().appendChild(this.element_)}setPixels(t,e){this.startPixel_=t,this.endPixel_=e,this.createOrUpdateGeometry(),this.render_()}createOrUpdateGeometry(){if(!this.map_)return;const t=this.startPixel_,e=this.endPixel_,n=[t,[t[0],e[1]],e,[e[0],t[1]]].map(this.map_.getCoordinateFromPixelInternal,this.map_);n[4]=n[0].slice(),this.geometry_?this.geometry_.setCoordinates([n]):this.geometry_=new ms([n])}getGeometry(){return this.geometry_}}const Fn={BOXSTART:"boxstart",BOXDRAG:"boxdrag",BOXEND:"boxend",BOXCANCEL:"boxcancel"};class Fr extends vi{constructor(t,e,i){super(t),this.coordinate=e,this.mapBrowserEvent=i}}class Xy extends Ms{constructor(t){super(),this.on,this.once,this.un,t=t??{},this.box_=new zy(t.className||"ol-dragbox"),this.minArea_=t.minArea??64,t.onBoxEnd&&(this.onBoxEnd=t.onBoxEnd),this.startPixel_=null,this.condition_=t.condition??eg,this.boxEndCondition_=t.boxEndCondition??this.defaultBoxEndCondition}defaultBoxEndCondition(t,e,i){const n=i[0]-e[0],s=i[1]-e[1];return n*n+s*s>=this.minArea_}getGeometry(){return this.box_.getGeometry()}handleDragEvent(t){this.startPixel_&&(this.box_.setPixels(this.startPixel_,t.pixel),this.dispatchEvent(new Fr(Fn.BOXDRAG,t.coordinate,t)))}handleUpEvent(t){if(!this.startPixel_)return!1;const e=this.boxEndCondition_(t,this.startPixel_,t.pixel);return e&&this.onBoxEnd(t),this.dispatchEvent(new Fr(e?Fn.BOXEND:Fn.BOXCANCEL,t.coordinate,t)),this.box_.setMap(null),this.startPixel_=null,!1}handleDownEvent(t){return this.condition_(t)?(this.startPixel_=t.pixel,this.box_.setMap(t.map),this.box_.setPixels(this.startPixel_,this.startPixel_),this.dispatchEvent(new Fr(Fn.BOXSTART,t.coordinate,t)),!0):!1}onBoxEnd(t){}setActive(t){t||(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fr(Fn.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setActive(t)}setMap(t){this.getMap()&&(this.box_.setMap(null),this.startPixel_&&(this.dispatchEvent(new Fr(Fn.BOXCANCEL,this.startPixel_,null)),this.startPixel_=null)),super.setMap(t)}}class Wy extends Xy{constructor(t){t=t||{};const e=t.condition?t.condition:Fy;super({condition:e,className:t.className||"ol-dragzoom",minArea:t.minArea}),this.duration_=t.duration!==void 0?t.duration:200,this.out_=t.out!==void 0?t.out:!1}onBoxEnd(t){const i=this.getMap().getView();let n=this.getGeometry();if(this.out_){const s=i.rotatedExtentForGeometry(n),o=i.getResolutionForExtentInternal(s),a=i.getResolution()/o;n=n.clone(),n.scale(a*a)}i.fitInternal(n,{duration:this.duration_,easing:Ir})}}const nn={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",DOWN:"ArrowDown"};class Yy extends bs{constructor(t){super(),t=t||{},this.defaultCondition_=function(e){return ig(e)&&ng(e)},this.condition_=t.condition!==void 0?t.condition:this.defaultCondition_,this.duration_=t.duration!==void 0?t.duration:100,this.pixelDelta_=t.pixelDelta!==void 0?t.pixelDelta:128}handleEvent(t){let e=!1;if(t.type==W.KEYDOWN){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&(n==nn.DOWN||n==nn.LEFT||n==nn.RIGHT||n==nn.UP)){const o=t.map.getView(),a=o.getResolution()*this.pixelDelta_;let l=0,h=0;n==nn.DOWN?h=-a:n==nn.LEFT?l=-a:n==nn.RIGHT?l=a:h=a;const u=[l,h];mh(u,o.getRotation()),My(o,u,this.duration_),i.preventDefault(),e=!0}}return!e}}class By extends bs{constructor(t){super(),t=t||{},this.condition_=t.condition?t.condition:function(e){return!Dy(e)&&ng(e)},this.delta_=t.delta?t.delta:1,this.duration_=t.duration!==void 0?t.duration:100}handleEvent(t){let e=!1;if(t.type==W.KEYDOWN||t.type==W.KEYPRESS){const i=t.originalEvent,n=i.key;if(this.condition_(t)&&(n==="+"||n==="-")){const s=t.map,o=n==="+"?this.delta_:-this.delta_,a=s.getView();Fh(a,o,void 0,this.duration_),i.preventDefault(),e=!0}}return!e}}class Uy extends bs{constructor(t){t=t||{},super(t),this.totalDelta_=0,this.lastDelta_=0,this.maxDelta_=t.maxDelta!==void 0?t.maxDelta:1,this.duration_=t.duration!==void 0?t.duration:250,this.timeout_=t.timeout!==void 0?t.timeout:80,this.useAnchor_=t.useAnchor!==void 0?t.useAnchor:!0,this.constrainResolution_=t.constrainResolution!==void 0?t.constrainResolution:!1;const e=t.condition?t.condition:Oy;this.condition_=t.onFocusOnly?Ll(tg,e):e,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_,this.mode_=void 0,this.trackpadEventGap_=400,this.trackpadTimeoutId_,this.deltaPerZoom_=300}endInteraction_(){this.trackpadTimeoutId_=void 0;const t=this.getMap();if(!t)return;t.getView().endInteraction(void 0,this.lastDelta_?this.lastDelta_>0?1:-1:0,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null)}handleEvent(t){if(!this.condition_(t)||t.type!==W.WHEEL)return!0;const i=t.map,n=t.originalEvent;n.preventDefault(),this.useAnchor_&&(this.lastAnchor_=t.pixel);let s;if(t.type==W.WHEEL&&(s=n.deltaY,n.deltaMode===WheelEvent.DOM_DELTA_LINE&&(s*=40)),s===0)return!1;this.lastDelta_=s;const o=Date.now();this.startTime_===void 0&&(this.startTime_=o),(!this.mode_||o-this.startTime_>this.trackpadEventGap_)&&(this.mode_=Math.abs(s)<4?"trackpad":"wheel");const a=i.getView();if(this.mode_==="trackpad"&&!(a.getConstrainResolution()||this.constrainResolution_))return this.trackpadTimeoutId_?clearTimeout(this.trackpadTimeoutId_):(a.getAnimating()&&a.cancelAnimations(),a.beginInteraction()),this.trackpadTimeoutId_=setTimeout(this.endInteraction_.bind(this),this.timeout_),a.adjustZoom(-s/this.deltaPerZoom_,this.lastAnchor_?i.getCoordinateFromPixel(this.lastAnchor_):null),this.startTime_=o,!1;this.totalDelta_+=s;const l=Math.max(this.timeout_-(o-this.startTime_),0);return clearTimeout(this.timeoutId_),this.timeoutId_=setTimeout(this.handleWheelZoom_.bind(this,i),l),!1}handleWheelZoom_(t){const e=t.getView();e.getAnimating()&&e.cancelAnimations();let i=-ft(this.totalDelta_,-this.maxDelta_*this.deltaPerZoom_,this.maxDelta_*this.deltaPerZoom_)/this.deltaPerZoom_;(e.getConstrainResolution()||this.constrainResolution_)&&(i=i?i>0?1:-1:0),Fh(e,i,this.lastAnchor_?t.getCoordinateFromPixel(this.lastAnchor_):null,this.duration_),this.mode_=void 0,this.totalDelta_=0,this.lastAnchor_=null,this.startTime_=void 0,this.timeoutId_=void 0}setMouseAnchor(t){this.useAnchor_=t,t||(this.lastAnchor_=null)}}class Ky extends Ms{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=jo),super(e),this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.threshold_=t.threshold!==void 0?t.threshold:.3,this.duration_=t.duration!==void 0?t.duration:250}handleDragEvent(t){let e=0;const i=this.targetPointers[0],n=this.targetPointers[1],s=Math.atan2(n.clientY-i.clientY,n.clientX-i.clientX);if(this.lastAngle_!==void 0){const l=s-this.lastAngle_;this.rotationDelta_+=l,!this.rotating_&&Math.abs(this.rotationDelta_)>this.threshold_&&(this.rotating_=!0),e=l}this.lastAngle_=s;const o=t.map,a=o.getView();a.getConstraints().rotation!==Ph&&(this.anchor_=o.getCoordinateFromPixelInternal(o.getEventPixel(kh(this.targetPointers))),this.rotating_&&(o.render(),a.adjustRotationInternal(e,this.anchor_)))}handleUpEvent(t){return this.targetPointers.length<2?(t.map.getView().endInteraction(this.duration_),!1):!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastAngle_=void 0,this.rotating_=!1,this.rotationDelta_=0,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}class Vy extends Ms{constructor(t){t=t||{};const e=t;e.stopDown||(e.stopDown=jo),super(e),this.anchor_=null,this.duration_=t.duration!==void 0?t.duration:400,this.lastDistance_=void 0,this.lastScaleDelta_=1}handleDragEvent(t){let e=1;const i=this.targetPointers[0],n=this.targetPointers[1],s=i.clientX-n.clientX,o=i.clientY-n.clientY,a=Math.sqrt(s*s+o*o);this.lastDistance_!==void 0&&(e=this.lastDistance_/a),this.lastDistance_=a;const l=t.map,h=l.getView();e!=1&&(this.lastScaleDelta_=e),this.anchor_=l.getCoordinateFromPixelInternal(l.getEventPixel(kh(this.targetPointers))),l.render(),h.adjustResolutionInternal(e,this.anchor_)}handleUpEvent(t){if(this.targetPointers.length<2){const i=t.map.getView(),n=this.lastScaleDelta_>1?1:-1;return i.endInteraction(this.duration_,n),!1}return!0}handleDownEvent(t){if(this.targetPointers.length>=2){const e=t.map;return this.anchor_=null,this.lastDistance_=void 0,this.lastScaleDelta_=1,this.handlingDownUpSequence||e.getView().beginInteraction(),!0}return!1}}function Zy(r){r=r||{};const t=new He,e=new by(-.005,.05,100);return(r.altShiftDragRotate!==void 0?r.altShiftDragRotate:!0)&&t.push(new Gy),(r.doubleClickZoom!==void 0?r.doubleClickZoom:!0)&&t.push(new Ay({delta:r.zoomDelta,duration:r.zoomDuration})),(r.dragPan!==void 0?r.dragPan:!0)&&t.push(new Ny({onFocusOnly:r.onFocusOnly,kinetic:e})),(r.pinchRotate!==void 0?r.pinchRotate:!0)&&t.push(new Ky),(r.pinchZoom!==void 0?r.pinchZoom:!0)&&t.push(new Vy({duration:r.zoomDuration})),(r.keyboard!==void 0?r.keyboard:!0)&&(t.push(new Yy),t.push(new By({delta:r.zoomDelta,duration:r.zoomDuration}))),(r.mouseWheelZoom!==void 0?r.mouseWheelZoom:!0)&&t.push(new Uy({onFocusOnly:r.onFocusOnly,duration:r.zoomDuration})),(r.shiftDragZoom!==void 0?r.shiftDragZoom:!0)&&t.push(new Wy({duration:r.zoomDuration})),t}const et={OPACITY:"opacity",VISIBLE:"visible",EXTENT:"extent",Z_INDEX:"zIndex",MAX_RESOLUTION:"maxResolution",MIN_RESOLUTION:"minResolution",MAX_ZOOM:"maxZoom",MIN_ZOOM:"minZoom",SOURCE:"source",MAP:"map"};class rg extends ze{constructor(t){super(),this.on,this.once,this.un,this.background_=t.background;const e=Object.assign({},t);typeof t.properties=="object"&&(delete e.properties,Object.assign(e,t.properties)),e[et.OPACITY]=t.opacity!==void 0?t.opacity:1,Q(typeof e[et.OPACITY]=="number","Layer opacity must be a number"),e[et.VISIBLE]=t.visible!==void 0?t.visible:!0,e[et.Z_INDEX]=t.zIndex,e[et.MAX_RESOLUTION]=t.maxResolution!==void 0?t.maxResolution:1/0,e[et.MIN_RESOLUTION]=t.minResolution!==void 0?t.minResolution:0,e[et.MIN_ZOOM]=t.minZoom!==void 0?t.minZoom:-1/0,e[et.MAX_ZOOM]=t.maxZoom!==void 0?t.maxZoom:1/0,this.className_=e.className!==void 0?e.className:"ol-layer",delete e.className,this.setProperties(e),this.state_=null}getBackground(){return this.background_}getClassName(){return this.className_}getLayerState(t){const e=this.state_||{layer:this,managed:t===void 0?!0:t},i=this.getZIndex();return e.opacity=ft(Math.round(this.getOpacity()*100)/100,0,1),e.visible=this.getVisible(),e.extent=this.getExtent(),e.zIndex=i===void 0&&!e.managed?1/0:i,e.maxResolution=this.getMaxResolution(),e.minResolution=Math.max(this.getMinResolution(),0),e.minZoom=this.getMinZoom(),e.maxZoom=this.getMaxZoom(),this.state_=e,e}getLayersArray(t){return q()}getLayerStatesArray(t){return q()}getExtent(){return this.get(et.EXTENT)}getMaxResolution(){return this.get(et.MAX_RESOLUTION)}getMinResolution(){return this.get(et.MIN_RESOLUTION)}getMinZoom(){return this.get(et.MIN_ZOOM)}getMaxZoom(){return this.get(et.MAX_ZOOM)}getOpacity(){return this.get(et.OPACITY)}getSourceState(){return q()}getVisible(){return this.get(et.VISIBLE)}getZIndex(){return this.get(et.Z_INDEX)}setBackground(t){this.background_=t,this.changed()}setExtent(t){this.set(et.EXTENT,t)}setMaxResolution(t){this.set(et.MAX_RESOLUTION,t)}setMinResolution(t){this.set(et.MIN_RESOLUTION,t)}setMaxZoom(t){this.set(et.MAX_ZOOM,t)}setMinZoom(t){this.set(et.MIN_ZOOM,t)}setOpacity(t){Q(typeof t=="number","Layer opacity must be a number"),this.set(et.OPACITY,t)}setVisible(t){this.set(et.VISIBLE,t)}setZIndex(t){this.set(et.Z_INDEX,t)}disposeInternal(){this.state_&&(this.state_.layer=null,this.state_=null),super.disposeInternal()}}class Ai extends vi{constructor(t,e){super(t),this.layer=e}}const Ga={LAYERS:"layers"};class br extends rg{constructor(t){t=t||{};const e=Object.assign({},t);delete e.layers;let i=t.layers;super(e),this.on,this.once,this.un,this.layersListenerKeys_=[],this.listenerKeys_={},this.addChangeListener(Ga.LAYERS,this.handleLayersChanged_),i?Array.isArray(i)?i=new He(i.slice(),{unique:!0}):Q(typeof i.getArray=="function","Expected `layers` to be an array or a `Collection`"):i=new He(void 0,{unique:!0}),this.setLayers(i)}handleLayerChange_(){this.changed()}handleLayersChanged_(){this.layersListenerKeys_.forEach(lt),this.layersListenerKeys_.length=0;const t=this.getLayers();this.layersListenerKeys_.push(H(t,Vt.ADD,this.handleLayersAdd_,this),H(t,Vt.REMOVE,this.handleLayersRemove_,this));for(const i in this.listenerKeys_)this.listenerKeys_[i].forEach(lt);Rs(this.listenerKeys_);const e=t.getArray();for(let i=0,n=e.length;i<n;i++){const s=e[i];this.registerLayerListeners_(s),this.dispatchEvent(new Ai("addlayer",s))}this.changed()}registerLayerListeners_(t){const e=[H(t,dr.PROPERTYCHANGE,this.handleLayerChange_,this),H(t,W.CHANGE,this.handleLayerChange_,this)];t instanceof br&&e.push(H(t,"addlayer",this.handleLayerGroupAdd_,this),H(t,"removelayer",this.handleLayerGroupRemove_,this)),this.listenerKeys_[J(t)]=e}handleLayerGroupAdd_(t){this.dispatchEvent(new Ai("addlayer",t.layer))}handleLayerGroupRemove_(t){this.dispatchEvent(new Ai("removelayer",t.layer))}handleLayersAdd_(t){const e=t.element;this.registerLayerListeners_(e),this.dispatchEvent(new Ai("addlayer",e)),this.changed()}handleLayersRemove_(t){const e=t.element,i=J(e);this.listenerKeys_[i].forEach(lt),delete this.listenerKeys_[i],this.dispatchEvent(new Ai("removelayer",e)),this.changed()}getLayers(){return this.get(Ga.LAYERS)}setLayers(t){const e=this.getLayers();if(e){const i=e.getArray();for(let n=0,s=i.length;n<s;++n)this.dispatchEvent(new Ai("removelayer",i[n]))}this.set(Ga.LAYERS,t)}getLayersArray(t){return t=t!==void 0?t:[],this.getLayers().forEach(function(e){e.getLayersArray(t)}),t}getLayerStatesArray(t){const e=t!==void 0?t:[],i=e.length;this.getLayers().forEach(function(o){o.getLayerStatesArray(e)});const n=this.getLayerState();let s=n.zIndex;!t&&n.zIndex===void 0&&(s=0);for(let o=i,a=e.length;o<a;o++){const l=e[o];l.opacity*=n.opacity,l.visible=l.visible&&n.visible,l.maxResolution=Math.min(l.maxResolution,n.maxResolution),l.minResolution=Math.max(l.minResolution,n.minResolution),l.minZoom=Math.max(l.minZoom,n.minZoom),l.maxZoom=Math.min(l.maxZoom,n.maxZoom),n.extent!==void 0&&(l.extent!==void 0?l.extent=pn(l.extent,n.extent):l.extent=n.extent),l.zIndex===void 0&&(l.zIndex=s)}return e}getSourceState(){return"ready"}}const Se={PRERENDER:"prerender",POSTRENDER:"postrender",PRECOMPOSE:"precompose",POSTCOMPOSE:"postcompose",RENDERCOMPLETE:"rendercomplete"};class aa extends rg{constructor(t){const e=Object.assign({},t);delete e.source,super(e),this.on,this.once,this.un,this.mapPrecomposeKey_=null,this.mapRenderKey_=null,this.sourceChangeKey_=null,this.renderer_=null,this.sourceReady_=!1,this.rendered=!1,t.render&&(this.render=t.render),t.map&&this.setMap(t.map),this.addChangeListener(et.SOURCE,this.handleSourcePropertyChange_);const i=t.source?t.source:null;this.setSource(i)}getLayersArray(t){return t=t||[],t.push(this),t}getLayerStatesArray(t){return t=t||[],t.push(this.getLayerState()),t}getSource(){return this.get(et.SOURCE)||null}getRenderSource(){return this.getSource()}getSourceState(){const t=this.getSource();return t?t.getState():"undefined"}handleSourceChange_(){this.changed(),!(this.sourceReady_||this.getSource().getState()!=="ready")&&(this.sourceReady_=!0,this.dispatchEvent("sourceready"))}handleSourcePropertyChange_(){this.sourceChangeKey_&&(lt(this.sourceChangeKey_),this.sourceChangeKey_=null),this.sourceReady_=!1;const t=this.getSource();t&&(this.sourceChangeKey_=H(t,W.CHANGE,this.handleSourceChange_,this),t.getState()==="ready"&&(this.sourceReady_=!0,setTimeout(()=>{this.dispatchEvent("sourceready")},0)),this.clearRenderer()),this.changed()}getFeatures(t){return this.renderer_?this.renderer_.getFeatures(t):Promise.resolve([])}getData(t){return!this.renderer_||!this.rendered?null:this.renderer_.getData(t)}isVisible(t){let e;const i=this.getMapInternal();!t&&i&&(t=i.getView()),t instanceof Ve?e={viewState:t.getState(),extent:t.calculateExtent()}:e=t,!e.layerStatesArray&&i&&(e.layerStatesArray=i.getLayerGroup().getLayerStatesArray());let n;if(e.layerStatesArray){if(n=e.layerStatesArray.find(o=>o.layer===this),!n)return!1}else n=this.getLayerState();const s=this.getExtent();return Nh(n,e.viewState)&&(!s||Ht(s,e.extent))}getAttributions(t){var s;if(!this.isVisible(t))return[];const e=(s=this.getSource())==null?void 0:s.getAttributions();if(!e)return[];const i=t instanceof Ve?t.getViewStateAndExtent():t;let n=e(i);return Array.isArray(n)||(n=[n]),n}render(t,e){const i=this.getRenderer();return i.prepareFrame(t)?(this.rendered=!0,i.renderFrame(t,e)):null}unrender(){this.rendered=!1}getDeclutter(){}renderDeclutter(t,e){}renderDeferred(t){const e=this.getRenderer();e&&e.renderDeferred(t)}setMapInternal(t){t||this.unrender(),this.set(et.MAP,t)}getMapInternal(){return this.get(et.MAP)}setMap(t){this.mapPrecomposeKey_&&(lt(this.mapPrecomposeKey_),this.mapPrecomposeKey_=null),t||this.changed(),this.mapRenderKey_&&(lt(this.mapRenderKey_),this.mapRenderKey_=null),t&&(this.mapPrecomposeKey_=H(t,Se.PRECOMPOSE,this.handlePrecompose_,this),this.mapRenderKey_=H(this,W.CHANGE,t.render,t),this.changed())}handlePrecompose_(t){const e=t.frameState.layerStatesArray,i=this.getLayerState(!1);Q(!e.some(n=>n.layer===i.layer),"A layer can only be added to the map once. Use either `layer.setMap()` or `map.addLayer()`, not both."),e.push(i)}setSource(t){this.set(et.SOURCE,t)}getRenderer(){return this.renderer_||(this.renderer_=this.createRenderer()),this.renderer_}hasRenderer(){return!!this.renderer_}createRenderer(){return null}clearRenderer(){this.renderer_&&(this.renderer_.dispose(),delete this.renderer_)}disposeInternal(){this.clearRenderer(),this.setSource(null),super.disposeInternal()}}function Nh(r,t){if(!r.visible)return!1;const e=t.resolution;if(e<r.minResolution||e>=r.maxResolution)return!1;const i=t.zoom;return i>r.minZoom&&i<=r.maxZoom}function sg(r,t,e=0,i=r.length-1,n=jy){for(;i>e;){if(i-e>600){const l=i-e+1,h=t-e+1,u=Math.log(l),c=.5*Math.exp(2*u/3),f=.5*Math.sqrt(u*c*(l-c)/l)*(h-l/2<0?-1:1),d=Math.max(e,Math.floor(t-h*c/l+f)),_=Math.min(i,Math.floor(t+(l-h)*c/l+f));sg(r,t,d,_,n)}const s=r[t];let o=e,a=i;for(kr(r,e,t),n(r[i],s)>0&&kr(r,e,i);o<a;){for(kr(r,o,a),o++,a--;n(r[o],s)<0;)o++;for(;n(r[a],s)>0;)a--}n(r[e],s)===0?kr(r,e,a):(a++,kr(r,a,i)),a<=t&&(e=a+1),t<=a&&(i=a-1)}}function kr(r,t,e){const i=r[t];r[t]=r[e],r[e]=i}function jy(r,t){return r<t?-1:r>t?1:0}let og=class{constructor(t=9){this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(this._maxEntries*.4)),this.clear()}all(){return this._all(this.data,[])}search(t){let e=this.data;const i=[];if(!Vs(t,e))return i;const n=this.toBBox,s=[];for(;e;){for(let o=0;o<e.children.length;o++){const a=e.children[o],l=e.leaf?n(a):a;Vs(t,l)&&(e.leaf?i.push(a):Xa(t,l)?this._all(a,i):s.push(a))}e=s.pop()}return i}collides(t){let e=this.data;if(!Vs(t,e))return!1;const i=[];for(;e;){for(let n=0;n<e.children.length;n++){const s=e.children[n],o=e.leaf?this.toBBox(s):s;if(Vs(t,o)){if(e.leaf||Xa(t,o))return!0;i.push(s)}}e=i.pop()}return!1}load(t){if(!(t&&t.length))return this;if(t.length<this._minEntries){for(let i=0;i<t.length;i++)this.insert(t[i]);return this}let e=this._build(t.slice(),0,t.length-1,0);if(!this.data.children.length)this.data=e;else if(this.data.height===e.height)this._splitRoot(this.data,e);else{if(this.data.height<e.height){const i=this.data;this.data=e,e=i}this._insert(e,this.data.height-e.height-1,!0)}return this}insert(t){return t&&this._insert(t,this.data.height-1),this}clear(){return this.data=Bn([]),this}remove(t,e){if(!t)return this;let i=this.data;const n=this.toBBox(t),s=[],o=[];let a,l,h;for(;i||s.length;){if(i||(i=s.pop(),l=s[s.length-1],a=o.pop(),h=!0),i.leaf){const u=Hy(t,i.children,e);if(u!==-1)return i.children.splice(u,1),s.push(i),this._condense(s),this}!h&&!i.leaf&&Xa(i,n)?(s.push(i),o.push(a),a=0,l=i,i=i.children[0]):l?(a++,i=l.children[a],h=!1):i=null}return this}toBBox(t){return t}compareMinX(t,e){return t.minX-e.minX}compareMinY(t,e){return t.minY-e.minY}toJSON(){return this.data}fromJSON(t){return this.data=t,this}_all(t,e){const i=[];for(;t;)t.leaf?e.push(...t.children):i.push(...t.children),t=i.pop();return e}_build(t,e,i,n){const s=i-e+1;let o=this._maxEntries,a;if(s<=o)return a=Bn(t.slice(e,i+1)),kn(a,this.toBBox),a;n||(n=Math.ceil(Math.log(s)/Math.log(o)),o=Math.ceil(s/Math.pow(o,n-1))),a=Bn([]),a.leaf=!1,a.height=n;const l=Math.ceil(s/o),h=l*Math.ceil(Math.sqrt(o));oc(t,e,i,h,this.compareMinX);for(let u=e;u<=i;u+=h){const c=Math.min(u+h-1,i);oc(t,u,c,l,this.compareMinY);for(let f=u;f<=c;f+=l){const d=Math.min(f+l-1,c);a.children.push(this._build(t,f,d,n-1))}}return kn(a,this.toBBox),a}_chooseSubtree(t,e,i,n){for(;n.push(e),!(e.leaf||n.length-1===i);){let s=1/0,o=1/0,a;for(let l=0;l<e.children.length;l++){const h=e.children[l],u=za(h),c=Jy(t,h)-u;c<o?(o=c,s=u<s?u:s,a=h):c===o&&u<s&&(s=u,a=h)}e=a||e.children[0]}return e}_insert(t,e,i){const n=i?t:this.toBBox(t),s=[],o=this._chooseSubtree(n,this.data,e,s);for(o.children.push(t),Br(o,n);e>=0&&s[e].children.length>this._maxEntries;)this._split(s,e),e--;this._adjustParentBBoxes(n,s,e)}_split(t,e){const i=t[e],n=i.children.length,s=this._minEntries;this._chooseSplitAxis(i,s,n);const o=this._chooseSplitIndex(i,s,n),a=Bn(i.children.splice(o,i.children.length-o));a.height=i.height,a.leaf=i.leaf,kn(i,this.toBBox),kn(a,this.toBBox),e?t[e-1].children.push(a):this._splitRoot(i,a)}_splitRoot(t,e){this.data=Bn([t,e]),this.data.height=t.height+1,this.data.leaf=!1,kn(this.data,this.toBBox)}_chooseSplitIndex(t,e,i){let n,s=1/0,o=1/0;for(let a=e;a<=i-e;a++){const l=Yr(t,0,a,this.toBBox),h=Yr(t,a,i,this.toBBox),u=Qy(l,h),c=za(l)+za(h);u<s?(s=u,n=a,o=c<o?c:o):u===s&&c<o&&(o=c,n=a)}return n||i-e}_chooseSplitAxis(t,e,i){const n=t.leaf?this.compareMinX:qy,s=t.leaf?this.compareMinY:$y,o=this._allDistMargin(t,e,i,n),a=this._allDistMargin(t,e,i,s);o<a&&t.children.sort(n)}_allDistMargin(t,e,i,n){t.children.sort(n);const s=this.toBBox,o=Yr(t,0,e,s),a=Yr(t,i-e,i,s);let l=Ks(o)+Ks(a);for(let h=e;h<i-e;h++){const u=t.children[h];Br(o,t.leaf?s(u):u),l+=Ks(o)}for(let h=i-e-1;h>=e;h--){const u=t.children[h];Br(a,t.leaf?s(u):u),l+=Ks(a)}return l}_adjustParentBBoxes(t,e,i){for(let n=i;n>=0;n--)Br(e[n],t)}_condense(t){for(let e=t.length-1,i;e>=0;e--)t[e].children.length===0?e>0?(i=t[e-1].children,i.splice(i.indexOf(t[e]),1)):this.clear():kn(t[e],this.toBBox)}};function Hy(r,t,e){if(!e)return t.indexOf(r);for(let i=0;i<t.length;i++)if(e(r,t[i]))return i;return-1}function kn(r,t){Yr(r,0,r.children.length,t,r)}function Yr(r,t,e,i,n){n||(n=Bn(null)),n.minX=1/0,n.minY=1/0,n.maxX=-1/0,n.maxY=-1/0;for(let s=t;s<e;s++){const o=r.children[s];Br(n,r.leaf?i(o):o)}return n}function Br(r,t){return r.minX=Math.min(r.minX,t.minX),r.minY=Math.min(r.minY,t.minY),r.maxX=Math.max(r.maxX,t.maxX),r.maxY=Math.max(r.maxY,t.maxY),r}function qy(r,t){return r.minX-t.minX}function $y(r,t){return r.minY-t.minY}function za(r){return(r.maxX-r.minX)*(r.maxY-r.minY)}function Ks(r){return r.maxX-r.minX+(r.maxY-r.minY)}function Jy(r,t){return(Math.max(t.maxX,r.maxX)-Math.min(t.minX,r.minX))*(Math.max(t.maxY,r.maxY)-Math.min(t.minY,r.minY))}function Qy(r,t){const e=Math.max(r.minX,t.minX),i=Math.max(r.minY,t.minY),n=Math.min(r.maxX,t.maxX),s=Math.min(r.maxY,t.maxY);return Math.max(0,n-e)*Math.max(0,s-i)}function Xa(r,t){return r.minX<=t.minX&&r.minY<=t.minY&&t.maxX<=r.maxX&&t.maxY<=r.maxY}function Vs(r,t){return t.minX<=r.maxX&&t.minY<=r.maxY&&t.maxX>=r.minX&&t.maxY>=r.minY}function Bn(r){return{children:r,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function oc(r,t,e,i,n){const s=[t,e];for(;s.length;){if(e=s.pop(),t=s.pop(),e-t<=i)continue;const o=t+Math.ceil((e-t)/i/2)*i;sg(r,o,t,e,n),s.push(t,o,o,e)}}const Gh=[NaN,NaN,NaN,0];let Wa;function tx(){return Wa||(Wa=Ct(1,1,void 0,{willReadFrequently:!0,desynchronized:!0})),Wa}const ex=/^rgba?\(\s*(\d+%?)\s+(\d+%?)\s+(\d+%?)(?:\s*\/\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,ix=/^rgba?\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,nx=/^rgba?\(\s*(\d+%)\s*,\s*(\d+%)\s*,\s*(\d+%)(?:\s*,\s*(\d+%|\d*\.\d+|[01]))?\s*\)$/i,rx=/^#([\da-f]{3,4}|[\da-f]{6}|[\da-f]{8})$/i;function Zs(r,t){return r.endsWith("%")?Number(r.substring(0,r.length-1))/t:Number(r)}function Qr(r){throw new Error('failed to parse "'+r+'" as color')}function ag(r){if(r.toLowerCase().startsWith("rgb")){const s=r.match(ix)||r.match(ex)||r.match(nx);if(s){const o=s[4],a=100/255;return[ft(Zs(s[1],a)+.5|0,0,255),ft(Zs(s[2],a)+.5|0,0,255),ft(Zs(s[3],a)+.5|0,0,255),o!==void 0?ft(Zs(o,100),0,1):1]}Qr(r)}if(r.startsWith("#")){if(rx.test(r)){const s=r.substring(1),o=s.length<=4?1:2,a=[0,0,0,255];for(let l=0,h=s.length;l<h;l+=o){let u=parseInt(s.substring(l,l+o),16);o===1&&(u+=u<<4),a[l/o]=u}return a[3]=a[3]/255,a}Qr(r)}const t=tx();t.fillStyle="#abcdef";let e=t.fillStyle;t.fillStyle=r,t.fillStyle===e&&(t.fillStyle="#fedcba",e=t.fillStyle,t.fillStyle=r,t.fillStyle===e&&Qr(r));const i=t.fillStyle;if(i.startsWith("#")||i.startsWith("rgba"))return ag(i);t.clearRect(0,0,1,1),t.fillRect(0,0,1,1);const n=Array.from(t.getImageData(0,0,1,1).data);return n[3]=qo(n[3]/255,3),n}function sx(r){return typeof r=="string"?r:Xh(r)}const ox=1024,Nr={};let Ya=0;function ax(r){if(r.length===4)return r;const t=r.slice();return t[3]=1,t}function Ba(r){return r>.0031308?Math.pow(r,1/2.4)*269.025-14.025:r*3294.6}function Ua(r){return r>.2068965?Math.pow(r,3):(r-4/29)*(108/841)}function Ka(r){return r>10.314724?Math.pow((r+14.025)/269.025,2.4):r/3294.6}function Va(r){return r>.0088564?Math.pow(r,1/3):r/(108/841)+4/29}function ac(r){const t=Ka(r[0]),e=Ka(r[1]),i=Ka(r[2]),n=Va(t*.222488403+e*.716873169+i*.06060791),s=500*(Va(t*.452247074+e*.399439023+i*.148375274)-n),o=200*(n-Va(t*.016863605+e*.117638439+i*.865350722)),a=Math.atan2(o,s)*(180/Math.PI);return[116*n-16,Math.sqrt(s*s+o*o),a<0?a+360:a,r[3]]}function lx(r){const t=(r[0]+16)/116,e=r[1],i=r[2]*Math.PI/180,n=Ua(t),s=Ua(t+e/500*Math.cos(i)),o=Ua(t-e/200*Math.sin(i)),a=Ba(s*3.021973625-n*1.617392459-o*.404875592),l=Ba(s*-.943766287+n*1.916279586+o*.027607165),h=Ba(s*.069407491-n*.22898585+o*1.159737864);return[ft(a+.5|0,0,255),ft(l+.5|0,0,255),ft(h+.5|0,0,255),r[3]]}function zh(r){if(r==="none")return Gh;if(Nr.hasOwnProperty(r))return Nr[r];if(Ya>=ox){let e=0;for(const i in Nr)(e++&3)===0&&(delete Nr[i],--Ya)}const t=ag(r);t.length!==4&&Qr(r);for(const e of t)isNaN(e)&&Qr(r);return Nr[r]=t,++Ya,t}function pr(r){return Array.isArray(r)?r:zh(r)}function Xh(r){let t=r[0];t!=(t|0)&&(t=t+.5|0);let e=r[1];e!=(e|0)&&(e=e+.5|0);let i=r[2];i!=(i|0)&&(i=i+.5|0);const n=r[3]===void 0?1:Math.round(r[3]*1e3)/1e3;return"rgba("+t+","+e+","+i+","+n+")"}function lc(r){return r[0]>0&&r[1]>0}function hx(r,t,e){return e===void 0&&(e=[0,0]),e[0]=r[0]*t+.5|0,e[1]=r[1]*t+.5|0,e}function $t(r,t){return Array.isArray(r)?r:(t===void 0?t=[r,r]:(t[0]=r,t[1]=r),t)}let In=0;const Xt=1<<In++,V=1<<In++,Zt=1<<In++,Fe=1<<In++,wn=1<<In++,Ur=1<<In++,js=Math.pow(2,In)-1,Wh={[Xt]:"boolean",[V]:"number",[Zt]:"string",[Fe]:"color",[wn]:"number[]",[Ur]:"size"},ux=Object.keys(Wh).map(Number).sort(di);function cx(r){return r in Wh}function Kr(r){const t=[];for(const e of ux)Vr(r,e)&&t.push(Wh[e]);return t.length===0?"untyped":t.length<3?t.join(" or "):t.slice(0,-1).join(", ")+", or "+t[t.length-1]}function Vr(r,t){return(r&t)===t}function Ci(r,t){return r===t}class vt{constructor(t,e){if(!cx(t))throw new Error(`literal expressions must have a specific type, got ${Kr(t)}`);this.type=t,this.value=e}}class fx{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function lg(){return{variables:new Set,properties:new Set,featureId:!1,geometryType:!1,mapState:!1}}function Mt(r,t,e){switch(typeof r){case"boolean":{if(Ci(t,Zt))return new vt(Zt,r?"true":"false");if(!Vr(t,Xt))throw new Error(`got a boolean, but expected ${Kr(t)}`);return new vt(Xt,r)}case"number":{if(Ci(t,Ur))return new vt(Ur,$t(r));if(Ci(t,Xt))return new vt(Xt,!!r);if(Ci(t,Zt))return new vt(Zt,r.toString());if(!Vr(t,V))throw new Error(`got a number, but expected ${Kr(t)}`);return new vt(V,r)}case"string":{if(Ci(t,Fe))return new vt(Fe,zh(r));if(Ci(t,Xt))return new vt(Xt,!!r);if(!Vr(t,Zt))throw new Error(`got a string, but expected ${Kr(t)}`);return new vt(Zt,r)}}if(!Array.isArray(r))throw new Error("expression must be an array or a primitive value");if(r.length===0)throw new Error("empty expression");if(typeof r[0]=="string")return Cx(r,t,e);for(const i of r)if(typeof i!="number")throw new Error("expected an array of numbers");if(Ci(t,Ur)){if(r.length!==2)throw new Error(`expected an array of two values for a size, got ${r.length}`);return new vt(Ur,r)}if(Ci(t,Fe)){if(r.length===3)return new vt(Fe,[...r,1]);if(r.length===4)return new vt(Fe,r);throw new Error(`expected an array of 3 or 4 values for a color, got ${r.length}`)}if(!Vr(t,wn))throw new Error(`got an array of numbers, but expected ${Kr(t)}`);return new vt(wn,r)}const S={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",LineMetric:"line-metric",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Coalesce:"coalesce",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette",ToString:"to-string",Has:"has"},dx={[S.Get]:z(B(1,1/0),hc),[S.Var]:z(B(1,1),gx),[S.Has]:z(B(1,1/0),hc),[S.Id]:z(_x,Nn),[S.Concat]:z(B(2,1/0),$(Zt)),[S.GeometryType]:z(mx,Nn),[S.LineMetric]:z(Nn),[S.Resolution]:z(Za,Nn),[S.Zoom]:z(Za,Nn),[S.Time]:z(Za,Nn),[S.Any]:z(B(2,1/0),$(Xt)),[S.All]:z(B(2,1/0),$(Xt)),[S.Not]:z(B(1,1),$(Xt)),[S.Equal]:z(B(2,2),$(js)),[S.NotEqual]:z(B(2,2),$(js)),[S.GreaterThan]:z(B(2,2),$(V)),[S.GreaterThanOrEqualTo]:z(B(2,2),$(V)),[S.LessThan]:z(B(2,2),$(V)),[S.LessThanOrEqualTo]:z(B(2,2),$(V)),[S.Multiply]:z(B(2,1/0),uc),[S.Coalesce]:z(B(2,1/0),uc),[S.Divide]:z(B(2,2),$(V)),[S.Add]:z(B(2,1/0),$(V)),[S.Subtract]:z(B(2,2),$(V)),[S.Clamp]:z(B(3,3),$(V)),[S.Mod]:z(B(2,2),$(V)),[S.Pow]:z(B(2,2),$(V)),[S.Abs]:z(B(1,1),$(V)),[S.Floor]:z(B(1,1),$(V)),[S.Ceil]:z(B(1,1),$(V)),[S.Round]:z(B(1,1),$(V)),[S.Sin]:z(B(1,1),$(V)),[S.Cos]:z(B(1,1),$(V)),[S.Atan]:z(B(1,2),$(V)),[S.Sqrt]:z(B(1,1),$(V)),[S.Match]:z(B(4,1/0),cc,yx),[S.Between]:z(B(3,3),$(V)),[S.Interpolate]:z(B(6,1/0),cc,xx),[S.Case]:z(B(3,1/0),px,vx),[S.In]:z(B(2,2),Ex),[S.Number]:z(B(1,1/0),$(js)),[S.String]:z(B(1,1/0),$(js)),[S.Array]:z(B(1,1/0),$(V)),[S.Color]:z(B(1,4),$(V)),[S.Band]:z(B(1,3),$(V)),[S.Palette]:z(B(2,2),wx),[S.ToString]:z(B(1,1),$(Xt|V|Zt|Fe))};function hc(r,t,e){const i=r.length-1,n=new Array(i);for(let s=0;s<i;++s){const o=r[s+1];switch(typeof o){case"number":{n[s]=new vt(V,o);break}case"string":{n[s]=new vt(Zt,o);break}default:throw new Error(`expected a string key or numeric array index for a get operation, got ${o}`)}s===0&&e.properties.add(String(o))}return n}function gx(r,t,e){const i=r[1];if(typeof i!="string")throw new Error("expected a string argument for var operation");return e.variables.add(i),[new vt(Zt,i)]}function _x(r,t,e){e.featureId=!0}function mx(r,t,e){e.geometryType=!0}function Za(r,t,e){e.mapState=!0}function Nn(r,t,e){const i=r[0];if(r.length!==1)throw new Error(`expected no arguments for ${i} operation`);return[]}function B(r,t){return function(e,i,n){const s=e[0],o=e.length-1;if(r===t){if(o!==r){const a=r===1?"":"s";throw new Error(`expected ${r} argument${a} for ${s}, got ${o}`)}}else if(o<r||o>t){const a=t===1/0?`${r} or more`:`${r} to ${t}`;throw new Error(`expected ${a} arguments for ${s}, got ${o}`)}}}function uc(r,t,e){const i=r.length-1,n=new Array(i);for(let s=0;s<i;++s){const o=Mt(r[s+1],t,e);n[s]=o}return n}function $(r){return function(t,e,i){const n=t.length-1,s=new Array(n);for(let o=0;o<n;++o){const a=Mt(t[o+1],r,i);s[o]=a}return s}}function px(r,t,e){const i=r[0],n=r.length-1;if(n%2===0)throw new Error(`expected an odd number of arguments for ${i}, got ${n} instead`)}function cc(r,t,e){const i=r[0],n=r.length-1;if(n%2===1)throw new Error(`expected an even number of arguments for operation ${i}, got ${n} instead`)}function yx(r,t,e){const i=r.length-1,n=Zt|V|Xt,s=Mt(r[1],n,e),o=Mt(r[r.length-1],t,e),a=new Array(i-2);for(let l=0;l<i-2;l+=2){try{const h=Mt(r[l+2],s.type,e);a[l]=h}catch(h){throw new Error(`failed to parse argument ${l+1} of match expression: ${h.message}`)}try{const h=Mt(r[l+3],o.type,e);a[l+1]=h}catch(h){throw new Error(`failed to parse argument ${l+2} of match expression: ${h.message}`)}}return[s,...a,o]}function xx(r,t,e){const i=r[1];let n;switch(i[0]){case"linear":n=1;break;case"exponential":const l=i[1];if(typeof l!="number"||l<=0)throw new Error(`expected a number base for exponential interpolation, got ${JSON.stringify(l)} instead`);n=l;break;default:throw new Error(`invalid interpolation type: ${JSON.stringify(i)}`)}const s=new vt(V,n);let o;try{o=Mt(r[2],V,e)}catch(l){throw new Error(`failed to parse argument 1 in interpolate expression: ${l.message}`)}const a=new Array(r.length-3);for(let l=0;l<a.length;l+=2){try{const h=Mt(r[l+3],V,e);a[l]=h}catch(h){throw new Error(`failed to parse argument ${l+2} for interpolate expression: ${h.message}`)}try{const h=Mt(r[l+4],t,e);a[l+1]=h}catch(h){throw new Error(`failed to parse argument ${l+3} for interpolate expression: ${h.message}`)}}return[s,o,...a]}function vx(r,t,e){const i=Mt(r[r.length-1],t,e),n=new Array(r.length-1);for(let s=0;s<n.length-1;s+=2){try{const o=Mt(r[s+1],Xt,e);n[s]=o}catch(o){throw new Error(`failed to parse argument ${s} of case expression: ${o.message}`)}try{const o=Mt(r[s+2],i.type,e);n[s+1]=o}catch(o){throw new Error(`failed to parse argument ${s+1} of case expression: ${o.message}`)}}return n[n.length-1]=i,n}function Ex(r,t,e){let i=r[2];if(!Array.isArray(i))throw new Error('the second argument for the "in" operator must be an array');let n;if(typeof i[0]=="string"){if(i[0]!=="literal")throw new Error('for the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions');if(!Array.isArray(i[1]))throw new Error('failed to parse "in" expression: the literal operator must be followed by an array');i=i[1],n=Zt}else n=V;const s=new Array(i.length);for(let a=0;a<s.length;a++)try{const l=Mt(i[a],n,e);s[a]=l}catch(l){throw new Error(`failed to parse haystack item ${a} for "in" expression: ${l.message}`)}return[Mt(r[1],n,e),...s]}function wx(r,t,e){let i;try{i=Mt(r[1],V,e)}catch(o){throw new Error(`failed to parse first argument in palette expression: ${o.message}`)}const n=r[2];if(!Array.isArray(n))throw new Error("the second argument of palette must be an array");const s=new Array(n.length);for(let o=0;o<s.length;o++){let a;try{a=Mt(n[o],Fe,e)}catch(l){throw new Error(`failed to parse color at index ${o} in palette expression: ${l.message}`)}if(!(a instanceof vt))throw new Error(`the palette color at index ${o} must be a literal value`);s[o]=a}return[i,...s]}function z(...r){return function(t,e,i){const n=t[0];let s;for(let o=0;o<r.length;o++){const a=r[o](t,e,i);if(o==r.length-1){if(!a)throw new Error("expected last argument validator to return the parsed args");s=a}}return new fx(e,n,...s)}}function Cx(r,t,e){const i=r[0],n=dx[i];if(!n)throw new Error(`unknown operator: ${i}`);return n(r,t,e)}function hg(r){if(!r)return"";const t=r.getType();switch(t){case"Point":case"LineString":case"Polygon":return t;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return t.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return hg(r.getGeometries()[0]);default:return""}}function ug(){return{variables:{},properties:{},resolution:NaN,featureId:null,geometryType:""}}function Ei(r,t,e){const i=Mt(r,t,e);return Ge(i)}function Ge(r,t){if(r instanceof vt){if(r.type===Fe&&typeof r.value=="string"){const i=zh(r.value);return function(){return i}}return function(){return r.value}}const e=r.operator;switch(e){case S.Number:case S.String:case S.Coalesce:return Tx(r);case S.Get:case S.Var:case S.Has:return Rx(r);case S.Id:return i=>i.featureId;case S.GeometryType:return i=>i.geometryType;case S.Concat:{const i=r.args.map(n=>Ge(n));return n=>"".concat(...i.map(s=>s(n).toString()))}case S.Resolution:return i=>i.resolution;case S.Any:case S.All:case S.Between:case S.In:case S.Not:return Ix(r);case S.Equal:case S.NotEqual:case S.LessThan:case S.LessThanOrEqualTo:case S.GreaterThan:case S.GreaterThanOrEqualTo:return Sx(r);case S.Multiply:case S.Divide:case S.Add:case S.Subtract:case S.Clamp:case S.Mod:case S.Pow:case S.Abs:case S.Floor:case S.Ceil:case S.Round:case S.Sin:case S.Cos:case S.Atan:case S.Sqrt:return bx(r);case S.Case:return Mx(r);case S.Match:return Ax(r);case S.Interpolate:return Px(r);case S.ToString:return Lx(r);default:throw new Error(`Unsupported operator ${e}`)}}function Tx(r,t){const e=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ge(r.args[s]);switch(e){case S.Coalesce:return s=>{for(let o=0;o<i;++o){const a=n[o](s);if(typeof a<"u"&&a!==null)return a}throw new Error("Expected one of the values to be non-null")};case S.Number:case S.String:return s=>{for(let o=0;o<i;++o){const a=n[o](s);if(typeof a===e)return a}throw new Error(`Expected one of the values to be a ${e}`)};default:throw new Error(`Unsupported assertion operator ${e}`)}}function Rx(r,t){const i=r.args[0].value;switch(r.operator){case S.Get:return n=>{const s=r.args;let o=n.properties[i];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;o=o[u]}return o};case S.Var:return n=>n.variables[i];case S.Has:return n=>{const s=r.args;if(!(i in n.properties))return!1;let o=n.properties[i];for(let a=1,l=s.length;a<l;++a){const u=s[a].value;if(!o||!Object.hasOwn(o,u))return!1;o=o[u]}return!0};default:throw new Error(`Unsupported accessor operator ${r.operator}`)}}function Sx(r,t){const e=r.operator,i=Ge(r.args[0]),n=Ge(r.args[1]);switch(e){case S.Equal:return s=>i(s)===n(s);case S.NotEqual:return s=>i(s)!==n(s);case S.LessThan:return s=>i(s)<n(s);case S.LessThanOrEqualTo:return s=>i(s)<=n(s);case S.GreaterThan:return s=>i(s)>n(s);case S.GreaterThanOrEqualTo:return s=>i(s)>=n(s);default:throw new Error(`Unsupported comparison operator ${e}`)}}function Ix(r,t){const e=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ge(r.args[s]);switch(e){case S.Any:return s=>{for(let o=0;o<i;++o)if(n[o](s))return!0;return!1};case S.All:return s=>{for(let o=0;o<i;++o)if(!n[o](s))return!1;return!0};case S.Between:return s=>{const o=n[0](s),a=n[1](s),l=n[2](s);return o>=a&&o<=l};case S.In:return s=>{const o=n[0](s);for(let a=1;a<i;++a)if(o===n[a](s))return!0;return!1};case S.Not:return s=>!n[0](s);default:throw new Error(`Unsupported logical operator ${e}`)}}function bx(r,t){const e=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ge(r.args[s]);switch(e){case S.Multiply:return s=>{let o=1;for(let a=0;a<i;++a)o*=n[a](s);return o};case S.Divide:return s=>n[0](s)/n[1](s);case S.Add:return s=>{let o=0;for(let a=0;a<i;++a)o+=n[a](s);return o};case S.Subtract:return s=>n[0](s)-n[1](s);case S.Clamp:return s=>{const o=n[0](s),a=n[1](s);if(o<a)return a;const l=n[2](s);return o>l?l:o};case S.Mod:return s=>n[0](s)%n[1](s);case S.Pow:return s=>Math.pow(n[0](s),n[1](s));case S.Abs:return s=>Math.abs(n[0](s));case S.Floor:return s=>Math.floor(n[0](s));case S.Ceil:return s=>Math.ceil(n[0](s));case S.Round:return s=>Math.round(n[0](s));case S.Sin:return s=>Math.sin(n[0](s));case S.Cos:return s=>Math.cos(n[0](s));case S.Atan:return i===2?s=>Math.atan2(n[0](s),n[1](s)):s=>Math.atan(n[0](s));case S.Sqrt:return s=>Math.sqrt(n[0](s));default:throw new Error(`Unsupported numeric operator ${e}`)}}function Mx(r,t){const e=r.args.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=Ge(r.args[n]);return n=>{for(let s=0;s<e-1;s+=2)if(i[s](n))return i[s+1](n);return i[e-1](n)}}function Ax(r,t){const e=r.args.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=Ge(r.args[n]);return n=>{const s=i[0](n);for(let o=1;o<e-1;o+=2)if(s===i[o](n))return i[o+1](n);return i[e-1](n)}}function Px(r,t){const e=r.args.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=Ge(r.args[n]);return n=>{const s=i[0](n),o=i[1](n);let a,l;for(let h=2;h<e;h+=2){const u=i[h](n);let c=i[h+1](n);const f=Array.isArray(c);if(f&&(c=ax(c)),u>=o)return h===2?c:f?Ox(s,o,a,l,u,c):Zr(s,o,a,l,u,c);a=u,l=c}return l}}function Lx(r,t){const e=r.operator,i=r.args.length,n=new Array(i);for(let s=0;s<i;++s)n[s]=Ge(r.args[s]);switch(e){case S.ToString:return s=>{const o=n[0](s);return r.args[0].type===Fe?Xh(o):o.toString()};default:throw new Error(`Unsupported convert operator ${e}`)}}function Zr(r,t,e,i,n,s){const o=n-e;if(o===0)return i;const a=t-e,l=r===1?a/o:(Math.pow(r,a)-1)/(Math.pow(r,o)-1);return i+l*(s-i)}function Ox(r,t,e,i,n,s){if(n-e===0)return i;const a=ac(i),l=ac(s);let h=l[2]-a[2];h>180?h-=360:h<-180&&(h+=360);const u=[Zr(r,t,e,a[0],n,l[0]),Zr(r,t,e,a[1],n,l[1]),a[2]+Zr(r,t,e,0,n,h),Zr(r,t,e,i[3],n,s[3])];return lx(u)}const U={IDLE:0,LOADING:1,LOADED:2,ERROR:3};function Dx(r,t,e){const i=r;let n=!0,s=!1,o=!1;const a=[wo(i,W.LOAD,function(){o=!0,s||t()})];return i.src&&Ed?(s=!0,i.decode().then(function(){n&&t()}).catch(function(l){n&&(o?t():e())})):a.push(wo(i,W.ERROR,e)),function(){n=!1,a.forEach(lt)}}function Fx(r,t){return new Promise((e,i)=>{function n(){o(),e(r)}function s(){o(),i(new Error("Image load error"))}function o(){r.removeEventListener("load",n),r.removeEventListener("error",s)}r.addEventListener("load",n),r.addEventListener("error",s)})}function kx(r,t){return t&&(r.src=t),r.src&&Ed?new Promise((e,i)=>r.decode().then(()=>e(r)).catch(n=>r.complete&&r.width?e(r):i(n))):Fx(r)}class Nx{constructor(){this.cache_={},this.patternCache_={},this.cacheSize_=0,this.maxCacheSize_=1024}clear(){this.cache_={},this.patternCache_={},this.cacheSize_=0}canExpireCache(){return this.cacheSize_>this.maxCacheSize_}expire(){if(this.canExpireCache()){let t=0;for(const e in this.cache_){const i=this.cache_[e];(t++&3)===0&&!i.hasListener()&&(delete this.cache_[e],delete this.patternCache_[e],--this.cacheSize_)}}}get(t,e,i){const n=ja(t,e,i);return n in this.cache_?this.cache_[n]:null}getPattern(t,e,i){const n=ja(t,e,i);return n in this.patternCache_?this.patternCache_[n]:null}set(t,e,i,n,s){const o=ja(t,e,i),a=o in this.cache_;this.cache_[o]=n,s&&(n.getImageState()===U.IDLE&&n.load(),n.getImageState()===U.LOADING?n.ready().then(()=>{this.patternCache_[o]=Mo().createPattern(n.getImage(1),"repeat")}):this.patternCache_[o]=Mo().createPattern(n.getImage(1),"repeat")),a||++this.cacheSize_}setSize(t){this.maxCacheSize_=t,this.expire()}}function ja(r,t,e){const i=e?pr(e):"null";return t+":"+r+":"+i}const Ie=new Nx;let Gr=null;class cg extends Ho{constructor(t,e,i,n,s){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=s,this.imageState_=n===void 0?U.IDLE:n,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_,this.ready_=null}initializeImage_(){this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(this.tainted_===void 0&&this.imageState_===U.LOADED){Gr||(Gr=Ct(1,1,void 0,{willReadFrequently:!0})),Gr.drawImage(this.image_,0,0);try{Gr.getImageData(0,0,1,1),this.tainted_=!1}catch{Gr=null,this.tainted_=!0}}return this.tainted_===!0}dispatchChangeEvent_(){this.dispatchEvent(W.CHANGE)}handleImageError_(){this.imageState_=U.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=U.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_)if(this.isTainted_()){const t=this.size_[0],e=this.size_[1],i=Ct(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_;return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===U.IDLE){this.image_||this.initializeImage_(),this.imageState_=U.LOADING;try{this.src_!==void 0&&(this.image_.src=this.src_)}catch{this.handleImageError_()}this.image_ instanceof HTMLImageElement&&kx(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==U.LOADED)return;const e=this.image_,i=Ct(Math.ceil(e.width*t),Math.ceil(e.height*t)),n=i.canvas;i.scale(t,t),i.drawImage(e,0,0),i.globalCompositeOperation="multiply",i.fillStyle=sx(this.color_),i.fillRect(0,0,n.width/t,n.height/t),i.globalCompositeOperation="destination-in",i.drawImage(e,0,0),this.canvas_[t]=n}ready(){return this.ready_||(this.ready_=new Promise(t=>{if(this.imageState_===U.LOADED||this.imageState_===U.ERROR)t();else{const e=()=>{(this.imageState_===U.LOADED||this.imageState_===U.ERROR)&&(this.removeEventListener(W.CHANGE,e),t())};this.addEventListener(W.CHANGE,e)}})),this.ready_}}function Yh(r,t,e,i,n,s){let o=t===void 0?void 0:Ie.get(t,e,n);return o||(o=new cg(r,r&&"src"in r?r.src||void 0:t,e,i,n),Ie.set(t,e,n,o,s)),s&&o&&!Ie.getPattern(t,e,n)&&Ie.set(t,e,n,o,s),o}function qe(r){return r?Array.isArray(r)?Xh(r):typeof r=="object"&&"src"in r?Gx(r):r:null}function Gx(r){if(!r.offset||!r.size)return Ie.getPattern(r.src,"anonymous",r.color);const t=r.src+":"+r.offset,e=Ie.getPattern(t,void 0,r.color);if(e)return e;const i=Ie.get(r.src,"anonymous",null);if(i.getImageState()!==U.LOADED)return null;const n=Ct(r.size[0],r.size[1]);return n.drawImage(i.getImage(1),r.offset[0],r.offset[1],r.size[0],r.size[1],0,0,r.size[0],r.size[1]),Yh(n.canvas,t,void 0,U.LOADED,r.color,!0),Ie.getPattern(t,void 0,r.color)}const fg="10px sans-serif",jt="#000",yr="round",gi=[],_i=0,xr="round",ps=10,ys="#000",xs="center",Ao="middle",hn=[0,0,0,0],vs=1,ai=new ze;let Un=null,Ol;const Dl={},zx=function(){const t="32px ",e=["monospace","serif"],i=e.length,n="wmytzilWMYTZIL@#/&?$%10";let s,o;function a(h,u,c){let f=!0;for(let d=0;d<i;++d){const _=e[d];if(o=Po(h+" "+u+" "+t+_,n),c!=_){const g=Po(h+" "+u+" "+t+c+","+_,n);f=f&&g!=o}}return!!f}function l(){let h=!0;const u=ai.getKeys();for(let c=0,f=u.length;c<f;++c){const d=u[c];if(ai.get(d)<100){const[_,g,m]=d.split(`
`);a(_,g,m)?(Rs(Dl),Un=null,Ol=void 0,ai.set(d,100)):(ai.set(d,ai.get(d)+1,!0),h=!1)}}h&&(clearInterval(s),s=void 0)}return function(h){const u=Jd(h);if(!u)return;const c=u.families;for(let f=0,d=c.length;f<d;++f){const _=c[f],g=u.style+`
`+u.weight+`
`+_;ai.get(g)===void 0&&(ai.set(g,100,!0),a(u.style,u.weight,_)||(ai.set(g,0,!0),s===void 0&&(s=setInterval(l,32))))}}}(),Xx=function(){let r;return function(t){let e=Dl[t];if(e==null){if(vd){const i=Jd(t),n=dg(t,"g");e=(isNaN(Number(i.lineHeight))?1.2:Number(i.lineHeight))*(n.actualBoundingBoxAscent+n.actualBoundingBoxDescent)}else r||(r=document.createElement("div"),r.innerHTML="M",r.style.minHeight="0",r.style.maxHeight="none",r.style.height="auto",r.style.padding="0",r.style.border="none",r.style.position="absolute",r.style.display="block",r.style.left="-99999px"),r.style.font=t,document.body.appendChild(r),e=r.offsetHeight,document.body.removeChild(r);Dl[t]=e}return e}}();function dg(r,t){return Un||(Un=Ct(1,1)),r!=Ol&&(Un.font=r,Ol=Un.font),Un.measureText(t)}function Po(r,t){return dg(r,t).width}function fc(r,t,e){if(t in e)return e[t];const i=t.split(`
`).reduce((n,s)=>Math.max(n,Po(r,s)),0);return e[t]=i,i}function Wx(r,t){const e=[],i=[],n=[];let s=0,o=0,a=0,l=0;for(let h=0,u=t.length;h<=u;h+=2){const c=t[h];if(c===`
`||h===u){s=Math.max(s,o),n.push(o),o=0,a+=l,l=0;continue}const f=t[h+1]||r.font,d=Po(f,c);e.push(d),o+=d;const _=Xx(f);i.push(_),l=Math.max(l,_)}return{width:s,height:a,widths:e,heights:i,lineWidths:n}}function Yx(r,t,e,i,n,s,o,a,l,h,u){r.save(),e!==1&&(r.globalAlpha===void 0?r.globalAlpha=c=>c.globalAlpha*=e:r.globalAlpha*=e),t&&r.transform.apply(r,t),i.contextInstructions?(r.translate(l,h),r.scale(u[0],u[1]),Bx(i,r)):u[0]<0||u[1]<0?(r.translate(l,h),r.scale(u[0],u[1]),r.drawImage(i,n,s,o,a,0,0,o,a)):r.drawImage(i,n,s,o,a,l,h,o*u[0],a*u[1]),r.restore()}function Bx(r,t){const e=r.contextInstructions;for(let i=0,n=e.length;i<n;i+=2)Array.isArray(e[i+1])?t[e[i]].apply(t,e[i+1]):t[e[i]]=e[i+1]}class la{constructor(t){this.opacity_=t.opacity,this.rotateWithView_=t.rotateWithView,this.rotation_=t.rotation,this.scale_=t.scale,this.scaleArray_=$t(t.scale),this.displacement_=t.displacement,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new la({opacity:this.getOpacity(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getOpacity(){return this.opacity_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getDisplacement(){return this.displacement_}getDeclutterMode(){return this.declutterMode_}getAnchor(){return q()}getImage(t){return q()}getHitDetectionImage(){return q()}getPixelRatio(t){return 1}getImageState(){return q()}getImageSize(){return q()}getOrigin(){return q()}getSize(){return q()}setDisplacement(t){this.displacement_=t}setOpacity(t){this.opacity_=t}setRotateWithView(t){this.rotateWithView_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=$t(t)}listenImageChange(t){q()}load(){q()}unlistenImageChange(t){q()}ready(){return Promise.resolve()}}class ha extends la{constructor(t){super({opacity:1,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,rotation:t.rotation!==void 0?t.rotation:0,scale:t.scale!==void 0?t.scale:1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode}),this.hitDetectionCanvas_=null,this.fill_=t.fill!==void 0?t.fill:null,this.origin_=[0,0],this.points_=t.points,this.radius=t.radius,this.radius2_=t.radius2,this.angle_=t.angle!==void 0?t.angle:0,this.stroke_=t.stroke!==void 0?t.stroke:null,this.size_,this.renderOptions_,this.imageState_=this.fill_&&this.fill_.loading()?U.LOADING:U.LOADED,this.imageState_===U.LOADING&&this.ready().then(()=>this.imageState_=U.LOADED),this.render()}clone(){const t=this.getScale(),e=new ha({fill:this.getFill()?this.getFill().clone():void 0,points:this.getPoints(),radius:this.getRadius(),radius2:this.getRadius2(),angle:this.getAngle(),stroke:this.getStroke()?this.getStroke().clone():void 0,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}getAnchor(){const t=this.size_,e=this.getDisplacement(),i=this.getScaleArray();return[t[0]/2-e[0]/i[0],t[1]/2+e[1]/i[1]]}getAngle(){return this.angle_}getFill(){return this.fill_}setFill(t){this.fill_=t,this.render()}getHitDetectionImage(){return this.hitDetectionCanvas_||(this.hitDetectionCanvas_=this.createHitDetectionCanvas_(this.renderOptions_)),this.hitDetectionCanvas_}getImage(t){var s,o;const e=(s=this.fill_)==null?void 0:s.getKey(),i=`${t},${this.angle_},${this.radius},${this.radius2_},${this.points_},${e}`+Object.values(this.renderOptions_).join(",");let n=(o=Ie.get(i,null,null))==null?void 0:o.getImage(1);if(!n){const a=this.renderOptions_,l=Math.ceil(a.size*t),h=Ct(l,l);this.draw_(a,h,t),n=h.canvas,Ie.set(i,null,null,new cg(n,void 0,null,U.LOADED,null))}return n}getPixelRatio(t){return t}getImageSize(){return this.size_}getImageState(){return this.imageState_}getOrigin(){return this.origin_}getPoints(){return this.points_}getRadius(){return this.radius}getRadius2(){return this.radius2_}getSize(){return this.size_}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t,this.render()}listenImageChange(t){}load(){}unlistenImageChange(t){}calculateLineJoinSize_(t,e,i){if(e===0||this.points_===1/0||t!=="bevel"&&t!=="miter")return e;let n=this.radius,s=this.radius2_===void 0?n:this.radius2_;if(n<s){const C=n;n=s,s=C}const o=this.radius2_===void 0?this.points_:this.points_*2,a=2*Math.PI/o,l=s*Math.sin(a),h=Math.sqrt(s*s-l*l),u=n-h,c=Math.sqrt(l*l+u*u),f=c/l;if(t==="miter"&&f<=i)return f*e;const d=e/2/f,_=e/2*(u/c),m=Math.sqrt((n+d)*(n+d)+_*_)-n;if(this.radius2_===void 0||t==="bevel")return m*2;const p=n*Math.sin(a),y=Math.sqrt(n*n-p*p),E=s-y,x=Math.sqrt(p*p+E*E)/p;if(x<=i){const C=x*e/2-s-n;return 2*Math.max(m,C)}return m*2}createRenderOptions(){let t=yr,e=xr,i=0,n=null,s=0,o,a=0;this.stroke_&&(o=qe(this.stroke_.getColor()??ys),a=this.stroke_.getWidth()??vs,n=this.stroke_.getLineDash(),s=this.stroke_.getLineDashOffset()??0,e=this.stroke_.getLineJoin()??xr,t=this.stroke_.getLineCap()??yr,i=this.stroke_.getMiterLimit()??ps);const l=this.calculateLineJoinSize_(e,a,i),h=Math.max(this.radius,this.radius2_||0),u=Math.ceil(2*h+l);return{strokeStyle:o,strokeWidth:a,size:u,lineCap:t,lineDash:n,lineDashOffset:s,lineJoin:e,miterLimit:i}}render(){this.renderOptions_=this.createRenderOptions();const t=this.renderOptions_.size;this.hitDetectionCanvas_=null,this.size_=[t,t]}draw_(t,e,i){if(e.scale(i,i),e.translate(t.size/2,t.size/2),this.createPath_(e),this.fill_){let n=this.fill_.getColor();n===null&&(n=jt),e.fillStyle=qe(n),e.fill()}t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineCap=t.lineCap,e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}createHitDetectionCanvas_(t){let e;if(this.fill_){let i=this.fill_.getColor(),n=0;typeof i=="string"&&(i=pr(i)),i===null?n=1:Array.isArray(i)&&(n=i.length===4?i[3]:1),n===0&&(e=Ct(t.size,t.size),this.drawHitDetectionCanvas_(t,e))}return e?e.canvas:this.getImage(1)}createPath_(t){let e=this.points_;const i=this.radius;if(e===1/0)t.arc(0,0,i,0,2*Math.PI);else{const n=this.radius2_===void 0?i:this.radius2_;this.radius2_!==void 0&&(e*=2);const s=this.angle_-Math.PI/2,o=2*Math.PI/e;for(let a=0;a<e;a++){const l=s+a*o,h=a%2===0?i:n;t.lineTo(h*Math.cos(l),h*Math.sin(l))}t.closePath()}}drawHitDetectionCanvas_(t,e){e.translate(t.size/2,t.size/2),this.createPath_(e),e.fillStyle=jt,e.fill(),t.strokeStyle&&(e.strokeStyle=t.strokeStyle,e.lineWidth=t.strokeWidth,t.lineDash&&(e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset),e.lineJoin=t.lineJoin,e.miterLimit=t.miterLimit,e.stroke())}ready(){return this.fill_?this.fill_.ready():Promise.resolve()}}class ua extends ha{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:t.scale!==void 0?t.scale:1,rotation:t.rotation!==void 0?t.rotation:0,rotateWithView:t.rotateWithView!==void 0?t.rotateWithView:!1,displacement:t.displacement!==void 0?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){const t=this.getScale(),e=new ua({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius=t,this.render()}}class As{constructor(t){t=t||{},this.patternImage_=null,this.color_=null,t.color!==void 0&&this.setColor(t.color)}clone(){const t=this.getColor();return new As({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){if(t!==null&&typeof t=="object"&&"src"in t){const e=Yh(null,t.src,"anonymous",void 0,t.offset?null:t.color?t.color:null,!(t.offset&&t.size));e.ready().then(()=>{this.patternImage_=null}),e.getImageState()===U.IDLE&&e.load(),e.getImageState()===U.LOADING&&(this.patternImage_=e)}this.color_=t}getKey(){const t=this.getColor();return t?t instanceof CanvasPattern||t instanceof CanvasGradient?J(t):typeof t=="object"&&"src"in t?t.src+":"+t.offset:pr(t).toString():""}loading(){return!!this.patternImage_}ready(){return this.patternImage_?this.patternImage_.ready():Promise.resolve()}}function dc(r,t,e,i){return e!==void 0&&i!==void 0?[e/r,i/t]:e!==void 0?e/r:i!==void 0?i/t:1}class Ps extends la{constructor(t){t=t||{};const e=t.opacity!==void 0?t.opacity:1,i=t.rotation!==void 0?t.rotation:0,n=t.scale!==void 0?t.scale:1,s=t.rotateWithView!==void 0?t.rotateWithView:!1;super({opacity:e,rotation:i,scale:n,displacement:t.displacement!==void 0?t.displacement:[0,0],rotateWithView:s,declutterMode:t.declutterMode}),this.anchor_=t.anchor!==void 0?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=t.anchorOrigin!==void 0?t.anchorOrigin:"top-left",this.anchorXUnits_=t.anchorXUnits!==void 0?t.anchorXUnits:"fraction",this.anchorYUnits_=t.anchorYUnits!==void 0?t.anchorYUnits:"fraction",this.crossOrigin_=t.crossOrigin!==void 0?t.crossOrigin:null;const o=t.img!==void 0?t.img:null;let a=t.src;Q(!(a!==void 0&&o),"`image` and `src` cannot be provided at the same time"),(a===void 0||a.length===0)&&o&&(a=o.src||J(o)),Q(a!==void 0&&a.length>0,"A defined and non-empty `src` or `image` must be provided"),Q(!((t.width!==void 0||t.height!==void 0)&&t.scale!==void 0),"`width` or `height` cannot be provided together with `scale`");let l;if(t.src!==void 0?l=U.IDLE:o!==void 0&&("complete"in o?o.complete?l=o.src?U.LOADED:U.IDLE:l=U.LOADING:l=U.LOADED),this.color_=t.color!==void 0?pr(t.color):null,this.iconImage_=Yh(o,a,this.crossOrigin_,l,this.color_),this.offset_=t.offset!==void 0?t.offset:[0,0],this.offsetOrigin_=t.offsetOrigin!==void 0?t.offsetOrigin:"top-left",this.origin_=null,this.size_=t.size!==void 0?t.size:null,this.initialOptions_,t.width!==void 0||t.height!==void 0){let h,u;if(t.size)[h,u]=t.size;else{const c=this.getImage(1);if(c.width&&c.height)h=c.width,u=c.height;else if(c instanceof HTMLImageElement){this.initialOptions_=t;const f=()=>{if(this.unlistenImageChange(f),!this.initialOptions_)return;const d=this.iconImage_.getSize();this.setScale(dc(d[0],d[1],t.width,t.height))};this.listenImageChange(f);return}}h!==void 0&&this.setScale(dc(h,u,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):(t=this.getScale(),t=Array.isArray(t)?t.slice():t),new Ps({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:this.size_!==null?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;const n=this.getSize();if(this.anchorXUnits_=="fraction"||this.anchorYUnits_=="fraction"){if(!n)return null;t=this.anchor_.slice(),this.anchorXUnits_=="fraction"&&(t[0]*=n[0]),this.anchorYUnits_=="fraction"&&(t[1]*=n[1])}if(this.anchorOrigin_!="top-left"){if(!n)return null;t===this.anchor_&&(t=this.anchor_.slice()),(this.anchorOrigin_=="top-right"||this.anchorOrigin_=="bottom-right")&&(t[0]=-t[0]+n[0]),(this.anchorOrigin_=="bottom-left"||this.anchorOrigin_=="bottom-right")&&(t[1]=-t[1]+n[1])}this.normalizedAnchor_=t}const e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if(this.offsetOrigin_!="top-left"){const e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),(this.offsetOrigin_=="top-right"||this.offsetOrigin_=="bottom-right")&&(t[0]=i[0]-e[0]-t[0]),(this.offsetOrigin_=="bottom-left"||this.offsetOrigin_=="bottom-right")&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){const t=this.getScaleArray();if(this.size_)return this.size_[0]*t[0];if(this.iconImage_.getImageState()==U.LOADED)return this.iconImage_.getSize()[0]*t[0]}getHeight(){const t=this.getScaleArray();if(this.size_)return this.size_[1]*t[1];if(this.iconImage_.getImageState()==U.LOADED)return this.iconImage_.getSize()[1]*t[1]}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(W.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(W.CHANGE,t)}ready(){return this.iconImage_.ready()}}class ca{constructor(t){t=t||{},this.color_=t.color!==void 0?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=t.lineDash!==void 0?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){const t=this.getColor();return new ca({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}class Wi{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=gc,t.geometry!==void 0&&this.setGeometry(t.geometry),this.fill_=t.fill!==void 0?t.fill:null,this.image_=t.image!==void 0?t.image:null,this.renderer_=t.renderer!==void 0?t.renderer:null,this.hitDetectionRenderer_=t.hitDetectionRenderer!==void 0?t.hitDetectionRenderer:null,this.stroke_=t.stroke!==void 0?t.stroke:null,this.text_=t.text!==void 0?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&typeof t=="object"&&(t=t.clone()),new Wi({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){typeof t=="function"?this.geometryFunction_=t:typeof t=="string"?this.geometryFunction_=function(e){return e.get(t)}:t?t!==void 0&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=gc,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function Ux(r){let t;if(typeof r=="function")t=r;else{let e;Array.isArray(r)?e=r:(Q(typeof r.getZIndex=="function","Expected an `Style` or an array of `Style`"),e=[r]),t=function(){return e}}return t}let Ha=null;function gg(r,t){if(!Ha){const e=new As({color:"rgba(255,255,255,0.4)"}),i=new ca({color:"#3399CC",width:1.25});Ha=[new Wi({image:new ua({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}return Ha}function gc(r){return r.getGeometry()}const Kx="#333";let Vx=class _g{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.keepUpright_=t.keepUpright,this.scale_=t.scale,this.scaleArray_=$t(t.scale!==void 0?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=t.fill!==void 0?t.fill:new As({color:Kx}),this.maxAngle_=t.maxAngle!==void 0?t.maxAngle:Math.PI/4,this.placement_=t.placement!==void 0?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=t.stroke!==void 0?t.stroke:null,this.offsetX_=t.offsetX!==void 0?t.offsetX:0,this.offsetY_=t.offsetY!==void 0?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=t.padding===void 0?null:t.padding,this.declutterMode_=t.declutterMode}clone(){const t=this.getScale();return new _g({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),keepUpright:this.getKeepUpright(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0,declutterMode:this.getDeclutterMode()})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getKeepUpright(){return this.keepUpright_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}getDeclutterMode(){return this.declutterMode_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setKeepUpright(t){this.keepUpright_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=$t(t!==void 0?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}};function Zx(r){return!0}function jx(r){const t=lg(),e=Hx(r,t),i=ug();return function(n,s){if(i.properties=n.getPropertiesInternal(),i.resolution=s,t.featureId){const o=n.getId();o!==void 0?i.featureId=o:i.featureId=null}return t.geometryType&&(i.geometryType=hg(n.getGeometry())),e(i)}}function _c(r){const t=lg(),e=r.length,i=new Array(e);for(let o=0;o<e;++o)i[o]=Fl(r[o],t);const n=ug(),s=new Array(e);return function(o,a){if(n.properties=o.getPropertiesInternal(),n.resolution=a,t.featureId){const h=o.getId();h!==void 0?n.featureId=h:n.featureId=null}let l=0;for(let h=0;h<e;++h){const u=i[h](n);u&&(s[l]=u,l+=1)}return s.length=l,s}}function Hx(r,t){const e=r.length,i=new Array(e);for(let n=0;n<e;++n){const s=r[n],o="filter"in s?Ei(s.filter,Xt,t):Zx;let a;if(Array.isArray(s.style)){const l=s.style.length;a=new Array(l);for(let h=0;h<l;++h)a[h]=Fl(s.style[h],t)}else a=[Fl(s.style,t)];i[n]={filter:o,styles:a}}return function(n){const s=[];let o=!1;for(let a=0;a<e;++a){const l=i[a].filter;if(l(n)&&!(r[a].else&&o)){o=!0;for(const h of i[a].styles){const u=h(n);u&&s.push(u)}}}return s}}function Fl(r,t){const e=Es(r,"",t),i=ws(r,"",t),n=qx(r,t),s=$x(r,t),o=qt(r,"z-index",t);if(!e&&!i&&!n&&!s&&!gr(r))throw new Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(r));const a=new Wi;return function(l){let h=!0;if(e){const u=e(l);u&&(h=!1),a.setFill(u)}if(i){const u=i(l);u&&(h=!1),a.setStroke(u)}if(n){const u=n(l);u&&(h=!1),a.setText(u)}if(s){const u=s(l);u&&(h=!1),a.setImage(u)}return o&&a.setZIndex(o(l)),h?null:a}}function Es(r,t,e){let i;if(t+"fill-pattern-src"in r)i=ev(r,t+"fill-",e);else{if(r[t+"fill-color"]==="none")return s=>null;i=Bh(r,t+"fill-color",e)}if(!i)return null;const n=new As;return function(s){const o=i(s);return o===Gh?null:(n.setColor(o),n)}}function ws(r,t,e){const i=qt(r,t+"stroke-width",e),n=Bh(r,t+"stroke-color",e);if(!i&&!n)return null;const s=ci(r,t+"stroke-line-cap",e),o=ci(r,t+"stroke-line-join",e),a=mg(r,t+"stroke-line-dash",e),l=qt(r,t+"stroke-line-dash-offset",e),h=qt(r,t+"stroke-miter-limit",e),u=new ca;return function(c){if(n){const f=n(c);if(f===Gh)return null;u.setColor(f)}if(i&&u.setWidth(i(c)),s){const f=s(c);if(f!=="butt"&&f!=="round"&&f!=="square")throw new Error("Expected butt, round, or square line cap");u.setLineCap(f)}if(o){const f=o(c);if(f!=="bevel"&&f!=="round"&&f!=="miter")throw new Error("Expected bevel, round, or miter line join");u.setLineJoin(f)}return a&&u.setLineDash(a(c)),l&&u.setLineDashOffset(l(c)),h&&u.setMiterLimit(h(c)),u}}function qx(r,t){const e="text-",i=ci(r,e+"value",t);if(!i)return null;const n=Es(r,e,t),s=Es(r,e+"background-",t),o=ws(r,e,t),a=ws(r,e+"background-",t),l=ci(r,e+"font",t),h=qt(r,e+"max-angle",t),u=qt(r,e+"offset-x",t),c=qt(r,e+"offset-y",t),f=sr(r,e+"overflow",t),d=ci(r,e+"placement",t),_=qt(r,e+"repeat",t),g=fa(r,e+"scale",t),m=sr(r,e+"rotate-with-view",t),p=qt(r,e+"rotation",t),y=ci(r,e+"align",t),E=ci(r,e+"justify",t),v=ci(r,e+"baseline",t),x=sr(r,e+"keep-upright",t),C=mg(r,e+"padding",t),R=da(r,e+"declutter-mode"),T=new Vx({declutterMode:R});return function(w){if(T.setText(i(w)),n&&T.setFill(n(w)),s&&T.setBackgroundFill(s(w)),o&&T.setStroke(o(w)),a&&T.setBackgroundStroke(a(w)),l&&T.setFont(l(w)),h&&T.setMaxAngle(h(w)),u&&T.setOffsetX(u(w)),c&&T.setOffsetY(c(w)),f&&T.setOverflow(f(w)),d){const I=d(w);if(I!=="point"&&I!=="line")throw new Error("Expected point or line for text-placement");T.setPlacement(I)}if(_&&T.setRepeat(_(w)),g&&T.setScale(g(w)),m&&T.setRotateWithView(m(w)),p&&T.setRotation(p(w)),y){const I=y(w);if(I!=="left"&&I!=="center"&&I!=="right"&&I!=="end"&&I!=="start")throw new Error("Expected left, right, center, start, or end for text-align");T.setTextAlign(I)}if(E){const I=E(w);if(I!=="left"&&I!=="right"&&I!=="center")throw new Error("Expected left, right, or center for text-justify");T.setJustify(I)}if(v){const I=v(w);if(I!=="bottom"&&I!=="top"&&I!=="middle"&&I!=="alphabetic"&&I!=="hanging")throw new Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");T.setTextBaseline(I)}return C&&T.setPadding(C(w)),x&&T.setKeepUpright(x(w)),T}}function $x(r,t){return"icon-src"in r?Jx(r,t):"shape-points"in r?Qx(r,t):"circle-radius"in r?tv(r,t):null}function Jx(r,t){const e="icon-",i=e+"src",n=pg(r[i],i),s=Lo(r,e+"anchor",t),o=fa(r,e+"scale",t),a=qt(r,e+"opacity",t),l=Lo(r,e+"displacement",t),h=qt(r,e+"rotation",t),u=sr(r,e+"rotate-with-view",t),c=pc(r,e+"anchor-origin"),f=yc(r,e+"anchor-x-units"),d=yc(r,e+"anchor-y-units"),_=sv(r,e+"color"),g=nv(r,e+"cross-origin"),m=rv(r,e+"offset"),p=pc(r,e+"offset-origin"),y=Oo(r,e+"width"),E=Oo(r,e+"height"),v=iv(r,e+"size"),x=da(r,e+"declutter-mode"),C=new Ps({src:n,anchorOrigin:c,anchorXUnits:f,anchorYUnits:d,color:_,crossOrigin:g,offset:m,offsetOrigin:p,height:E,width:y,size:v,declutterMode:x});return function(R){return a&&C.setOpacity(a(R)),l&&C.setDisplacement(l(R)),h&&C.setRotation(h(R)),u&&C.setRotateWithView(u(R)),o&&C.setScale(o(R)),s&&C.setAnchor(s(R)),C}}function Qx(r,t){const e="shape-",i=e+"points",n=e+"radius",s=kl(r[i],i),o=kl(r[n],n),a=Es(r,e,t),l=ws(r,e,t),h=fa(r,e+"scale",t),u=Lo(r,e+"displacement",t),c=qt(r,e+"rotation",t),f=sr(r,e+"rotate-with-view",t),d=Oo(r,e+"radius2"),_=Oo(r,e+"angle"),g=da(r,e+"declutter-mode"),m=new ha({points:s,radius:o,radius2:d,angle:_,declutterMode:g});return function(p){return a&&m.setFill(a(p)),l&&m.setStroke(l(p)),u&&m.setDisplacement(u(p)),c&&m.setRotation(c(p)),f&&m.setRotateWithView(f(p)),h&&m.setScale(h(p)),m}}function tv(r,t){const e="circle-",i=Es(r,e,t),n=ws(r,e,t),s=qt(r,e+"radius",t),o=fa(r,e+"scale",t),a=Lo(r,e+"displacement",t),l=qt(r,e+"rotation",t),h=sr(r,e+"rotate-with-view",t),u=da(r,e+"declutter-mode"),c=new ua({radius:5,declutterMode:u});return function(f){return s&&c.setRadius(s(f)),i&&c.setFill(i(f)),n&&c.setStroke(n(f)),a&&c.setDisplacement(a(f)),l&&c.setRotation(l(f)),h&&c.setRotateWithView(h(f)),o&&c.setScale(o(f)),c}}function qt(r,t,e){if(!(t in r))return;const i=Ei(r[t],V,e);return function(n){return kl(i(n),t)}}function ci(r,t,e){if(!(t in r))return null;const i=Ei(r[t],Zt,e);return function(n){return pg(i(n),t)}}function ev(r,t,e){const i=ci(r,t+"pattern-src",e),n=mc(r,t+"pattern-offset",e),s=mc(r,t+"pattern-size",e),o=Bh(r,t+"color",e);return function(a){return{src:i(a),offset:n&&n(a),size:s&&s(a),color:o&&o(a)}}}function sr(r,t,e){if(!(t in r))return null;const i=Ei(r[t],Xt,e);return function(n){const s=i(n);if(typeof s!="boolean")throw new Error(`Expected a boolean for ${t}`);return s}}function Bh(r,t,e){if(!(t in r))return null;const i=Ei(r[t],Fe,e);return function(n){return yg(i(n),t)}}function mg(r,t,e){if(!(t in r))return null;const i=Ei(r[t],wn,e);return function(n){return Ls(i(n),t)}}function Lo(r,t,e){if(!(t in r))return null;const i=Ei(r[t],wn,e);return function(n){const s=Ls(i(n),t);if(s.length!==2)throw new Error(`Expected two numbers for ${t}`);return s}}function mc(r,t,e){if(!(t in r))return null;const i=Ei(r[t],wn,e);return function(n){return xg(i(n),t)}}function fa(r,t,e){if(!(t in r))return null;const i=Ei(r[t],wn|V,e);return function(n){return ov(i(n),t)}}function Oo(r,t){const e=r[t];if(e!==void 0){if(typeof e!="number")throw new Error(`Expected a number for ${t}`);return e}}function iv(r,t){const e=r[t];if(e!==void 0){if(typeof e=="number")return $t(e);if(!Array.isArray(e))throw new Error(`Expected a number or size array for ${t}`);if(e.length!==2||typeof e[0]!="number"||typeof e[1]!="number")throw new Error(`Expected a number or size array for ${t}`);return e}}function nv(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);return e}}function pc(r,t){const e=r[t];if(e!==void 0){if(e!=="bottom-left"&&e!=="bottom-right"&&e!=="top-left"&&e!=="top-right")throw new Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${t}`);return e}}function yc(r,t){const e=r[t];if(e!==void 0){if(e!=="pixels"&&e!=="fraction")throw new Error(`Expected pixels or fraction for ${t}`);return e}}function rv(r,t){const e=r[t];if(e!==void 0)return Ls(e,t)}function da(r,t){const e=r[t];if(e!==void 0){if(typeof e!="string")throw new Error(`Expected a string for ${t}`);if(e!=="declutter"&&e!=="obstacle"&&e!=="none")throw new Error(`Expected declutter, obstacle, or none for ${t}`);return e}}function sv(r,t){const e=r[t];if(e!==void 0)return yg(e,t)}function Ls(r,t){if(!Array.isArray(r))throw new Error(`Expected an array for ${t}`);const e=r.length;for(let i=0;i<e;++i)if(typeof r[i]!="number")throw new Error(`Expected an array of numbers for ${t}`);return r}function pg(r,t){if(typeof r!="string")throw new Error(`Expected a string for ${t}`);return r}function kl(r,t){if(typeof r!="number")throw new Error(`Expected a number for ${t}`);return r}function yg(r,t){if(typeof r=="string")return r;const e=Ls(r,t),i=e.length;if(i<3||i>4)throw new Error(`Expected a color with 3 or 4 values for ${t}`);return e}function xg(r,t){const e=Ls(r,t);if(e.length!==2)throw new Error(`Expected an array of two numbers for ${t}`);return e}function ov(r,t){return typeof r=="number"?r:xg(r,t)}const xc={RENDER_ORDER:"renderOrder"};class vg extends aa{constructor(t){t=t||{};const e=Object.assign({},t);delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=t.declutter?String(t.declutter):void 0,this.renderBuffer_=t.renderBuffer!==void 0?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=t.updateWhileAnimating!==void 0?t.updateWhileAnimating:!1,this.updateWhileInteracting_=t.updateWhileInteracting!==void 0?t.updateWhileInteracting:!1}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(xc.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(t,e){const i=this.getDeclutter();i in t.declutter||(t.declutter[i]=new og(9)),this.getRenderer().renderDeclutter(t,e)}setRenderOrder(t){this.set(xc.RENDER_ORDER,t)}setStyle(t){this.style_=t===void 0?gg:t;const e=av(t);this.styleFunction_=t===null?void 0:Ux(e),this.changed()}setDeclutter(t){this.declutter_=t?String(t):void 0,this.changed()}}function av(r){if(r===void 0)return gg;if(!r)return null;if(typeof r=="function"||r instanceof Wi)return r;if(!Array.isArray(r))return _c([r]);if(r.length===0)return[];const t=r.length,e=r[0];if(e instanceof Wi){const n=new Array(t);for(let s=0;s<t;++s){const o=r[s];if(!(o instanceof Wi))throw new Error("Expected a list of style instances");n[s]=o}return n}if("style"in e){const n=new Array(t);for(let s=0;s<t;++s){const o=r[s];if(!("style"in o))throw new Error("Expected a list of rules with a style property");n[s]=o}return jx(n)}return _c(r)}class Eg extends vi{constructor(t,e,i,n){super(t),this.inversePixelTransform=e,this.frameState=i,this.context=n}}class lv extends Zo{constructor(t){super(),this.map_=t}dispatchRenderEvent(t,e){q()}calculateMatrices2D(t){const e=t.viewState,i=t.coordinateToPixelTransform,n=t.pixelToCoordinateTransform;yi(i,t.size[0]/2,t.size[1]/2,1/e.resolution,-1/e.resolution,-e.rotation,-e.center[0],-e.center[1]),Yd(n,i)}forEachFeatureAtCoordinate(t,e,i,n,s,o,a,l){let h;const u=e.viewState;function c(v,x,C,R){return s.call(o,x,v?C:null,R)}const f=u.projection,d=Ld(t.slice(),f),_=[[0,0]];if(f.canWrapX()&&n){const v=f.getExtent(),x=it(v);_.push([-x,0],[x,0])}const g=e.layerStatesArray,m=g.length,p=[],y=[];for(let v=0;v<_.length;v++)for(let x=m-1;x>=0;--x){const C=g[x],R=C.layer;if(R.hasRenderer()&&Nh(C,u)&&a.call(l,R)){const T=R.getRenderer(),w=R.getSource();if(T&&w){const I=w.getWrapX()?d:t,P=c.bind(null,C.managed);y[0]=I[0]+_[v][0],y[1]=I[1]+_[v][1],h=T.forEachFeatureAtCoordinate(y,e,i,P,p)}if(h)return h}}if(p.length===0)return;const E=1/p.length;return p.forEach((v,x)=>v.distanceSq+=x*E),p.sort((v,x)=>v.distanceSq-x.distanceSq),p.some(v=>h=v.callback(v.feature,v.layer,v.geometry)),h}hasFeatureAtCoordinate(t,e,i,n,s,o){return this.forEachFeatureAtCoordinate(t,e,i,n,cs,this,s,o)!==void 0}getMap(){return this.map_}renderFrame(t){q()}scheduleExpireIconCache(t){Ie.canExpireCache()&&t.postRenderFunctions.push(hv)}}function hv(r,t){Ie.expire()}class uv extends lv{constructor(t){super(t),this.fontChangeListenerKey_=H(ai,dr.PROPERTYCHANGE,t.redrawText,t),this.element_=document.createElement("div");const e=this.element_.style;e.position="absolute",e.width="100%",e.height="100%",e.zIndex="0",this.element_.className=sa+" ol-layers";const i=t.getViewport();i.insertBefore(this.element_,i.firstChild||null),this.children_=[],this.renderedVisible_=!0}dispatchRenderEvent(t,e){const i=this.getMap();if(i.hasListener(t)){const n=new Eg(t,void 0,e);i.dispatchEvent(n)}}disposeInternal(){lt(this.fontChangeListenerKey_),this.element_.remove(),super.disposeInternal()}renderFrame(t){if(!t){this.renderedVisible_&&(this.element_.style.display="none",this.renderedVisible_=!1);return}this.calculateMatrices2D(t),this.dispatchRenderEvent(Se.PRECOMPOSE,t);const e=t.layerStatesArray.sort((a,l)=>a.zIndex-l.zIndex);e.some(a=>a.layer instanceof vg&&a.layer.getDeclutter())&&(t.declutter={});const n=t.viewState;this.children_.length=0;const s=[];let o=null;for(let a=0,l=e.length;a<l;++a){const h=e[a];t.layerIndex=a;const u=h.layer,c=u.getSourceState();if(!Nh(h,n)||c!="ready"&&c!="undefined"){u.unrender();continue}const f=u.render(t,o);f&&(f!==o&&(this.children_.push(f),o=f),s.push(h))}this.declutter(t,s),Cy(this.element_,this.children_),this.dispatchRenderEvent(Se.POSTCOMPOSE,t),this.renderedVisible_||(this.element_.style.display="",this.renderedVisible_=!0),this.scheduleExpireIconCache(t)}declutter(t,e){if(t.declutter){for(let i=e.length-1;i>=0;--i){const n=e[i],s=n.layer;s.getDeclutter()&&s.renderDeclutter(t,n)}e.forEach(i=>i.layer.renderDeferred(t))}}}function wg(r){if(r instanceof aa){r.setMapInternal(null);return}r instanceof br&&r.getLayers().forEach(wg)}function Cg(r,t){if(r instanceof aa){r.setMapInternal(t);return}if(r instanceof br){const e=r.getLayers().getArray();for(let i=0,n=e.length;i<n;++i)Cg(e[i],t)}}let cv=class extends ze{constructor(t){super(),t=t||{},this.on,this.once,this.un;const e=fv(t);this.renderComplete_=!1,this.loaded_=!0,this.boundHandleBrowserEvent_=this.handleBrowserEvent.bind(this),this.maxTilesLoading_=t.maxTilesLoading!==void 0?t.maxTilesLoading:16,this.pixelRatio_=t.pixelRatio!==void 0?t.pixelRatio:Kp,this.postRenderTimeoutHandle_,this.animationDelayKey_,this.animationDelay_=this.animationDelay_.bind(this),this.coordinateToPixelTransform_=ke(),this.pixelToCoordinateTransform_=ke(),this.frameIndex_=0,this.frameState_=null,this.previousExtent_=null,this.viewPropertyListenerKey_=null,this.viewChangeListenerKey_=null,this.layerGroupPropertyListenerKeys_=null,this.viewport_=document.createElement("div"),this.viewport_.className="ol-viewport"+("ontouchstart"in window?" ol-touch":""),this.viewport_.style.position="relative",this.viewport_.style.overflow="hidden",this.viewport_.style.width="100%",this.viewport_.style.height="100%",this.overlayContainer_=document.createElement("div"),this.overlayContainer_.style.position="absolute",this.overlayContainer_.style.zIndex="0",this.overlayContainer_.style.width="100%",this.overlayContainer_.style.height="100%",this.overlayContainer_.style.pointerEvents="none",this.overlayContainer_.className="ol-overlaycontainer",this.viewport_.appendChild(this.overlayContainer_),this.overlayContainerStopEvent_=document.createElement("div"),this.overlayContainerStopEvent_.style.position="absolute",this.overlayContainerStopEvent_.style.zIndex="0",this.overlayContainerStopEvent_.style.width="100%",this.overlayContainerStopEvent_.style.height="100%",this.overlayContainerStopEvent_.style.pointerEvents="none",this.overlayContainerStopEvent_.className="ol-overlaycontainer-stopevent",this.viewport_.appendChild(this.overlayContainerStopEvent_),this.mapBrowserEventHandler_=null,this.moveTolerance_=t.moveTolerance,this.keyboardEventTarget_=e.keyboardEventTarget,this.targetChangeHandlerKeys_=null,this.targetElement_=null,this.resizeObserver_=new ResizeObserver(()=>this.updateSize()),this.controls=e.controls||Iy(),this.interactions=e.interactions||Zy({onFocusOnly:!0}),this.overlays_=e.overlays,this.overlayIdIndex_={},this.renderer_=null,this.postRenderFunctions_=[],this.tileQueue_=new jp(this.getTilePriority.bind(this),this.handleTileChange_.bind(this)),this.addChangeListener(Ot.LAYERGROUP,this.handleLayerGroupChanged_),this.addChangeListener(Ot.VIEW,this.handleViewChanged_),this.addChangeListener(Ot.SIZE,this.handleSizeChanged_),this.addChangeListener(Ot.TARGET,this.handleTargetChanged_),this.setProperties(e.values);const i=this;t.view&&!(t.view instanceof Ve)&&t.view.then(function(n){i.setView(new Ve(n))}),this.controls.addEventListener(Vt.ADD,n=>{n.element.setMap(this)}),this.controls.addEventListener(Vt.REMOVE,n=>{n.element.setMap(null)}),this.interactions.addEventListener(Vt.ADD,n=>{n.element.setMap(this)}),this.interactions.addEventListener(Vt.REMOVE,n=>{n.element.setMap(null)}),this.overlays_.addEventListener(Vt.ADD,n=>{this.addOverlayInternal_(n.element)}),this.overlays_.addEventListener(Vt.REMOVE,n=>{const s=n.element.getId();s!==void 0&&delete this.overlayIdIndex_[s.toString()],n.element.setMap(null)}),this.controls.forEach(n=>{n.setMap(this)}),this.interactions.forEach(n=>{n.setMap(this)}),this.overlays_.forEach(this.addOverlayInternal_.bind(this))}addControl(t){this.getControls().push(t)}addInteraction(t){this.getInteractions().push(t)}addLayer(t){this.getLayerGroup().getLayers().push(t)}handleLayerAdd_(t){Cg(t.layer,this)}addOverlay(t){this.getOverlays().push(t)}addOverlayInternal_(t){const e=t.getId();e!==void 0&&(this.overlayIdIndex_[e.toString()]=t),t.setMap(this)}disposeInternal(){this.controls.clear(),this.interactions.clear(),this.overlays_.clear(),this.resizeObserver_.disconnect(),this.setTarget(null),super.disposeInternal()}forEachFeatureAtPixel(t,e,i){if(!this.frameState_||!this.renderer_)return;const n=this.getCoordinateFromPixelInternal(t);i=i!==void 0?i:{};const s=i.hitTolerance!==void 0?i.hitTolerance:0,o=i.layerFilter!==void 0?i.layerFilter:cs,a=i.checkWrapped!==!1;return this.renderer_.forEachFeatureAtCoordinate(n,this.frameState_,s,a,e,null,o,null)}getFeaturesAtPixel(t,e){const i=[];return this.forEachFeatureAtPixel(t,function(n){i.push(n)},e),i}getAllLayers(){const t=[];function e(i){i.forEach(function(n){n instanceof br?e(n.getLayers()):t.push(n)})}return e(this.getLayers()),t}hasFeatureAtPixel(t,e){if(!this.frameState_||!this.renderer_)return!1;const i=this.getCoordinateFromPixelInternal(t);e=e!==void 0?e:{};const n=e.layerFilter!==void 0?e.layerFilter:cs,s=e.hitTolerance!==void 0?e.hitTolerance:0,o=e.checkWrapped!==!1;return this.renderer_.hasFeatureAtCoordinate(i,this.frameState_,s,o,n,null)}getEventCoordinate(t){return this.getCoordinateFromPixel(this.getEventPixel(t))}getEventCoordinateInternal(t){return this.getCoordinateFromPixelInternal(this.getEventPixel(t))}getEventPixel(t){const i=this.viewport_.getBoundingClientRect(),n=this.getSize(),s=i.width/n[0],o=i.height/n[1],a="changedTouches"in t?t.changedTouches[0]:t;return[(a.clientX-i.left)/s,(a.clientY-i.top)/o]}getTarget(){return this.get(Ot.TARGET)}getTargetElement(){return this.targetElement_}getCoordinateFromPixel(t){return Pl(this.getCoordinateFromPixelInternal(t),this.getView().getProjection())}getCoordinateFromPixelInternal(t){const e=this.frameState_;return e?St(e.pixelToCoordinateTransform,t.slice()):null}getControls(){return this.controls}getOverlays(){return this.overlays_}getOverlayById(t){const e=this.overlayIdIndex_[t.toString()];return e!==void 0?e:null}getInteractions(){return this.interactions}getLayerGroup(){return this.get(Ot.LAYERGROUP)}setLayers(t){const e=this.getLayerGroup();if(t instanceof He){e.setLayers(t);return}const i=e.getLayers();i.clear(),i.extend(t)}getLayers(){return this.getLayerGroup().getLayers()}getLoadingOrNotReady(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e];if(!n.visible)continue;const s=n.layer.getRenderer();if(s&&!s.ready)return!0;const o=n.layer.getSource();if(o&&o.loading)return!0}return!1}getPixelFromCoordinate(t){const e=oi(t,this.getView().getProjection());return this.getPixelFromCoordinateInternal(e)}getPixelFromCoordinateInternal(t){const e=this.frameState_;return e?St(e.coordinateToPixelTransform,t.slice(0,2)):null}getRenderer(){return this.renderer_}getSize(){return this.get(Ot.SIZE)}getView(){return this.get(Ot.VIEW)}getViewport(){return this.viewport_}getOverlayContainer(){return this.overlayContainer_}getOverlayContainerStopEvent(){return this.overlayContainerStopEvent_}getOwnerDocument(){const t=this.getTargetElement();return t?t.ownerDocument:document}getTilePriority(t,e,i,n){return Hp(this.frameState_,t,e,i,n)}handleBrowserEvent(t,e){e=e||t.type;const i=new bi(e,this,t);this.handleMapBrowserEvent(i)}handleMapBrowserEvent(t){if(!this.frameState_)return;const e=t.originalEvent,i=e.type;if(i===Cl.POINTERDOWN||i===W.WHEEL||i===W.KEYDOWN){const n=this.getOwnerDocument(),s=this.viewport_.getRootNode?this.viewport_.getRootNode():n,o=e.target,a=s instanceof ShadowRoot?s.host===o?s.host.ownerDocument:s:s===n?n.documentElement:s;if(this.overlayContainerStopEvent_.contains(o)||!a.contains(o))return}if(t.frameState=this.frameState_,this.dispatchEvent(t)!==!1){const n=this.getInteractions().getArray().slice();for(let s=n.length-1;s>=0;s--){const o=n[s];if(o.getMap()!==this||!o.getActive()||!this.getTargetElement())continue;if(!o.handleEvent(t)||t.propagationStopped)break}}}handlePostRender(){const t=this.frameState_,e=this.tileQueue_;if(!e.isEmpty()){let n=this.maxTilesLoading_,s=n;if(t){const o=t.viewHints;if(o[Dt.ANIMATING]||o[Dt.INTERACTING]){const a=Date.now()-t.time>8;n=a?0:8,s=a?0:2}}e.getTilesLoading()<n&&(e.reprioritize(),e.loadMoreTiles(n,s))}t&&this.renderer_&&!t.animate&&(this.renderComplete_?(this.hasListener(Se.RENDERCOMPLETE)&&this.renderer_.dispatchRenderEvent(Se.RENDERCOMPLETE,t),this.loaded_===!1&&(this.loaded_=!0,this.dispatchEvent(new Yn(hi.LOADEND,this,t)))):this.loaded_===!0&&(this.loaded_=!1,this.dispatchEvent(new Yn(hi.LOADSTART,this,t))));const i=this.postRenderFunctions_;if(t)for(let n=0,s=i.length;n<s;++n)i[n](this,t);i.length=0}handleSizeChanged_(){this.getView()&&!this.getView().getAnimating()&&this.getView().resolveConstraints(0),this.render()}handleTargetChanged_(){if(this.mapBrowserEventHandler_){for(let i=0,n=this.targetChangeHandlerKeys_.length;i<n;++i)lt(this.targetChangeHandlerKeys_[i]);this.targetChangeHandlerKeys_=null,this.viewport_.removeEventListener(W.CONTEXTMENU,this.boundHandleBrowserEvent_),this.viewport_.removeEventListener(W.WHEEL,this.boundHandleBrowserEvent_),this.mapBrowserEventHandler_.dispose(),this.mapBrowserEventHandler_=null,this.viewport_.remove()}if(this.targetElement_){this.resizeObserver_.unobserve(this.targetElement_);const i=this.targetElement_.getRootNode();i instanceof ShadowRoot&&this.resizeObserver_.unobserve(i.host),this.setSize(void 0)}const t=this.getTarget(),e=typeof t=="string"?document.getElementById(t):t;if(this.targetElement_=e,!e)this.renderer_&&(clearTimeout(this.postRenderTimeoutHandle_),this.postRenderTimeoutHandle_=void 0,this.postRenderFunctions_.length=0,this.renderer_.dispose(),this.renderer_=null),this.animationDelayKey_&&(cancelAnimationFrame(this.animationDelayKey_),this.animationDelayKey_=void 0);else{e.appendChild(this.viewport_),this.renderer_||(this.renderer_=new uv(this)),this.mapBrowserEventHandler_=new Vp(this,this.moveTolerance_);for(const s in gt)this.mapBrowserEventHandler_.addEventListener(gt[s],this.handleMapBrowserEvent.bind(this));this.viewport_.addEventListener(W.CONTEXTMENU,this.boundHandleBrowserEvent_,!1),this.viewport_.addEventListener(W.WHEEL,this.boundHandleBrowserEvent_,wd?{passive:!1}:!1);let i;if(this.keyboardEventTarget_)i=this.keyboardEventTarget_;else{const s=e.getRootNode();i=s instanceof ShadowRoot?s.host:e}this.targetChangeHandlerKeys_=[H(i,W.KEYDOWN,this.handleBrowserEvent,this),H(i,W.KEYPRESS,this.handleBrowserEvent,this)];const n=e.getRootNode();n instanceof ShadowRoot&&this.resizeObserver_.observe(n.host),this.resizeObserver_.observe(e)}this.updateSize()}handleTileChange_(){this.render()}handleViewPropertyChanged_(){this.render()}handleViewChanged_(){this.viewPropertyListenerKey_&&(lt(this.viewPropertyListenerKey_),this.viewPropertyListenerKey_=null),this.viewChangeListenerKey_&&(lt(this.viewChangeListenerKey_),this.viewChangeListenerKey_=null);const t=this.getView();t&&(this.updateViewportSize_(this.getSize()),this.viewPropertyListenerKey_=H(t,dr.PROPERTYCHANGE,this.handleViewPropertyChanged_,this),this.viewChangeListenerKey_=H(t,W.CHANGE,this.handleViewPropertyChanged_,this),t.resolveConstraints(0)),this.render()}handleLayerGroupChanged_(){this.layerGroupPropertyListenerKeys_&&(this.layerGroupPropertyListenerKeys_.forEach(lt),this.layerGroupPropertyListenerKeys_=null);const t=this.getLayerGroup();t&&(this.handleLayerAdd_(new Ai("addlayer",t)),this.layerGroupPropertyListenerKeys_=[H(t,dr.PROPERTYCHANGE,this.render,this),H(t,W.CHANGE,this.render,this),H(t,"addlayer",this.handleLayerAdd_,this),H(t,"removelayer",this.handleLayerRemove_,this)]),this.render()}isRendered(){return!!this.frameState_}animationDelay_(){this.animationDelayKey_=void 0,this.renderFrame_(Date.now())}renderSync(){this.animationDelayKey_&&cancelAnimationFrame(this.animationDelayKey_),this.animationDelay_()}redrawText(){const t=this.getLayerGroup().getLayerStatesArray();for(let e=0,i=t.length;e<i;++e){const n=t[e].layer;n.hasRenderer()&&n.getRenderer().handleFontsChanged()}}render(){this.renderer_&&this.animationDelayKey_===void 0&&(this.animationDelayKey_=requestAnimationFrame(this.animationDelay_))}removeControl(t){return this.getControls().remove(t)}removeInteraction(t){return this.getInteractions().remove(t)}removeLayer(t){return this.getLayerGroup().getLayers().remove(t)}handleLayerRemove_(t){wg(t.layer)}removeOverlay(t){return this.getOverlays().remove(t)}renderFrame_(t){const e=this.getSize(),i=this.getView(),n=this.frameState_;let s=null;if(e!==void 0&&lc(e)&&i&&i.isDef()){const o=i.getHints(this.frameState_?this.frameState_.viewHints:void 0),a=i.getState();if(s={animate:!1,coordinateToPixelTransform:this.coordinateToPixelTransform_,declutter:null,extent:Il(a.center,a.resolution,a.rotation,e),index:this.frameIndex_++,layerIndex:0,layerStatesArray:this.getLayerGroup().getLayerStatesArray(),pixelRatio:this.pixelRatio_,pixelToCoordinateTransform:this.pixelToCoordinateTransform_,postRenderFunctions:[],size:e,tileQueue:this.tileQueue_,time:t,usedTiles:{},viewState:a,viewHints:o,wantedTiles:{},mapId:J(this),renderTargets:{}},a.nextCenter&&a.nextResolution){const l=isNaN(a.nextRotation)?a.rotation:a.nextRotation;s.nextExtent=Il(a.nextCenter,a.nextResolution,l,e)}}this.frameState_=s,this.renderer_.renderFrame(s),s&&(s.animate&&this.render(),Array.prototype.push.apply(this.postRenderFunctions_,s.postRenderFunctions),n&&(!this.previousExtent_||!ea(this.previousExtent_)&&!ds(s.extent,this.previousExtent_))&&(this.dispatchEvent(new Yn(hi.MOVESTART,this,n)),this.previousExtent_=$o(this.previousExtent_)),this.previousExtent_&&!s.viewHints[Dt.ANIMATING]&&!s.viewHints[Dt.INTERACTING]&&!ds(s.extent,this.previousExtent_)&&(this.dispatchEvent(new Yn(hi.MOVEEND,this,s)),Cd(s.extent,this.previousExtent_))),this.dispatchEvent(new Yn(hi.POSTRENDER,this,s)),this.renderComplete_=(this.hasListener(hi.LOADSTART)||this.hasListener(hi.LOADEND)||this.hasListener(Se.RENDERCOMPLETE))&&!this.tileQueue_.getTilesLoading()&&!this.tileQueue_.getCount()&&!this.getLoadingOrNotReady(),this.postRenderTimeoutHandle_||(this.postRenderTimeoutHandle_=setTimeout(()=>{this.postRenderTimeoutHandle_=void 0,this.handlePostRender()},0))}setLayerGroup(t){const e=this.getLayerGroup();e&&this.handleLayerRemove_(new Ai("removelayer",e)),this.set(Ot.LAYERGROUP,t)}setSize(t){this.set(Ot.SIZE,t)}setTarget(t){this.set(Ot.TARGET,t)}setView(t){if(!t||t instanceof Ve){this.set(Ot.VIEW,t);return}this.set(Ot.VIEW,new Ve);const e=this;t.then(function(i){e.setView(new Ve(i))})}updateSize(){const t=this.getTargetElement();let e;if(t){const n=getComputedStyle(t),s=t.offsetWidth-parseFloat(n.borderLeftWidth)-parseFloat(n.paddingLeft)-parseFloat(n.paddingRight)-parseFloat(n.borderRightWidth),o=t.offsetHeight-parseFloat(n.borderTopWidth)-parseFloat(n.paddingTop)-parseFloat(n.paddingBottom)-parseFloat(n.borderBottomWidth);!isNaN(s)&&!isNaN(o)&&(e=[Math.max(0,s),Math.max(0,o)],!lc(e)&&(t.offsetWidth||t.offsetHeight||t.getClientRects().length)&&Dd("No map visible because the map container's width or height are 0."))}const i=this.getSize();e&&(!i||!Hi(e,i))&&(this.setSize(e),this.updateViewportSize_(e))}updateViewportSize_(t){const e=this.getView();e&&e.setViewportSize(t)}};function fv(r){let t=null;r.keyboardEventTarget!==void 0&&(t=typeof r.keyboardEventTarget=="string"?document.getElementById(r.keyboardEventTarget):r.keyboardEventTarget);const e={},i=r.layers&&typeof r.layers.getLayers=="function"?r.layers:new br({layers:r.layers});e[Ot.LAYERGROUP]=i,e[Ot.TARGET]=r.target,e[Ot.VIEW]=r.view instanceof Ve?r.view:new Ve;let n;r.controls!==void 0&&(Array.isArray(r.controls)?n=new He(r.controls.slice()):(Q(typeof r.controls.getArray=="function","Expected `controls` to be an array or an `ol/Collection.js`"),n=r.controls));let s;r.interactions!==void 0&&(Array.isArray(r.interactions)?s=new He(r.interactions.slice()):(Q(typeof r.interactions.getArray=="function","Expected `interactions` to be an array or an `ol/Collection.js`"),s=r.interactions));let o;return r.overlays!==void 0?Array.isArray(r.overlays)?o=new He(r.overlays.slice()):(Q(typeof r.overlays.getArray=="function","Expected `overlays` to be an array or an `ol/Collection.js`"),o=r.overlays):o=new He,{controls:n,interactions:s,keyboardEventTarget:t,overlays:o,values:e}}class Uh extends Ho{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.key="",this.transition_=i.transition===void 0?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(W.CHANGE)}release(){this.setState(G.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==G.EMPTY){if(this.state!==G.ERROR&&this.state>t)throw new Error("Tile load sequence violation");this.state=t,this.changed()}}load(){q()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(!i)i=e,this.transitionStarts_[t]=i;else if(i===-1)return 1;const n=e-i+1e3/60;return n>=this.transition_?1:Od(n/this.transition_)}inTransition(t){return this.transition_?this.transitionStarts_[t]!==-1:!1}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}disposeInternal(){this.release(),super.disposeInternal()}}function Nl(r){return r instanceof Image||r instanceof HTMLCanvasElement||r instanceof HTMLVideoElement||r instanceof ImageBitmap?r:null}const dv=new Error("disposed"),gv=[256,256];class vc extends Uh{constructor(t){const e=G.IDLE;super(t.tileCoord,e,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null,this.controller_=t.controller||null}getSize(){if(this.size_)return this.size_;const t=Nl(this.data_);return t?[t.width,t.height]:gv}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==G.IDLE&&this.state!==G.ERROR)return;this.state=G.LOADING,this.changed();const t=this;this.loader_().then(function(e){t.data_=e,t.state=G.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=G.ERROR,t.changed()})}disposeInternal(){this.controller_&&(this.controller_.abort(dv),this.controller_=null),super.disposeInternal()}}class Tg extends Uh{constructor(t,e,i,n,s,o){super(t,e,o),this.crossOrigin_=n,this.src_=i,this.key=i,this.image_=new Image,n!==null&&(this.image_.crossOrigin=n),this.unlisten_=null,this.tileLoadFunction_=s}getImage(){return this.image_}setImage(t){this.image_=t,this.state=G.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=G.ERROR,this.unlistenImage_(),this.image_=_v(),this.changed()}handleImageLoad_(){const t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=G.LOADED:this.state=G.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==G.ERROR&&(this.state=G.IDLE,this.image_=new Image,this.crossOrigin_!==null&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==G.IDLE&&(this.state=G.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=Dx(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}disposeInternal(){this.unlistenImage_(),this.image_=null,super.disposeInternal()}}function _v(){const r=Ct(1,1);return r.fillStyle="rgba(0,0,0,0)",r.fillRect(0,0,1,1),r.canvas}class Kh{constructor(t,e,i,n){this.minX=t,this.maxX=e,this.minY=i,this.maxY=n}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function Gn(r,t,e,i,n){return n!==void 0?(n.minX=r,n.maxX=t,n.minY=e,n.maxY=i,n):new Kh(r,t,e,i)}let qa;const or=[];function Ec(r,t,e,i,n){r.beginPath(),r.moveTo(0,0),r.lineTo(t,e),r.lineTo(i,n),r.closePath(),r.save(),r.clip(),r.fillRect(0,0,Math.max(t,i)+1,Math.max(e,n)),r.restore()}function $a(r,t){return Math.abs(r[t*4]-210)>2||Math.abs(r[t*4+3]-.75*255)>2}function mv(){if(qa===void 0){const r=Ct(6,6,or);r.globalCompositeOperation="lighter",r.fillStyle="rgba(210, 0, 0, 0.75)",Ec(r,4,5,4,0),Ec(r,4,5,0,5);const t=r.getImageData(0,0,3,3).data;qa=$a(t,0)||$a(t,4)||$a(t,8),oa(r),or.push(r.canvas)}return qa}function wc(r,t,e,i){const n=Th(e,t,r);let s=Ku(t,i,e);const o=t.getMetersPerUnit();o!==void 0&&(s*=o);const a=r.getMetersPerUnit();a!==void 0&&(s/=a);const l=r.getExtent();if(!l||_r(l,n)){const h=Ku(r,s,n)/s;isFinite(h)&&h>0&&(s/=h)}return s}function pv(r,t,e,i){const n=En(e);let s=wc(r,t,n,i);return(!isFinite(s)||s<=0)&&bd(e,function(o){return s=wc(r,t,o,i),isFinite(s)&&s>0}),s}function yv(r,t,e,i,n,s,o,a,l,h,u,c,f,d){const _=Ct(Math.round(e*r),Math.round(e*t),or);if(c||(_.imageSmoothingEnabled=!1),l.length===0)return _.canvas;_.scale(e,e);function g(x){return Math.round(x*e)/e}_.globalCompositeOperation="lighter";const m=Ae();l.forEach(function(x,C,R){Qp(m,x.extent)});let p;const y=e/i,E=(c?1:1+Math.pow(2,-24))/y;p=Ct(Math.round(it(m)*y),Math.round(Yt(m)*y),or),c||(p.imageSmoothingEnabled=!1),l.forEach(function(x,C,R){if(x.image.width>0&&x.image.height>0){if(x.clipExtent){p.save();const A=(x.clipExtent[0]-m[0])*y,M=-(x.clipExtent[3]-m[3])*y,L=it(x.clipExtent)*y,k=Yt(x.clipExtent)*y;p.rect(c?A:Math.round(A),c?M:Math.round(M),c?L:Math.round(A+L)-Math.round(A),c?k:Math.round(M+k)-Math.round(M)),p.clip()}const T=(x.extent[0]-m[0])*y,w=-(x.extent[3]-m[3])*y,I=it(x.extent)*y,P=Yt(x.extent)*y;p.drawImage(x.image,h,h,x.image.width-2*h,x.image.height-2*h,c?T:Math.round(T),c?w:Math.round(w),c?I:Math.round(T+I)-Math.round(T),c?P:Math.round(w+P)-Math.round(w)),x.clipExtent&&p.restore()}});const v=Sn(o);return a.getTriangles().forEach(function(x,C,R){const T=x.source,w=x.target;let I=T[0][0],P=T[0][1],A=T[1][0],M=T[1][1],L=T[2][0],k=T[2][1];const O=g((w[0][0]-v[0])/s),F=g(-(w[0][1]-v[1])/s),D=g((w[1][0]-v[0])/s),X=g(-(w[1][1]-v[1])/s),Y=g((w[2][0]-v[0])/s),j=g(-(w[2][1]-v[1])/s),b=I,xt=P;I=0,P=0,A-=b,M-=xt,L-=b,k-=xt;const at=[[A,M,0,0,D-O],[L,k,0,0,Y-O],[0,0,A,M,X-F],[0,0,L,k,j-F]],tt=$p(at);if(!tt)return;if(_.save(),_.beginPath(),mv()||!c){_.moveTo(D,X);const Pt=4,Xe=O-D,Le=F-X;for(let se=0;se<Pt;se++)_.lineTo(D+g((se+1)*Xe/Pt),X+g(se*Le/(Pt-1))),se!=Pt-1&&_.lineTo(D+g((se+1)*Xe/Pt),X+g((se+1)*Le/(Pt-1)));_.lineTo(Y,j)}else _.moveTo(D,X),_.lineTo(O,F),_.lineTo(Y,j);_.clip(),_.transform(tt[0],tt[2],tt[1],tt[3],O,F),_.translate(m[0]-b,m[3]-xt);let re;if(p)re=p.canvas,_.scale(E,-E);else{const Pt=l[0],Xe=Pt.extent;re=Pt.image,_.scale(it(Xe)/re.width,-Yt(Xe)/re.height)}_.drawImage(re,0,0),_.restore()}),p&&(oa(p),or.push(p.canvas)),u&&(_.save(),_.globalCompositeOperation="source-over",_.strokeStyle="black",_.lineWidth=1,a.getTriangles().forEach(function(x,C,R){const T=x.target,w=(T[0][0]-v[0])/s,I=-(T[0][1]-v[1])/s,P=(T[1][0]-v[0])/s,A=-(T[1][1]-v[1])/s,M=(T[2][0]-v[0])/s,L=-(T[2][1]-v[1])/s;_.beginPath(),_.moveTo(P,A),_.lineTo(w,I),_.lineTo(M,L),_.closePath(),_.stroke()}),_.restore()),_.canvas}const xv=10,Cc=.25;class vv{constructor(t,e,i,n,s,o,a){this.sourceProj_=t,this.targetProj_=e;let l={};const h=a?k0(E=>St(a,Th(E,this.targetProj_,this.sourceProj_))):Io(this.targetProj_,this.sourceProj_);this.transformInv_=function(E){const v=E[0]+"/"+E[1];return l[v]||(l[v]=h(E)),l[v]},this.maxSourceExtent_=n,this.errorThresholdSquared_=s*s,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&it(n)>=it(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?it(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?it(this.targetProj_.getExtent()):null;const u=Sn(i),c=ta(i),f=Qo(i),d=Jo(i),_=this.transformInv_(u),g=this.transformInv_(c),m=this.transformInv_(f),p=this.transformInv_(d),y=xv+(o?Math.max(0,Math.ceil(Math.log2(Sl(i)/(o*o*256*256)))):0);if(this.addQuad_(u,c,f,d,_,g,m,p,y),this.wrapsXInSource_){let E=1/0;this.triangles_.forEach(function(v,x,C){E=Math.min(E,v.source[0][0],v.source[1][0],v.source[2][0])}),this.triangles_.forEach(v=>{if(Math.max(v.source[0][0],v.source[1][0],v.source[2][0])-E>this.sourceWorldWidth_/2){const x=[[v.source[0][0],v.source[0][1]],[v.source[1][0],v.source[1][1]],[v.source[2][0],v.source[2][1]]];x[0][0]-E>this.sourceWorldWidth_/2&&(x[0][0]-=this.sourceWorldWidth_),x[1][0]-E>this.sourceWorldWidth_/2&&(x[1][0]-=this.sourceWorldWidth_),x[2][0]-E>this.sourceWorldWidth_/2&&(x[2][0]-=this.sourceWorldWidth_);const C=Math.min(x[0][0],x[1][0],x[2][0]);Math.max(x[0][0],x[1][0],x[2][0])-C<this.sourceWorldWidth_/2&&(v.source=x)}})}l={}}addTriangle_(t,e,i,n,s,o){this.triangles_.push({source:[n,s,o],target:[t,e,i]})}addQuad_(t,e,i,n,s,o,a,l,h){const u=ku([s,o,a,l]),c=this.sourceWorldWidth_?it(u)/this.sourceWorldWidth_:null,f=this.sourceWorldWidth_,d=this.sourceProj_.canWrapX()&&c>.5&&c<1;let _=!1;if(h>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){const m=ku([t,e,i,n]);_=it(m)/this.targetWorldWidth_>Cc||_}!d&&this.sourceProj_.isGlobal()&&c&&(_=c>Cc||_)}if(!_&&this.maxSourceExtent_&&isFinite(u[0])&&isFinite(u[1])&&isFinite(u[2])&&isFinite(u[3])&&!Ht(u,this.maxSourceExtent_))return;let g=0;if(!_&&(!isFinite(s[0])||!isFinite(s[1])||!isFinite(o[0])||!isFinite(o[1])||!isFinite(a[0])||!isFinite(a[1])||!isFinite(l[0])||!isFinite(l[1]))){if(h>0)_=!0;else if(g=(!isFinite(s[0])||!isFinite(s[1])?8:0)+(!isFinite(o[0])||!isFinite(o[1])?4:0)+(!isFinite(a[0])||!isFinite(a[1])?2:0)+(!isFinite(l[0])||!isFinite(l[1])?1:0),g!=1&&g!=2&&g!=4&&g!=8)return}if(h>0){if(!_){const m=[(t[0]+i[0])/2,(t[1]+i[1])/2],p=this.transformInv_(m);let y;d?y=(nr(s[0],f)+nr(a[0],f))/2-nr(p[0],f):y=(s[0]+a[0])/2-p[0];const E=(s[1]+a[1])/2-p[1];_=y*y+E*E>this.errorThresholdSquared_}if(_){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){const m=[(e[0]+i[0])/2,(e[1]+i[1])/2],p=this.transformInv_(m),y=[(n[0]+t[0])/2,(n[1]+t[1])/2],E=this.transformInv_(y);this.addQuad_(t,e,m,y,s,o,p,E,h-1),this.addQuad_(y,m,i,n,E,p,a,l,h-1)}else{const m=[(t[0]+e[0])/2,(t[1]+e[1])/2],p=this.transformInv_(m),y=[(i[0]+n[0])/2,(i[1]+n[1])/2],E=this.transformInv_(y);this.addQuad_(t,m,y,n,s,p,E,l,h-1),this.addQuad_(m,e,i,y,p,o,a,E,h-1)}return}}if(d){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(g&11)==0&&this.addTriangle_(t,i,n,s,a,l),(g&14)==0&&this.addTriangle_(t,i,e,s,a,o),g&&((g&13)==0&&this.addTriangle_(e,n,t,o,l,s),(g&7)==0&&this.addTriangle_(e,n,i,o,l,a))}calculateSourceExtent(){const t=Ae();return this.triangles_.forEach(function(e,i,n){const s=e.source;Jr(t,s[0]),Jr(t,s[1]),Jr(t,s[2])}),t}getTriangles(){return this.triangles_}}const Ev=.5;class Rg extends Uh{constructor(t,e,i,n,s,o,a,l,h,u,c,f){super(s,G.IDLE,f),this.renderEdges_=c!==void 0?c:!1,this.pixelRatio_=a,this.gutter_=l,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=n,this.wrappedTileCoord_=o||s,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0,this.clipExtent_=t.canWrapX()?t.getExtent():void 0;const d=n.getTileCoordExtent(this.wrappedTileCoord_),_=this.targetTileGrid_.getExtent();let g=this.sourceTileGrid_.getExtent();const m=_?pn(d,_):d;if(Sl(m)===0){this.state=G.EMPTY;return}const p=t.getExtent();p&&(g?g=pn(g,p):g=p);const y=n.getResolution(this.wrappedTileCoord_[0]),E=pv(t,i,m,y);if(!isFinite(E)||E<=0){this.state=G.EMPTY;return}const v=u!==void 0?u:Ev;if(this.triangulation_=new vv(t,i,m,g,E*v,y),this.triangulation_.getTriangles().length===0){this.state=G.EMPTY;return}this.sourceZ_=e.getZForResolution(E);let x=this.triangulation_.calculateSourceExtent();if(g&&(t.canWrapX()?(x[1]=ft(x[1],g[1],g[3]),x[3]=ft(x[3],g[1],g[3])):x=pn(x,g)),!Sl(x))this.state=G.EMPTY;else{let C=0,R=0;t.canWrapX()&&(C=it(p),R=Math.floor((x[0]-p[0])/C)),Pd(x.slice(),t,!0).forEach(w=>{const I=e.getTileRangeForExtentAndZ(w,this.sourceZ_);for(let P=I.minX;P<=I.maxX;P++)for(let A=I.minY;A<=I.maxY;A++){const M=h(this.sourceZ_,P,A,a);if(M){const L=R*C;this.sourceTiles_.push({tile:M,offset:L})}}++R}),this.sourceTiles_.length===0&&(this.state=G.EMPTY)}}getImage(){return this.canvas_}reproject_(){const t=[];if(this.sourceTiles_.forEach(e=>{var n;const i=e.tile;if(i&&i.getState()==G.LOADED){const s=this.sourceTileGrid_.getTileCoordExtent(i.tileCoord);s[0]+=e.offset,s[2]+=e.offset;const o=(n=this.clipExtent_)==null?void 0:n.slice();o&&(o[0]+=e.offset,o[2]+=e.offset),t.push({extent:s,clipExtent:o,image:i.getImage()})}}),this.sourceTiles_.length=0,t.length===0)this.state=G.ERROR;else{const e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),n=typeof i=="number"?i:i[0],s=typeof i=="number"?i:i[1],o=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=yv(n,s,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),o,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=G.LOADED}this.changed()}load(){if(this.state==G.IDLE){this.state=G.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(({tile:e})=>{const i=e.getState();if(i==G.IDLE||i==G.LOADING){t++;const n=H(e,W.CHANGE,s=>{const o=e.getState();(o==G.LOADED||o==G.ERROR||o==G.EMPTY)&&(lt(n),t--,t===0&&(this.unlistenSources_(),this.reproject_()))});this.sourcesListenerKeys_.push(n)}}),t===0?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function({tile:e},i,n){e.getState()==G.IDLE&&e.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(lt),this.sourcesListenerKeys_=null}release(){this.canvas_&&(oa(this.canvas_.getContext("2d")),or.push(this.canvas_),this.canvas_=null),super.release()}}class wv{constructor(t){this.highWaterMark=t!==void 0?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}deleteOldest(){const t=this.pop();t instanceof Zo&&t.dispose()}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.deleteOldest()}clear(){for(;this.oldest_;)this.deleteOldest()}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){const i=this.entries_[t];return Q(i!==void 0,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){const e=this.entries_[t];return Q(e!==void 0,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.key_;return t}getValues(){const t=new Array(this.count_);let e=0,i;for(i=this.newest_;i;i=i.older)t[e++]=i.value_;return t}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){var e;return(e=this.entries_[t])==null?void 0:e.value_}pop(){const t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){Q(!(t in this.entries_),"Tried to set a value for a key that is used already");const i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}function Do(r,t,e,i){return i!==void 0?(i[0]=r,i[1]=t,i[2]=e,i):[r,t,e]}function Cv(r,t,e){return r+"/"+t+"/"+e}function Tv(r){return Rv(r[0],r[1],r[2])}function Rv(r,t,e){return(t<<r)+e}function Sv(r,t){const e=r[0],i=r[1],n=r[2];if(t.getMinZoom()>e||e>t.getMaxZoom())return!1;const s=t.getFullTileRange(e);return s?s.containsXY(i,n):!0}class Sg{constructor(){iu(this,"pushMethodArgs_",(...t)=>(this.push_(t),this));this.instructions_=[],this.zIndex=0,this.offset_=0,this.context_=new Proxy(Mo(),{get:(t,e)=>{if(typeof Mo()[e]=="function")return this.push_(e),this.pushMethodArgs_},set:(t,e,i)=>(this.push_(e,i),!0)})}push_(...t){const e=this.instructions_,i=this.zIndex+this.offset_;e[i]||(e[i]=[]),e[i].push(...t)}pushFunction(t){this.push_(t)}getContext(){return this.context_}draw(t){this.instructions_.forEach(e=>{for(let i=0,n=e.length;i<n;++i){const s=e[i];if(typeof s=="function"){s(t);continue}const o=e[++i];if(typeof t[s]=="function")t[s](...o);else{if(typeof o=="function"){t[s]=o(t);continue}t[s]=o}}})}clear(){this.instructions_.length=0,this.zIndex=0,this.offset_=0}offset(){this.offset_=this.instructions_.length,this.zIndex=0}}const Iv=5;class bv extends Ss{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.staleKeys_=new Array,this.maxStaleKeys=Iv}getStaleKeys(){return this.staleKeys_}prependStaleKey(t){this.staleKeys_.unshift(t),this.staleKeys_.length>this.maxStaleKeys&&(this.staleKeys_.length=this.maxStaleKeys)}getFeatures(t){return q()}getData(t){return null}prepareFrame(t){return q()}renderFrame(t,e){return q()}forEachFeatureAtCoordinate(t,e,i,n,s){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){const e=t.target;(e.getState()===U.LOADED||e.getState()===U.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=U.LOADED&&e!=U.ERROR&&t.addEventListener(W.CHANGE,this.boundHandleImageChange_),e==U.IDLE&&(t.load(),e=t.getState()),e==U.LOADED}renderIfReadyAndVisible(){const t=this.getLayer();t&&t.getVisible()&&t.getSourceState()==="ready"&&t.changed()}renderDeferred(t){}disposeInternal(){delete this.layer_,super.disposeInternal()}}const Tc=[];let Kn=null;function Mv(){Kn=Ct(1,1,void 0,{willReadFrequently:!0})}class Ig extends bv{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=ke(),this.pixelTransform=ke(),this.inversePixelTransform=ke(),this.context=null,this.deferredContext_=null,this.containerReused=!1,this.frameState=null}getImageData(t,e,i){Kn||Mv(),Kn.clearRect(0,0,1,1);let n;try{Kn.drawImage(t,e,i,1,1,0,0,1,1),n=Kn.getImageData(0,0,1,1).data}catch{return Kn=null,null}return n}getBackground(t){let i=this.getLayer().getBackground();return typeof i=="function"&&(i=i(t.viewState.resolution)),i||void 0}useContainer(t,e,i){const n=this.getLayer().getClassName();let s,o;if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&Hi(pr(t.style.backgroundColor),pr(i)))){const a=t.firstElementChild;a instanceof HTMLCanvasElement&&(o=a.getContext("2d"))}if(o&&B0(o.canvas.style.transform,e)?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){s=document.createElement("div"),s.className=n;let a=s.style;a.position="absolute",a.width="100%",a.height="100%",o=Ct();const l=o.canvas;s.appendChild(l),a=l.style,a.position="absolute",a.left="0",a.transformOrigin="top left",this.container=s,this.context=o}!this.containerReused&&i&&!this.container.style.backgroundColor&&(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){const n=Sn(i),s=ta(i),o=Qo(i),a=Jo(i);St(e.coordinateToPixelTransform,n),St(e.coordinateToPixelTransform,s),St(e.coordinateToPixelTransform,o),St(e.coordinateToPixelTransform,a);const l=this.inversePixelTransform;St(l,n),St(l,s),St(l,o),St(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(s[0]),Math.round(s[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}prepareContainer(t,e){const i=t.extent,n=t.viewState.resolution,s=t.viewState.rotation,o=t.pixelRatio,a=Math.round(it(i)/n*o),l=Math.round(Yt(i)/n*o);yi(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/o,1/o,s,-a/2,-l/2),Yd(this.inversePixelTransform,this.pixelTransform);const h=Y0(this.pixelTransform);if(this.useContainer(e,h,this.getBackground(t)),!this.containerReused){const u=this.context.canvas;u.width!=a||u.height!=l?(u.width=a,u.height=l):this.context.clearRect(0,0,a,l),h!==u.style.transform&&(u.style.transform=h)}}dispatchRenderEvent_(t,e,i){const n=this.getLayer();if(n.hasListener(t)){const s=new Eg(t,this.inversePixelTransform,i,e);n.dispatchEvent(s)}}preRender(t,e){this.frameState=e,!e.declutter&&this.dispatchRenderEvent_(Se.PRERENDER,t,e)}postRender(t,e){e.declutter||this.dispatchRenderEvent_(Se.POSTRENDER,t,e)}renderDeferredInternal(t){}getRenderContext(t){return t.declutter&&!this.deferredContext_&&(this.deferredContext_=new Sg),t.declutter?this.deferredContext_.getContext():this.context}renderDeferred(t){t.declutter&&(this.dispatchRenderEvent_(Se.PRERENDER,this.context,t),t.declutter&&this.deferredContext_&&(this.deferredContext_.draw(this.context),this.deferredContext_.clear()),this.renderDeferredInternal(t),this.dispatchRenderEvent_(Se.POSTRENDER,this.context,t))}getRenderTransform(t,e,i,n,s,o,a){const l=s/2,h=o/2,u=n/e,c=-u,f=-t[0]+a,d=-t[1];return yi(this.tempTransform,l,h,u,c,-i,f,d)}disposeInternal(){delete this.frameState,super.disposeInternal()}}function Ja(r,t,e,i){return`${r},${Cv(t,e,i)}`}function Qa(r,t,e){if(!(e in r))return r[e]=new Set([t]),!0;const i=r[e],n=i.has(t);return n||i.add(t),!n}function Av(r,t,e){const i=r[e];return i?i.delete(t):!1}function Rc(r,t){const e=r.layerStatesArray[r.layerIndex];e.extent&&(t=pn(t,Fi(e.extent,r.viewState.projection)));const i=e.layer.getRenderSource();if(!i.getWrapX()){const n=i.getTileGridForProjection(r.viewState.projection).getExtent();n&&(t=pn(t,n))}return t}class Pv extends Ig{constructor(t,e){super(t),e=e||{},this.extentChanged=!0,this.renderComplete=!1,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision_,this.renderedTiles=[],this.renderedSourceKey_,this.renderedSourceRevision_,this.tempExtent=Ae(),this.tempTileRange_=new Kh(0,0,0,0),this.tempTileCoord_=Do(0,0,0);const i=e.cacheSize!==void 0?e.cacheSize:512;this.tileCache_=new wv(i),this.maxStaleKeys=i*.5}getTileCache(){return this.tileCache_}getOrCreateTile(t,e,i,n){const s=this.tileCache_,a=this.getLayer().getSource(),l=Ja(a.getKey(),t,e,i);let h;if(s.containsKey(l))h=s.get(l);else{if(h=a.getTile(t,e,i,n.pixelRatio,n.viewState.projection),!h)return null;s.set(l,h)}return h}getTile(t,e,i,n){const s=this.getOrCreateTile(t,e,i,n);return s||null}getData(t){const e=this.frameState;if(!e)return null;const i=this.getLayer(),n=St(e.pixelToCoordinateTransform,t.slice()),s=i.getExtent();if(s&&!_r(s,n))return null;const o=e.viewState,a=i.getRenderSource(),l=a.getTileGridForProjection(o.projection),h=a.getTilePixelRatio(e.pixelRatio);for(let u=l.getZForResolution(o.resolution);u>=l.getMinZoom();--u){const c=l.getTileCoordForCoordAndZ(n,u),f=this.getTile(u,c[1],c[2],e);if(!f||f.getState()!==G.LOADED)continue;const d=l.getOrigin(u),_=$t(l.getTileSize(u)),g=l.getResolution(u);let m;if(f instanceof Tg||f instanceof Rg)m=f.getImage();else if(f instanceof vc){if(m=Nl(f.getData()),!m)continue}else continue;const p=Math.floor(h*((n[0]-d[0])/g-c[1]*_[0])),y=Math.floor(h*((d[1]-n[1])/g-c[2]*_[1])),E=Math.round(h*a.getGutterForProjection(o.projection));return this.getImageData(m,p+E,y+E)}return null}prepareFrame(t){this.renderedProjection?t.viewState.projection!==this.renderedProjection&&(this.tileCache_.clear(),this.renderedProjection=t.viewState.projection):this.renderedProjection=t.viewState.projection;const e=this.getLayer().getSource();if(!e)return!1;const i=e.getRevision();return this.renderedRevision_?this.renderedRevision_!==i&&(this.renderedRevision_=i,this.renderedSourceKey_===e.getKey()&&this.tileCache_.clear()):this.renderedRevision_=i,!0}enqueueTiles(t,e,i,n,s){const o=t.viewState,a=this.getLayer(),l=a.getRenderSource(),h=l.getTileGridForProjection(o.projection),u=J(l);u in t.wantedTiles||(t.wantedTiles[u]={});const c=t.wantedTiles[u],f=a.getMapInternal(),d=Math.max(i-s,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),f?f.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),l.zDirection)),_=o.rotation,g=_?Md(o.center,o.resolution,_,t.size):void 0;for(let m=i;m>=d;--m){const p=h.getTileRangeForExtentAndZ(e,m,this.tempTileRange_),y=h.getResolution(m);for(let E=p.minX;E<=p.maxX;++E)for(let v=p.minY;v<=p.maxY;++v){if(_&&!h.tileCoordIntersectsViewport([m,E,v],g))continue;const x=this.getTile(m,E,v,t);if(!x||!Qa(n,x,m))continue;const R=x.getKey();if(c[R]=!0,x.getState()===G.IDLE&&!t.tileQueue.isKeyQueued(R)){const T=Do(m,E,v,this.tempTileCoord_);t.tileQueue.enqueue([x,u,h.getTileCoordCenter(T),y])}}}}findStaleTile_(t,e){const i=this.tileCache_,n=t[0],s=t[1],o=t[2],a=this.getStaleKeys();for(let l=0;l<a.length;++l){const h=Ja(a[l],n,s,o);if(i.containsKey(h)){const u=i.peek(h);if(u.getState()===G.LOADED)return u.endTransition(J(this)),Qa(e,u,n),!0}}return!1}findAltTiles_(t,e,i,n){const s=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_);if(!s)return!1;let o=!0;const a=this.tileCache_,h=this.getLayer().getRenderSource().getKey();for(let u=s.minX;u<=s.maxX;++u)for(let c=s.minY;c<=s.maxY;++c){const f=Ja(h,i,u,c);let d=!1;if(a.containsKey(f)){const _=a.peek(f);_.getState()===G.LOADED&&(Qa(n,_,i),d=!0)}d||(o=!1)}return o}renderFrame(t,e){this.renderComplete=!0;const i=t.layerStatesArray[t.layerIndex],n=t.viewState,s=n.projection,o=n.resolution,a=n.center,l=t.pixelRatio,h=this.getLayer(),u=h.getSource(),c=u.getTileGridForProjection(s),f=c.getZForResolution(o,u.zDirection),d=c.getResolution(f),_=u.getKey();this.renderedSourceKey_?this.renderedSourceKey_!==_&&(this.prependStaleKey(this.renderedSourceKey_),this.renderedSourceKey_=_):this.renderedSourceKey_=_;let g=t.extent;const m=u.getTilePixelRatio(l);this.prepareContainer(t,e);const p=this.context.canvas.width,y=this.context.canvas.height,E=i.extent&&Fi(i.extent);E&&(g=pn(g,Fi(i.extent)));const v=d*p/2/m,x=d*y/2/m,C=[a[0]-v,a[1]-x,a[0]+v,a[1]+x],R={};this.renderedTiles.length=0;const T=h.getPreload();if(t.nextExtent){const D=c.getZForResolution(n.nextResolution,u.zDirection),X=Rc(t,t.nextExtent);this.enqueueTiles(t,X,D,R,T)}const w=Rc(t,g);if(this.enqueueTiles(t,w,f,R,0),T>0&&setTimeout(()=>{this.enqueueTiles(t,w,f-1,R,T-1)},0),!(f in R))return this.container;const I=J(this),P=t.time;for(const D of R[f]){const X=D.getState();if(X===G.EMPTY)continue;const Y=D.tileCoord;if(X===G.LOADED&&D.getAlpha(I,P)===1){D.endTransition(I);continue}if(X!==G.ERROR&&(this.renderComplete=!1),this.findStaleTile_(Y,R)){Av(R,D,f),t.animate=!0;continue}if(this.findAltTiles_(c,Y,f+1,R))continue;const xt=c.getMinZoom();for(let at=f-1;at>=xt&&!this.findAltTiles_(c,Y,at,R);--at);}const A=d/o*l/m,M=this.getRenderContext(t);yi(this.tempTransform,p/2,y/2,A,A,0,-p/2,-y/2),i.extent&&this.clipUnrotated(M,t,E),u.getInterpolate()||(M.imageSmoothingEnabled=!1),this.preRender(M,t);const L=Object.keys(R).map(Number);L.sort(di);let k;const O=[],F=[];for(let D=L.length-1;D>=0;--D){const X=L[D],Y=u.getTilePixelSize(X,l,s),b=c.getResolution(X)/d,xt=Y[0]*b*A,at=Y[1]*b*A,tt=c.getTileCoordForCoordAndZ(Sn(C),X),re=c.getTileCoordExtent(tt),Pt=St(this.tempTransform,[m*(re[0]-C[0])/d,m*(C[3]-re[3])/d]),Xe=m*u.getGutterForProjection(s);for(const Le of R[X]){if(Le.getState()!==G.LOADED)continue;const se=Le.tileCoord,Ds=tt[1]-se[1],ga=Math.round(Pt[0]-(Ds-1)*xt),Mr=tt[2]-se[2],qi=Math.round(Pt[1]-(Mr-1)*at),_e=Math.round(Pt[0]-Ds*xt),We=Math.round(Pt[1]-Mr*at),bn=ga-_e,Mn=qi-We,Ar=L.length===1;let $i=!1;k=[_e,We,_e+bn,We,_e+bn,We+Mn,_e,We+Mn];for(let An=0,Pn=O.length;An<Pn;++An)if(!Ar&&X<F[An]){const Tt=O[An];Ht([_e,We,_e+bn,We+Mn],[Tt[0],Tt[3],Tt[4],Tt[7]])&&($i||(M.save(),$i=!0),M.beginPath(),M.moveTo(k[0],k[1]),M.lineTo(k[2],k[3]),M.lineTo(k[4],k[5]),M.lineTo(k[6],k[7]),M.moveTo(Tt[6],Tt[7]),M.lineTo(Tt[4],Tt[5]),M.lineTo(Tt[2],Tt[3]),M.lineTo(Tt[0],Tt[1]),M.clip())}O.push(k),F.push(X),this.drawTile(Le,t,_e,We,bn,Mn,Xe,Ar),$i&&M.restore(),this.renderedTiles.unshift(Le),this.updateUsedTiles(t.usedTiles,u,Le)}}if(this.renderedResolution=d,this.extentChanged=!this.renderedExtent_||!ds(this.renderedExtent_,C),this.renderedExtent_=C,this.renderedPixelRatio=l,this.postRender(this.context,t),i.extent&&M.restore(),M.imageSmoothingEnabled=!0,this.renderComplete){const D=(X,Y)=>{const j=J(u),b=Y.wantedTiles[j],xt=b?Object.keys(b).length:0;this.updateCacheSize(xt),this.tileCache_.expireCache()};t.postRenderFunctions.push(D)}return this.container}updateCacheSize(t){this.tileCache_.highWaterMark=Math.max(this.tileCache_.highWaterMark,t*2)}drawTile(t,e,i,n,s,o,a,l){let h;if(t instanceof vc){if(h=Nl(t.getData()),!h)throw new Error("Rendering array data is not yet supported")}else h=this.getTileImage(t);if(!h)return;const u=this.getRenderContext(e),c=J(this),f=e.layerStatesArray[e.layerIndex],d=f.opacity*(l?t.getAlpha(c,e.time):1),_=d!==u.globalAlpha;_&&(u.save(),u.globalAlpha=d),u.drawImage(h,a,a,h.width-2*a,h.height-2*a,i,n,s,o),_&&u.restore(),d!==f.opacity?e.animate=!0:l&&t.endTransition(c)}getImage(){const t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}updateUsedTiles(t,e,i){const n=J(e);n in t||(t[n]={}),t[n][i.getKey()]=!0}}const Hs={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"};class Lv extends aa{constructor(t){t=t||{};const e=Object.assign({},t),i=t.cacheSize;delete t.cacheSize,delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.cacheSize_=i,this.setPreload(t.preload!==void 0?t.preload:0),this.setUseInterimTilesOnError(t.useInterimTilesOnError!==void 0?t.useInterimTilesOnError:!0)}getCacheSize(){return this.cacheSize_}getPreload(){return this.get(Hs.PRELOAD)}setPreload(t){this.set(Hs.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(Hs.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(Hs.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}class Ov extends Lv{constructor(t){super(t)}createRenderer(){return new Pv(this,{cacheSize:this.getCacheSize()})}}const zn=[0,0,0],Ti=5;class bg{constructor(t){this.minZoom=t.minZoom!==void 0?t.minZoom:0,this.resolutions_=t.resolutions,Q(zp(this.resolutions_,(n,s)=>s-n),"`resolutions` must be sorted in descending order");let e;if(!t.origins){for(let n=0,s=this.resolutions_.length-1;n<s;++n)if(!e)e=this.resolutions_[n]/this.resolutions_[n+1];else if(this.resolutions_[n]/this.resolutions_[n+1]!==e){e=void 0;break}}this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=t.origin!==void 0?t.origin:null,this.origins_=null,t.origins!==void 0&&(this.origins_=t.origins,Q(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));const i=t.extent;i!==void 0&&!this.origin_&&!this.origins_&&(this.origin_=Sn(i)),Q(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,t.tileSizes!==void 0&&(this.tileSizes_=t.tileSizes,Q(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=t.tileSize!==void 0?t.tileSize:this.tileSizes_?null:Lh,Q(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=i!==void 0?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],t.sizes!==void 0?this.fullTileRanges_=t.sizes.map((n,s)=>{const o=new Kh(Math.min(0,n[0]),Math.max(n[0]-1,-1),Math.min(0,n[1]),Math.max(n[1]-1,-1));if(i){const a=this.getTileRangeForExtentAndZ(i,s);o.minX=Math.max(a.minX,o.minX),o.maxX=Math.min(a.maxX,o.maxX),o.minY=Math.max(a.minY,o.minY),o.maxY=Math.min(a.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){const n=this.getTileRangeForExtentAndZ(t,e);for(let s=n.minX,o=n.maxX;s<=o;++s)for(let a=n.minY,l=n.maxY;a<=l;++a)i([e,s,a])}forEachTileCoordParentTileRange(t,e,i,n){let s,o,a,l=null,h=t[0]-1;for(this.zoomFactor_===2?(o=t[1],a=t[2]):l=this.getTileCoordExtent(t,n);h>=this.minZoom;){if(o!==void 0&&a!==void 0?(o=Math.floor(o/2),a=Math.floor(a/2),s=Gn(o,o,a,a,i)):s=this.getTileRangeForExtentAndZ(l,h,i),e(h,s))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(this.zoomFactor_===2){const s=t[1]*2,o=t[2]*2;return Gn(s,s+1,o,o+1,e)}const n=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(n,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;const n=t[0],s=t[1],o=t[2];if(e===n)return Gn(s,o,s,o,i);if(this.zoomFactor_){const l=Math.pow(this.zoomFactor_,e-n),h=Math.floor(s*l),u=Math.floor(o*l);if(e<n)return Gn(h,h,u,u,i);const c=Math.floor(l*(s+1))-1,f=Math.floor(l*(o+1))-1;return Gn(h,c,u,f,i)}const a=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(a,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,zn);const n=zn[1],s=zn[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,zn);const o=zn[1],a=zn[2];return Gn(n,o,s,a,i)}getTileCoordCenter(t){const e=this.getOrigin(t[0]),i=this.getResolution(t[0]),n=$t(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*n[0]*i,e[1]-(t[2]+.5)*n[1]*i]}getTileCoordExtent(t,e){const i=this.getOrigin(t[0]),n=this.getResolution(t[0]),s=$t(this.getTileSize(t[0]),this.tmpSize_),o=i[0]+t[1]*s[0]*n,a=i[1]-(t[2]+1)*s[1]*n,l=o+s[0]*n,h=a+s[1]*n;return Vi(o,a,l,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,n,s){const o=this.getZForResolution(i),a=i/this.getResolution(o),l=this.getOrigin(o),h=$t(this.getTileSize(o),this.tmpSize_);let u=a*(t-l[0])/i/h[0],c=a*(l[1]-e)/i/h[1];return n?(u=Ws(u,Ti)-1,c=Ws(c,Ti)-1):(u=Xs(u,Ti),c=Xs(c,Ti)),Do(o,u,c,s)}getTileCoordForXYAndZ_(t,e,i,n,s){const o=this.getOrigin(i),a=this.getResolution(i),l=$t(this.getTileSize(i),this.tmpSize_);let h=(t-o[0])/a/l[0],u=(o[1]-e)/a/l[1];return n?(h=Ws(h,Ti)-1,u=Ws(u,Ti)-1):(h=Xs(h,Ti),u=Xs(u,Ti)),Do(i,h,u,s)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){const i=fh(this.resolutions_,t,e||0);return ft(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return $d(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){const e=this.resolutions_.length,i=new Array(e);for(let n=this.minZoom;n<e;++n)i[n]=this.getTileRangeForExtentAndZ(t,n);this.fullTileRanges_=i}}function Mg(r){let t=r.getDefaultTileGrid();return t||(t=Nv(r),r.setDefaultTileGrid(t)),t}function Dv(r,t,e){const i=t[0],n=r.getTileCoordCenter(t),s=Vh(e);if(!_r(s,n)){const o=it(s),a=Math.ceil((s[0]-n[0])/o);return n[0]+=o*a,r.getTileCoordForCoordAndZ(n,i)}return t}function Fv(r,t,e,i){i=i!==void 0?i:"top-left";const n=Ag(r,t,e);return new bg({extent:r,origin:e0(r,i),resolutions:n,tileSize:e})}function kv(r){const t=r||{},e=t.extent||ne("EPSG:3857").getExtent(),i={extent:e,minZoom:t.minZoom,tileSize:t.tileSize,resolutions:Ag(e,t.maxZoom,t.tileSize,t.maxResolution)};return new bg(i)}function Ag(r,t,e,i){t=t!==void 0?t:gy,e=$t(e!==void 0?e:Lh);const n=Yt(r),s=it(r);i=i>0?i:Math.max(s/e[0],n/e[1]);const o=t+1,a=new Array(o);for(let l=0;l<o;++l)a[l]=i/Math.pow(2,l);return a}function Nv(r,t,e,i){const n=Vh(r);return Fv(n,t,e,i)}function Vh(r){r=ne(r);let t=r.getExtent();if(!t){const e=180*ph.degrees/r.getMetersPerUnit();t=Vi(-e,-e,e,e)}return t}const Gv=/\{z\}/g,zv=/\{x\}/g,Xv=/\{y\}/g,Wv=/\{-y\}/g;function Yv(r,t,e,i,n){return r.replace(Gv,t.toString()).replace(zv,e.toString()).replace(Xv,i.toString()).replace(Wv,function(){if(n===void 0)throw new Error("If the URL template has a {-y} placeholder, the grid extent must be known");return(n-i).toString()})}function Bv(r){const t=[];let e=/\{([a-z])-([a-z])\}/.exec(r);if(e){const i=e[1].charCodeAt(0),n=e[2].charCodeAt(0);let s;for(s=i;s<=n;++s)t.push(r.replace(e[0],String.fromCharCode(s)));return t}if(e=/\{(\d+)-(\d+)\}/.exec(r),e){const i=parseInt(e[2],10);for(let n=parseInt(e[1],10);n<=i;n++)t.push(r.replace(e[0],n.toString()));return t}return t.push(r),t}function Uv(r,t){return function(e,i,n){if(!e)return;let s;const o=e[0];if(t){const a=t.getFullTileRange(o);a&&(s=a.getHeight()-1)}return Yv(r,o,e[1],e[2],s)}}function Kv(r,t){const e=r.length,i=new Array(e);for(let n=0;n<e;++n)i[n]=Uv(r[n],t);return Vv(i)}function Vv(r){return r.length===1?r[0]:function(t,e,i){if(!t)return;const n=Tv(t),s=nr(n,r.length);return r[s](t,e,i)}}class Pg extends ze{constructor(t){super(),this.projection=ne(t.projection),this.attributions_=Sc(t.attributions),this.attributionsCollapsible_=t.attributionsCollapsible??!0,this.loading=!1,this.state_=t.state!==void 0?t.state:"ready",this.wrapX_=t.wrapX!==void 0?t.wrapX:!1,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;const e=this;this.viewPromise_=new Promise(function(i,n){e.viewResolver=i,e.viewRejector=n})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=Sc(t),this.changed()}setState(t){this.state_=t,this.changed()}}function Sc(r){return r?typeof r=="function"?r:(Array.isArray(r)||(r=[r]),t=>r):null}class Zv extends Pg{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.tilePixelRatio_=t.tilePixelRatio!==void 0?t.tilePixelRatio:1,this.tileGrid=t.tileGrid!==void 0?t.tileGrid:null;const e=[256,256];this.tileGrid&&$t(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),e),this.tmpSize=[0,0],this.key_=t.key||J(this),this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getResolutions(t){const e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,n,s){return q()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:Mg(t)}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){const n=this.getTileGridForProjection(i),s=this.getTilePixelRatio(e),o=$t(n.getTileSize(t),this.tmpSize);return s==1?o:hx(o,s,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){const i=e!==void 0?e:this.getProjection(),n=e!==void 0?this.getTileGridForProjection(i):this.tileGrid||this.getTileGridForProjection(i);return this.getWrapX()&&i.isGlobal()&&(t=Dv(n,t,i)),Sv(t,n)?t:null}clear(){}refresh(){this.clear(),super.refresh()}}class jv extends vi{constructor(t,e){super(t),this.tile=e}}const tl={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"};class Zh extends Zv{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===Zh.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){const e=t.target,i=J(e),n=e.getState();let s;n==G.LOADING?(this.tileLoadingKeys_[i]=!0,s=tl.TILELOADSTART):i in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[i],s=n==G.ERROR?tl.TILELOADERROR:n==G.LOADED?tl.TILELOADEND:void 0),s!=null&&this.dispatchEvent(new jv(s,e))}setTileLoadFunction(t){this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,typeof e<"u"?this.setKey(e):this.changed()}setUrl(t){const e=Bv(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;const e=t.join(`
`);this.generateTileUrlFunction_?this.setTileUrlFunction(Kv(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}}class Hv extends Zh{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:qv,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate!==void 0?t.interpolate:!0,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=t.crossOrigin!==void 0?t.crossOrigin:null,this.tileClass=t.tileClass!==void 0?t.tileClass:Tg,this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}getGutterForProjection(t){return this.getProjection()&&t&&!La(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getTileGridForProjection(t){const e=this.getProjection();if(this.tileGrid&&(!e||La(e,t)))return this.tileGrid;const i=J(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=Mg(t)),this.tileGridForProjection[i]}createTile_(t,e,i,n,s,o){const a=[t,e,i],l=this.getTileCoordForTileUrlFunction(a,s),h=l?this.tileUrlFunction(l,n,s):void 0,u=new this.tileClass(a,h!==void 0?G.IDLE:G.EMPTY,h!==void 0?h:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return u.key=o,u.addEventListener(W.CHANGE,this.handleTileChange.bind(this)),u}getTile(t,e,i,n,s){const o=this.getProjection();if(!o||!s||La(o,s))return this.getTileInternal(t,e,i,n,o||s);const a=[t,e,i],l=this.getKey(),h=this.getTileGridForProjection(o),u=this.getTileGridForProjection(s),c=this.getTileCoordForTileUrlFunction(a,s),f=new Rg(o,h,s,u,a,c,this.getTilePixelRatio(n),this.getGutter(),(d,_,g,m)=>this.getTileInternal(d,_,g,m,o),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return f.key=l,f}getTileInternal(t,e,i,n,s){const o=this.getKey();return this.createTile_(t,e,i,n,s,o)}setRenderReprojectionEdges(t){this.renderReprojectionEdges_!=t&&(this.renderReprojectionEdges_=t,this.changed())}setTileGridForProjection(t,e){const i=ne(t);if(i){const n=J(i);n in this.tileGridForProjection||(this.tileGridForProjection[n]=e)}}}function qv(r,t){r.getImage().src=t}class $v extends Hv{constructor(t){t=t||{};const e=t.projection!==void 0?t.projection:"EPSG:3857",i=t.tileGrid!==void 0?t.tileGrid:kv({extent:Vh(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize});super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX!==void 0?t.wrapX:!0,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=t.gutter!==void 0?t.gutter:0}getGutter(){return this.gutter_}}const Jv='&#169; <a href="https://www.openstreetmap.org/copyright" target="_blank">OpenStreetMap</a> contributors.';class Qv extends $v{constructor(t){t=t||{};let e;t.attributions!==void 0?e=t.attributions:e=[Jv];const i=t.crossOrigin!==void 0?t.crossOrigin:"anonymous",n=t.url!==void 0?t.url:"https://tile.openstreetmap.org/{z}/{x}/{y}.png";super({attributions:e,attributionsCollapsible:!1,cacheSize:t.cacheSize,crossOrigin:i,interpolate:t.interpolate,maxZoom:t.maxZoom!==void 0?t.maxZoom:19,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileLoadFunction:t.tileLoadFunction,transition:t.transition,url:n,wrapX:t.wrapX,zDirection:t.zDirection})}}class Lg{drawCustom(t,e,i,n,s){}drawGeometry(t){}setStyle(t){}drawCircle(t,e,i){}drawFeature(t,e,i){}drawGeometryCollection(t,e,i){}drawLineString(t,e,i){}drawMultiLineString(t,e,i){}drawMultiPoint(t,e,i){}drawMultiPolygon(t,e,i){}drawPoint(t,e,i){}drawPolygon(t,e,i){}drawText(t,e,i){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}const N={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},qs=[N.FILL],ki=[N.STROKE],un=[N.BEGIN_PATH],Ic=[N.CLOSE_PATH];class Os extends Lg{constructor(t,e,i,n){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=n,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){const e=this.pixelRatio;return e==1?t:t.map(function(i){return i*e})}appendFlatPointCoordinates(t,e){const i=this.getBufferedMaxExtent(),n=this.tmpCoordinate_,s=this.coordinates;let o=s.length;for(let a=0,l=t.length;a<l;a+=e)n[0]=t[a],n[1]=t[a+1],_r(i,n)&&(s[o++]=n[0],s[o++]=n[1]);return o}appendFlatLineCoordinates(t,e,i,n,s,o){const a=this.coordinates;let l=a.length;const h=this.getBufferedMaxExtent();o&&(e+=n);let u=t[e],c=t[e+1];const f=this.tmpCoordinate_;let d=!0,_,g,m;for(_=e+n;_<i;_+=n)f[0]=t[_],f[1]=t[_+1],m=Rl(h,f),m!==g?(d&&(a[l++]=u,a[l++]=c,d=!1),a[l++]=f[0],a[l++]=f[1]):m===Rt.INTERSECTING?(a[l++]=f[0],a[l++]=f[1],d=!1):d=!0,u=f[0],c=f[1],g=m;return(s&&d||_===e+n)&&(a[l++]=u,a[l++]=c),l}drawCustomCoordinates_(t,e,i,n,s){for(let o=0,a=i.length;o<a;++o){const l=i[o],h=this.appendFlatLineCoordinates(t,e,l,n,!1,!1);s.push(h),e=l}return e}drawCustom(t,e,i,n,s){this.beginGeometry(t,e,s);const o=t.getType(),a=t.getStride(),l=this.coordinates.length;let h,u,c,f,d;switch(o){case"MultiPolygon":h=t.getOrientedFlatCoordinates(),f=[];const _=t.getEndss();d=0;for(let g=0,m=_.length;g<m;++g){const p=[];d=this.drawCustomCoordinates_(h,d,_[g],a,p),f.push(p)}this.instructions.push([N.CUSTOM,l,f,t,i,$u,s]),this.hitDetectionInstructions.push([N.CUSTOM,l,f,t,n||i,$u,s]);break;case"Polygon":case"MultiLineString":c=[],h=o=="Polygon"?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),d=this.drawCustomCoordinates_(h,0,t.getEnds(),a,c),this.instructions.push([N.CUSTOM,l,c,t,i,bo,s]),this.hitDetectionInstructions.push([N.CUSTOM,l,c,t,n||i,bo,s]);break;case"LineString":case"Circle":h=t.getFlatCoordinates(),u=this.appendFlatLineCoordinates(h,0,h.length,a,!1,!1),this.instructions.push([N.CUSTOM,l,u,t,i,qn,s]),this.hitDetectionInstructions.push([N.CUSTOM,l,u,t,n||i,qn,s]);break;case"MultiPoint":h=t.getFlatCoordinates(),u=this.appendFlatPointCoordinates(h,a),u>l&&(this.instructions.push([N.CUSTOM,l,u,t,i,qn,s]),this.hitDetectionInstructions.push([N.CUSTOM,l,u,t,n||i,qn,s]));break;case"Point":h=t.getFlatCoordinates(),this.coordinates.push(h[0],h[1]),u=this.coordinates.length,this.instructions.push([N.CUSTOM,l,u,t,i,void 0,s]),this.hitDetectionInstructions.push([N.CUSTOM,l,u,t,n||i,void 0,s]);break}this.endGeometry(e)}beginGeometry(t,e,i){this.beginGeometryInstruction1_=[N.BEGIN_GEOMETRY,e,0,t,i],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[N.BEGIN_GEOMETRY,e,0,t,i],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){const t=this.hitDetectionInstructions;t.reverse();let e;const i=t.length;let n,s,o=-1;for(e=0;e<i;++e)n=t[e],s=n[0],s==N.END_GEOMETRY?o=e:s==N.BEGIN_GEOMETRY&&(n[2]=e,Gp(this.hitDetectionInstructions,o,e),o=-1)}fillStyleToState(t,e={}){if(t){const i=t.getColor();e.fillPatternScale=i&&typeof i=="object"&&"src"in i?this.pixelRatio:1,e.fillStyle=qe(i||jt)}else e.fillStyle=void 0;return e}strokeStyleToState(t,e={}){if(t){const i=t.getColor();e.strokeStyle=qe(i||ys);const n=t.getLineCap();e.lineCap=n!==void 0?n:yr;const s=t.getLineDash();e.lineDash=s?s.slice():gi;const o=t.getLineDashOffset();e.lineDashOffset=o||_i;const a=t.getLineJoin();e.lineJoin=a!==void 0?a:xr;const l=t.getWidth();e.lineWidth=l!==void 0?l:vs;const h=t.getMiterLimit();e.miterLimit=h!==void 0?h:ps,e.lineWidth>this.maxLineWidth&&(this.maxLineWidth=e.lineWidth,this.bufferedMaxExtent_=null)}else e.strokeStyle=void 0,e.lineCap=void 0,e.lineDash=null,e.lineDashOffset=void 0,e.lineJoin=void 0,e.lineWidth=void 0,e.miterLimit=void 0;return e}setFillStrokeStyle(t,e){const i=this.state;this.fillStyleToState(t,i),this.strokeStyleToState(e,i)}createFill(t){const e=t.fillStyle,i=[N.SET_FILL_STYLE,e];return typeof e!="string"&&i.push(t.fillPatternScale),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[N.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,t.lineDash?this.applyPixelRatio(t.lineDash):null,t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){const i=t.fillStyle;(typeof i!="string"||t.currentFillStyle!=i)&&(i!==void 0&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){const i=t.strokeStyle,n=t.lineCap,s=t.lineDash,o=t.lineDashOffset,a=t.lineJoin,l=t.lineWidth,h=t.miterLimit;(t.currentStrokeStyle!=i||t.currentLineCap!=n||s!=t.currentLineDash&&!Hi(t.currentLineDash,s)||t.currentLineDashOffset!=o||t.currentLineJoin!=a||t.currentLineWidth!=l||t.currentMiterLimit!=h)&&(i!==void 0&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=n,t.currentLineDash=s,t.currentLineDashOffset=o,t.currentLineJoin=a,t.currentLineWidth=l,t.currentMiterLimit=h)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;const e=[N.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=Cd(this.maxExtent),this.maxLineWidth>0)){const t=this.resolution*(this.maxLineWidth+1)/2;gh(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}class tE extends Os{constructor(t,e,i,n){super(t,e,i,n),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e,i){if(!this.image_||this.maxExtent&&!_r(this.maxExtent,t.getFlatCoordinates()))return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),s=t.getStride(),o=this.coordinates.length,a=this.appendFlatPointCoordinates(n,s);this.instructions.push([N.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([N.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e,i){if(!this.image_)return;this.beginGeometry(t,e,i);const n=t.getFlatCoordinates(),s=[];for(let l=0,h=n.length;l<h;l+=t.getStride())(!this.maxExtent||_r(this.maxExtent,n.slice(l,l+2)))&&s.push(n[l],n[l+1]);const o=this.coordinates.length,a=this.appendFlatPointCoordinates(s,2);this.instructions.push([N.DRAW_IMAGE,o,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([N.DRAW_IMAGE,o,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){const i=t.getAnchor(),n=t.getSize(),s=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=n[1],this.opacity_=t.getOpacity(),this.originX_=s[0],this.originY_=s[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=n[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}class eE extends Os{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinates_(t,e,i,n){const s=this.coordinates.length,o=this.appendFlatLineCoordinates(t,e,i,n,!1,!1),a=[N.MOVE_TO_LINE_TO,s,o];return this.instructions.push(a),this.hitDetectionInstructions.push(a),i}drawLineString(t,e,i){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([N.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,gi,_i],un);const a=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(a,0,a.length,l),this.hitDetectionInstructions.push(ki),this.endGeometry(e)}drawMultiLineString(t,e,i){const n=this.state,s=n.strokeStyle,o=n.lineWidth;if(s===void 0||o===void 0)return;this.updateStrokeStyle(n,this.applyStroke),this.beginGeometry(t,e,i),this.hitDetectionInstructions.push([N.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,gi,_i],un);const a=t.getEnds(),l=t.getFlatCoordinates(),h=t.getStride();let u=0;for(let c=0,f=a.length;c<f;++c)u=this.drawFlatCoordinates_(l,u,a[c],h);this.hitDetectionInstructions.push(ki),this.endGeometry(e)}finish(){const t=this.state;return t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&this.instructions.push(ki),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){t.lastStroke!=null&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(ki),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(un)}}class bc extends Os{constructor(t,e,i,n){super(t,e,i,n)}drawFlatCoordinatess_(t,e,i,n){const s=this.state,o=s.fillStyle!==void 0,a=s.strokeStyle!==void 0,l=i.length;this.instructions.push(un),this.hitDetectionInstructions.push(un);for(let h=0;h<l;++h){const u=i[h],c=this.coordinates.length,f=this.appendFlatLineCoordinates(t,e,u,n,!0,!a),d=[N.MOVE_TO_LINE_TO,c,f];this.instructions.push(d),this.hitDetectionInstructions.push(d),a&&(this.instructions.push(Ic),this.hitDetectionInstructions.push(Ic)),e=u}return o&&(this.instructions.push(qs),this.hitDetectionInstructions.push(qs)),a&&(this.instructions.push(ki),this.hitDetectionInstructions.push(ki)),e}drawCircle(t,e,i){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([N.SET_FILL_STYLE,jt]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([N.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,gi,_i]);const a=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(a,0,a.length,l,!1,!1);const u=[N.CIRCLE,h];this.instructions.push(un,u),this.hitDetectionInstructions.push(un,u),n.fillStyle!==void 0&&(this.instructions.push(qs),this.hitDetectionInstructions.push(qs)),n.strokeStyle!==void 0&&(this.instructions.push(ki),this.hitDetectionInstructions.push(ki)),this.endGeometry(e)}drawPolygon(t,e,i){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([N.SET_FILL_STYLE,jt]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([N.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,gi,_i]);const a=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,a,h),this.endGeometry(e)}drawMultiPolygon(t,e,i){const n=this.state,s=n.fillStyle,o=n.strokeStyle;if(s===void 0&&o===void 0)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e,i),n.fillStyle!==void 0&&this.hitDetectionInstructions.push([N.SET_FILL_STYLE,jt]),n.strokeStyle!==void 0&&this.hitDetectionInstructions.push([N.SET_STROKE_STYLE,n.strokeStyle,n.lineWidth,n.lineCap,n.lineJoin,n.miterLimit,gi,_i]);const a=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride();let u=0;for(let c=0,f=a.length;c<f;++c)u=this.drawFlatCoordinatess_(l,u,a[c],h);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;const t=this.tolerance;if(t!==0){const e=this.coordinates;for(let i=0,n=e.length;i<n;++i)e[i]=sn(e[i],t)}return super.finish()}setFillStrokeStyles_(){const t=this.state;t.fillStyle!==void 0&&this.updateFillStyle(t,this.createFill),t.strokeStyle!==void 0&&this.updateStrokeStyle(t,this.applyStroke)}}function iE(r,t,e,i,n){const s=[];let o=e,a=0,l=t.slice(e,2);for(;a<r&&o+n<i;){const[h,u]=l.slice(-2),c=t[o+n],f=t[o+n+1],d=Math.sqrt((c-h)*(c-h)+(f-u)*(f-u));if(a+=d,a>=r){const _=(r-a+d)/d,g=we(h,c,_),m=we(u,f,_);l.push(g,m),s.push(l),l=[g,m],a==r&&(o+=n),a=0}else if(a<r)l.push(t[o+n],t[o+n+1]),o+=n;else{const _=d-a,g=we(h,c,_/d),m=we(u,f,_/d);l.push(g,m),s.push(l),l=[g,m],a=0,o+=n}}return a>0&&s.push(l),s}function nE(r,t,e,i,n){let s=e,o=e,a=0,l=0,h=e,u,c,f,d,_,g,m,p,y,E;for(c=e;c<i;c+=n){const v=t[c],x=t[c+1];_!==void 0&&(y=v-_,E=x-g,d=Math.sqrt(y*y+E*E),m!==void 0&&(l+=f,u=Math.acos((m*y+p*E)/(f*d)),u>r&&(l>a&&(a=l,s=h,o=c),l=0,h=c-n)),f=d,m=y,p=E),_=v,g=x}return l+=d,l>a?[h,c]:[s,o]}const Fo={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class rE extends Os{constructor(t,e,i,n){super(t,e,i,n),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textKeepUpright_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[jt]={fillStyle:jt},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterMode_=void 0,this.declutterImageWithText_=void 0}finish(){const t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e,i){const n=this.textFillState_,s=this.textStrokeState_,o=this.textState_;if(this.text_===""||!o||!n&&!s)return;const a=this.coordinates;let l=a.length;const h=t.getType();let u=null,c=t.getStride();if(o.placement==="line"&&(h=="LineString"||h=="MultiLineString"||h=="Polygon"||h=="MultiPolygon")){if(!Ht(this.maxExtent,t.getExtent()))return;let f;if(u=t.getFlatCoordinates(),h=="LineString")f=[u.length];else if(h=="MultiLineString")f=t.getEnds();else if(h=="Polygon")f=t.getEnds().slice(0,1);else if(h=="MultiPolygon"){const m=t.getEndss();f=[];for(let p=0,y=m.length;p<y;++p)f.push(m[p][0])}this.beginGeometry(t,e,i);const d=o.repeat,_=d?void 0:o.textAlign;let g=0;for(let m=0,p=f.length;m<p;++m){let y;d?y=iE(d*this.resolution,u,g,f[m],c):y=[u.slice(g,f[m])];for(let E=0,v=y.length;E<v;++E){const x=y[E];let C=0,R=x.length;if(_==null){const w=nE(o.maxAngle,x,0,x.length,2);C=w[0],R=w[1]}for(let w=C;w<R;w+=c)a.push(x[w],x[w+1]);const T=a.length;g=f[m],this.drawChars_(l,T),l=T}}this.endGeometry(e)}else{let f=o.overflow?null:[];switch(h){case"Point":case"MultiPoint":u=t.getFlatCoordinates();break;case"LineString":u=t.getFlatMidpoint();break;case"Circle":u=t.getCenter();break;case"MultiLineString":u=t.getFlatMidpoints(),c=2;break;case"Polygon":u=t.getFlatInteriorPoint(),o.overflow||f.push(u[2]/this.resolution),c=3;break;case"MultiPolygon":const v=t.getFlatInteriorPoints();u=[];for(let x=0,C=v.length;x<C;x+=3)o.overflow||f.push(v[x+2]/this.resolution),u.push(v[x],v[x+1]);if(u.length===0)return;c=2;break}const d=this.appendFlatPointCoordinates(u,c);if(d===l)return;if(f&&(d-l)/2!==u.length/c){let v=l/2;f=f.filter((x,C)=>{const R=a[(v+C)*2]===u[C*c]&&a[(v+C)*2+1]===u[C*c+1];return R||--v,R})}this.saveTextStates_();const _=o.backgroundFill?this.createFill(this.fillStyleToState(o.backgroundFill)):null,g=o.backgroundStroke?this.createStroke(this.strokeStyleToState(o.backgroundStroke)):null;this.beginGeometry(t,e,i);let m=o.padding;if(m!=hn&&(o.scale[0]<0||o.scale[1]<0)){let v=o.padding[0],x=o.padding[1],C=o.padding[2],R=o.padding[3];o.scale[0]<0&&(x=-x,R=-R),o.scale[1]<0&&(v=-v,C=-C),m=[v,x,C,R]}const p=this.pixelRatio;this.instructions.push([N.DRAW_IMAGE,l,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,this.declutterMode_,this.declutterImageWithText_,m==hn?hn:m.map(function(v){return v*p}),_,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]);const y=1/p,E=_?_.slice(0):null;E&&(E[1]=jt),this.hitDetectionInstructions.push([N.DRAW_IMAGE,l,d,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[y,y],NaN,this.declutterMode_,this.declutterImageWithText_,m,E,g,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?jt:this.fillKey_,this.textOffsetX_,this.textOffsetY_,f]),this.endGeometry(e)}}saveTextStates_(){const t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,n=this.strokeKey_;t&&(n in this.strokeStates||(this.strokeStates[n]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash}));const s=this.textKey_;s in this.textStates||(this.textStates[s]={font:e.font,textAlign:e.textAlign||xs,justify:e.justify,textBaseline:e.textBaseline||Ao,scale:e.scale});const o=this.fillKey_;i&&(o in this.fillStates||(this.fillStates[o]={fillStyle:i.fillStyle}))}drawChars_(t,e){const i=this.textStrokeState_,n=this.textState_,s=this.strokeKey_,o=this.textKey_,a=this.fillKey_;this.saveTextStates_();const l=this.pixelRatio,h=Fo[n.textBaseline],u=this.textOffsetY_*l,c=this.text_,f=i?i.lineWidth*Math.abs(n.scale[0])/2:0;this.instructions.push([N.DRAW_CHARS,t,e,h,n.overflow,a,n.maxAngle,l,u,s,f*l,c,o,1,this.declutterMode_,this.textKeepUpright_]),this.hitDetectionInstructions.push([N.DRAW_CHARS,t,e,h,n.overflow,a&&jt,n.maxAngle,l,u,s,f*l,c,o,1/l,this.declutterMode_,this.textKeepUpright_])}setTextStyle(t,e){let i,n,s;if(!t)this.text_="";else{const o=t.getFill();o?(n=this.textFillState_,n||(n={},this.textFillState_=n),n.fillStyle=qe(o.getColor()||jt)):(n=null,this.textFillState_=n);const a=t.getStroke();if(!a)s=null,this.textStrokeState_=s;else{s=this.textStrokeState_,s||(s={},this.textStrokeState_=s);const g=a.getLineDash(),m=a.getLineDashOffset(),p=a.getWidth(),y=a.getMiterLimit();s.lineCap=a.getLineCap()||yr,s.lineDash=g?g.slice():gi,s.lineDashOffset=m===void 0?_i:m,s.lineJoin=a.getLineJoin()||xr,s.lineWidth=p===void 0?vs:p,s.miterLimit=y===void 0?ps:y,s.strokeStyle=qe(a.getColor()||ys)}i=this.textState_;const l=t.getFont()||fg;zx(l);const h=t.getScaleArray();i.overflow=t.getOverflow(),i.font=l,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||Ao,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||hn,i.scale=h===void 0?[1,1]:h;const u=t.getOffsetX(),c=t.getOffsetY(),f=t.getRotateWithView(),d=t.getKeepUpright(),_=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=u===void 0?0:u,this.textOffsetY_=c===void 0?0:c,this.textRotateWithView_=f===void 0?!1:f,this.textKeepUpright_=d===void 0?!0:d,this.textRotation_=_===void 0?0:_,this.strokeKey_=s?(typeof s.strokeStyle=="string"?s.strokeStyle:J(s.strokeStyle))+s.lineCap+s.lineDashOffset+"|"+s.lineWidth+s.lineJoin+s.miterLimit+"["+s.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=n&&n.fillStyle?typeof n.fillStyle=="string"?n.fillStyle:"|"+J(n.fillStyle):""}this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}const sE={Circle:bc,Default:Os,Image:tE,LineString:eE,Polygon:bc,Text:rE};class oE{constructor(t,e,i,n){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=n,this.resolution_=i,this.buildersByZIndex_={}}finish(){const t={};for(const e in this.buildersByZIndex_){t[e]=t[e]||{};const i=this.buildersByZIndex_[e];for(const n in i){const s=i[n].finish();t[e][n]=s}}return t}getBuilder(t,e){const i=t!==void 0?t.toString():"0";let n=this.buildersByZIndex_[i];n===void 0&&(n={},this.buildersByZIndex_[i]=n);let s=n[e];if(s===void 0){const o=sE[e];s=new o(this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),n[e]=s}return s}}function aE(r,t,e,i){let n=r[t],s=r[t+1],o=0;for(let a=t+i;a<e;a+=i){const l=r[a],h=r[a+1];o+=Math.sqrt((l-n)*(l-n)+(h-s)*(h-s)),n=l,s=h}return o}function lE(r,t,e,i,n,s,o,a,l,h,u,c,f=!0){let d=r[t],_=r[t+1],g=0,m=0,p=0,y=0;function E(){g=d,m=_,t+=i,d=r[t],_=r[t+1],y+=p,p=Math.sqrt((d-g)*(d-g)+(_-m)*(_-m))}do E();while(t<e-i&&y+p<s);let v=p===0?0:(s-y)/p;const x=we(g,d,v),C=we(m,_,v),R=t-i,T=y,w=s+a*l(h,n,u);for(;t<e-i&&y+p<w;)E();v=p===0?0:(w-y)/p;const I=we(g,d,v),P=we(m,_,v);let A=!1;if(f)if(c){const F=[x,C,I,P];Bd(F,0,4,2,c,F,F),A=F[0]>F[2]}else A=x>I;const M=Math.PI,L=[],k=R+i===t;t=R,p=0,y=T,d=r[t],_=r[t+1];let O;if(k){E(),O=Math.atan2(_-m,d-g),A&&(O+=O>0?-M:M);const F=(I+x)/2,D=(P+C)/2;return L[0]=[F,D,(w-s)/2,O,n],L}n=n.replace(/\n/g," ");for(let F=0,D=n.length;F<D;){E();let X=Math.atan2(_-m,d-g);if(A&&(X+=X>0?-M:M),O!==void 0){let tt=X-O;if(tt+=tt>M?-2*M:tt<-M?2*M:0,Math.abs(tt)>o)return null}O=X;const Y=F;let j=0;for(;F<D;++F){const tt=A?D-F-1:F,re=a*l(h,n[tt],u);if(t+i<e&&y+p<s+j+re/2)break;j+=re}if(F===Y)continue;const b=A?n.substring(D-Y,D-F):n.substring(Y,F);v=p===0?0:(s+j/2-y)/p;const xt=we(g,d,v),at=we(m,_,v);L.push([xt,at,j/2,X,b]),s+=j}return L}const Xn=Ae(),Ri=[],ri=[],si=[],Si=[];function Mc(r){return r[3].declutterBox}const Ac=new RegExp("[-----]");function el(r,t){return t==="start"?t=Ac.test(r)?"right":"left":t==="end"&&(t=Ac.test(r)?"left":"right"),Fo[t]}function hE(r,t,e){return e>0&&r.push(`
`,""),r.push(t,""),r}function uE(r,t,e){return e%2===0&&(r+=t),r}class cE{constructor(t,e,i,n,s){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignAndScaleFill_,this.instructions=n.instructions,this.coordinates=n.coordinates,this.coordinateCache_={},this.renderedTransform_=ke(),this.hitDetectionInstructions=n.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=n.fillStates||{},this.strokeStates=n.strokeStates||{},this.textStates=n.textStates||{},this.widths_={},this.labels_={},this.zIndexContext_=s?new Sg:null}getZIndexContext(){return this.zIndexContext_}createLabel(t,e,i,n){const s=t+e+i+n;if(this.labels_[s])return this.labels_[s];const o=n?this.strokeStates[n]:null,a=i?this.fillStates[i]:null,l=this.textStates[e],h=this.pixelRatio,u=[l.scale[0]*h,l.scale[1]*h],c=l.justify?Fo[l.justify]:el(Array.isArray(t)?t[0]:t,l.textAlign||xs),f=n&&o.lineWidth?o.lineWidth:0,d=Array.isArray(t)?t:String(t).split(`
`).reduce(hE,[]),{width:_,height:g,widths:m,heights:p,lineWidths:y}=Wx(l,d),E=_+f,v=[],x=(E+2)*u[0],C=(g+f)*u[1],R={width:x<0?Math.floor(x):Math.ceil(x),height:C<0?Math.floor(C):Math.ceil(C),contextInstructions:v};(u[0]!=1||u[1]!=1)&&v.push("scale",u),n&&(v.push("strokeStyle",o.strokeStyle),v.push("lineWidth",f),v.push("lineCap",o.lineCap),v.push("lineJoin",o.lineJoin),v.push("miterLimit",o.miterLimit),v.push("setLineDash",[o.lineDash]),v.push("lineDashOffset",o.lineDashOffset)),i&&v.push("fillStyle",a.fillStyle),v.push("textBaseline","middle"),v.push("textAlign","center");const T=.5-c;let w=c*E+T*f;const I=[],P=[];let A=0,M=0,L=0,k=0,O;for(let F=0,D=d.length;F<D;F+=2){const X=d[F];if(X===`
`){M+=A,A=0,w=c*E+T*f,++k;continue}const Y=d[F+1]||l.font;Y!==O&&(n&&I.push("font",Y),i&&P.push("font",Y),O=Y),A=Math.max(A,p[L]);const j=[X,w+T*m[L]+c*(m[L]-y[k]),.5*(f+A)+M];w+=m[L],n&&I.push("strokeText",j),i&&P.push("fillText",j),++L}return Array.prototype.push.apply(v,I),Array.prototype.push.apply(v,P),this.labels_[s]=R,R}replayTextBackground_(t,e,i,n,s,o,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,n),t.lineTo.apply(t,s),t.lineTo.apply(t,e),o&&(this.alignAndScaleFill_=o[2],t.fillStyle=o[1],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,n,s,o,a,l,h,u,c,f,d,_,g,m){a*=f[0],l*=f[1];let p=i-a,y=n-l;const E=s+h>t?t-h:s,v=o+u>e?e-u:o,x=_[3]+E*f[0]+_[1],C=_[0]+v*f[1]+_[2],R=p-_[3],T=y-_[0];(g||c!==0)&&(Ri[0]=R,Si[0]=R,Ri[1]=T,ri[1]=T,ri[0]=R+x,si[0]=ri[0],si[1]=T+C,Si[1]=si[1]);let w;return c!==0?(w=yi(ke(),i,n,1,1,c,-i,-n),St(w,Ri),St(w,ri),St(w,si),St(w,Si),Vi(Math.min(Ri[0],ri[0],si[0],Si[0]),Math.min(Ri[1],ri[1],si[1],Si[1]),Math.max(Ri[0],ri[0],si[0],Si[0]),Math.max(Ri[1],ri[1],si[1],Si[1]),Xn)):Vi(Math.min(R,R+x),Math.min(T,T+C),Math.max(R,R+x),Math.max(T,T+C),Xn),d&&(p=Math.round(p),y=Math.round(y)),{drawImageX:p,drawImageY:y,drawImageW:E,drawImageH:v,originX:h,originY:u,declutterBox:{minX:Xn[0],minY:Xn[1],maxX:Xn[2],maxY:Xn[3],value:m},canvasTransform:w,scale:f}}replayImageOrLabel_(t,e,i,n,s,o,a){const l=!!(o||a),h=n.declutterBox,u=a?a[2]*n.scale[0]/2:0;return h.minX-u<=e[0]&&h.maxX+u>=0&&h.minY-u<=e[1]&&h.maxY+u>=0&&(l&&this.replayTextBackground_(t,Ri,ri,si,Si,o,a),Yx(t,n.canvasTransform,s,i,n.originX,n.originY,n.drawImageW,n.drawImageH,n.drawImageX,n.drawImageY,n.scale)),!0}fill_(t){const e=this.alignAndScaleFill_;if(e){const i=St(this.renderedTransform_,[0,0]),n=512*this.pixelRatio;t.save(),t.translate(i[0]%n,i[1]%n),e!==1&&t.scale(e,e),t.rotate(this.viewRotation_)}t.fill(),e&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,n){const s=this.textStates[e],o=this.createLabel(t,e,n,i),a=this.strokeStates[i],l=this.pixelRatio,h=el(Array.isArray(t)?t[0]:t,s.textAlign||xs),u=Fo[s.textBaseline||Ao],c=a&&a.lineWidth?a.lineWidth:0,f=o.width/l-2*s.scale[0],d=h*f+2*(.5-h)*c,_=u*o.height/l+2*(.5-u)*c;return{label:o,anchorX:d,anchorY:_}}execute_(t,e,i,n,s,o,a,l){const h=this.zIndexContext_;let u;this.pixelCoordinates_&&Hi(i,this.renderedTransform_)?u=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),u=Xi(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),z0(this.renderedTransform_,i));let c=0;const f=n.length;let d=0,_,g,m,p,y,E,v,x,C,R,T,w,I,P=0,A=0;const M=this.coordinateCache_,L=this.viewRotation_,k=Math.round(Math.atan2(-i[1],i[0])*1e12)/1e12,O={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:L},F=this.instructions!=n||this.overlaps?0:200;let D,X,Y,j;for(;c<f;){const b=n[c];switch(b[0]){case N.BEGIN_GEOMETRY:D=b[1],j=b[3],D.getGeometry()?a!==void 0&&!Ht(a,j.getExtent())?c=b[2]+1:++c:c=b[2],h&&(h.zIndex=b[4]);break;case N.BEGIN_PATH:P>F&&(this.fill_(t),P=0),A>F&&(t.stroke(),A=0),!P&&!A&&(t.beginPath(),y=NaN,E=NaN),++c;break;case N.CIRCLE:d=b[1];const at=u[d],tt=u[d+1],re=u[d+2],Pt=u[d+3],Xe=re-at,Le=Pt-tt,se=Math.sqrt(Xe*Xe+Le*Le);t.moveTo(at+se,tt),t.arc(at,tt,se,0,2*Math.PI,!0),++c;break;case N.CLOSE_PATH:t.closePath(),++c;break;case N.CUSTOM:d=b[1],_=b[2];const Ds=b[3],ga=b[4],Mr=b[5];O.geometry=Ds,O.feature=D,c in M||(M[c]=[]);const qi=M[c];Mr?Mr(u,d,_,2,qi):(qi[0]=u[d],qi[1]=u[d+1],qi.length=2),h&&(h.zIndex=b[6]),ga(qi,O),++c;break;case N.DRAW_IMAGE:d=b[1],_=b[2],C=b[3],g=b[4],m=b[5];let _e=b[6];const We=b[7],bn=b[8],Mn=b[9],Ar=b[10];let $i=b[11];const An=b[12];let Pn=b[13];p=b[14]||"declutter";const Tt=b[15];if(!C&&b.length>=20){R=b[19],T=b[20],w=b[21],I=b[22];const me=this.drawLabelWithPointPlacement_(R,T,w,I);C=me.label,b[3]=C;const Ji=b[23];g=(me.anchorX-Ji)*this.pixelRatio,b[4]=g;const pe=b[24];m=(me.anchorY-pe)*this.pixelRatio,b[5]=m,_e=C.height,b[6]=_e,Pn=C.width,b[13]=Pn}let _a;b.length>25&&(_a=b[25]);let ma,Fs,ks;b.length>17?(ma=b[16],Fs=b[17],ks=b[18]):(ma=hn,Fs=null,ks=null),Ar&&k?$i+=L:!Ar&&!k&&($i-=L);let Ng=0;for(;d<_;d+=2){if(_a&&_a[Ng++]<Pn/this.pixelRatio)continue;const me=this.calculateImageOrLabelDimensions_(C.width,C.height,u[d],u[d+1],Pn,_e,g,m,bn,Mn,$i,An,s,ma,!!Fs||!!ks,D),Ji=[t,e,C,me,We,Fs,ks];if(l){let pe,Ye,ye;if(Tt){const dt=_-d;if(!Tt[dt]){Tt[dt]={args:Ji,declutterMode:p};continue}const Gt=Tt[dt];pe=Gt.args,Ye=Gt.declutterMode,delete Tt[dt],ye=Mc(pe)}let ei,ii;if(pe&&(Ye!=="declutter"||!l.collides(ye))&&(ei=!0),(p!=="declutter"||!l.collides(me.declutterBox))&&(ii=!0),Ye==="declutter"&&p==="declutter"){const dt=ei&&ii;ei=dt,ii=dt}ei&&(Ye!=="none"&&l.insert(ye),this.replayImageOrLabel_.apply(this,pe)),ii&&(p!=="none"&&l.insert(me.declutterBox),this.replayImageOrLabel_.apply(this,Ji))}else this.replayImageOrLabel_.apply(this,Ji)}++c;break;case N.DRAW_CHARS:const Hh=b[1],qh=b[2],pa=b[3],Gg=b[4];I=b[5];const zg=b[6],$h=b[7],Jh=b[8];w=b[9];const ya=b[10];R=b[11],Array.isArray(R)&&(R=R.reduce(uE,"")),T=b[12];const Qh=[b[13],b[13]];p=b[14]||"declutter";const Xg=b[15],xa=this.textStates[T],Pr=xa.font,Lr=[xa.scale[0]*$h,xa.scale[1]*$h];let Or;Pr in this.widths_?Or=this.widths_[Pr]:(Or={},this.widths_[Pr]=Or);const tu=aE(u,Hh,qh,2),eu=Math.abs(Lr[0])*fc(Pr,R,Or);if(Gg||eu<=tu){const me=this.textStates[T].textAlign,Ji=(tu-eu)*el(R,me),pe=lE(u,Hh,qh,2,R,Ji,zg,Math.abs(Lr[0]),fc,Pr,Or,k?0:this.viewRotation_,Xg);t:if(pe){const Ye=[];let ye,ei,ii,dt,Gt;if(w)for(ye=0,ei=pe.length;ye<ei;++ye){Gt=pe[ye],ii=Gt[4],dt=this.createLabel(ii,T,"",w),g=Gt[2]+(Lr[0]<0?-ya:ya),m=pa*dt.height+(.5-pa)*2*ya*Lr[1]/Lr[0]-Jh;const ni=this.calculateImageOrLabelDimensions_(dt.width,dt.height,Gt[0],Gt[1],dt.width,dt.height,g,m,0,0,Gt[3],Qh,!1,hn,!1,D);if(l&&p==="declutter"&&l.collides(ni.declutterBox))break t;Ye.push([t,e,dt,ni,1,null,null])}if(I)for(ye=0,ei=pe.length;ye<ei;++ye){Gt=pe[ye],ii=Gt[4],dt=this.createLabel(ii,T,I,""),g=Gt[2],m=pa*dt.height-Jh;const ni=this.calculateImageOrLabelDimensions_(dt.width,dt.height,Gt[0],Gt[1],dt.width,dt.height,g,m,0,0,Gt[3],Qh,!1,hn,!1,D);if(l&&p==="declutter"&&l.collides(ni.declutterBox))break t;Ye.push([t,e,dt,ni,1,null,null])}l&&p!=="none"&&l.load(Ye.map(Mc));for(let ni=0,Wg=Ye.length;ni<Wg;++ni)this.replayImageOrLabel_.apply(this,Ye[ni])}}++c;break;case N.END_GEOMETRY:if(o!==void 0){D=b[1];const me=o(D,j,p);if(me)return me}++c;break;case N.FILL:F?P++:this.fill_(t),++c;break;case N.MOVE_TO_LINE_TO:for(d=b[1],_=b[2],X=u[d],Y=u[d+1],t.moveTo(X,Y),y=X+.5|0,E=Y+.5|0,d+=2;d<_;d+=2)X=u[d],Y=u[d+1],v=X+.5|0,x=Y+.5|0,(d==_-2||v!==y||x!==E)&&(t.lineTo(X,Y),y=v,E=x);++c;break;case N.SET_FILL_STYLE:this.alignAndScaleFill_=b[2],P&&(this.fill_(t),P=0,A&&(t.stroke(),A=0)),t.fillStyle=b[1],++c;break;case N.SET_STROKE_STYLE:A&&(t.stroke(),A=0),this.setStrokeStyle_(t,b),++c;break;case N.STROKE:F?A++:t.stroke(),++c;break;default:++c;break}}P&&this.fill_(t),A&&t.stroke()}execute(t,e,i,n,s,o){this.viewRotation_=n,this.execute_(t,e,i,this.instructions,s,void 0,void 0,o)}executeHitDetection(t,e,i,n,s){return this.viewRotation_=i,this.execute_(t,[t.canvas.width,t.canvas.height],e,this.hitDetectionInstructions,!0,n,s)}}const $n=["Polygon","Circle","LineString","Image","Text","Default"],Og=["Image","Text"],fE=$n.filter(r=>!Og.includes(r));class dE{constructor(t,e,i,n,s,o,a){this.maxExtent_=t,this.overlaps_=n,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=o,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=ke(),this.renderedContext_=null,this.deferredZIndexContexts_={},this.createExecutors_(s,a)}clip(t,e){const i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t,e){for(const i in t){let n=this.executorsByZIndex_[i];n===void 0&&(n={},this.executorsByZIndex_[i]=n);const s=t[i];for(const o in s){const a=s[o];n[o]=new cE(this.resolution_,this.pixelRatio_,this.overlaps_,a,e)}}}hasExecutors(t){for(const e in this.executorsByZIndex_){const i=this.executorsByZIndex_[e];for(let n=0,s=t.length;n<s;++n)if(t[n]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,n,s,o){n=Math.round(n);const a=n*2+1,l=yi(this.hitDetectionTransform_,n+.5,n+.5,1/e,-1/e,-i,-t[0],-t[1]),h=!this.hitDetectionContext_;h&&(this.hitDetectionContext_=Ct(a,a));const u=this.hitDetectionContext_;u.canvas.width!==a||u.canvas.height!==a?(u.canvas.width=a,u.canvas.height=a):h||u.clearRect(0,0,a,a);let c;this.renderBuffer_!==void 0&&(c=Ae(),Jr(c,t),gh(c,e*(this.renderBuffer_+n),c));const f=gE(n);let d;function _(x,C,R){const T=u.getImageData(0,0,a,a).data;for(let w=0,I=f.length;w<I;w++)if(T[f[w]]>0){if(!o||R==="none"||d!=="Image"&&d!=="Text"||o.includes(x)){const P=(f[w]-3)/4,A=n-P%a,M=n-(P/a|0),L=s(x,C,A*A+M*M);if(L)return L}u.clearRect(0,0,a,a);break}}const g=Object.keys(this.executorsByZIndex_).map(Number);g.sort(di);let m,p,y,E,v;for(m=g.length-1;m>=0;--m){const x=g[m].toString();for(y=this.executorsByZIndex_[x],p=$n.length-1;p>=0;--p)if(d=$n[p],E=y[d],E!==void 0&&(v=E.executeHitDetection(u,l,i,_,c),v))return v}}getClipCoords(t){const e=this.maxExtent_;if(!e)return null;const i=e[0],n=e[1],s=e[2],o=e[3],a=[i,n,i,o,s,o,s,n];return Xi(a,0,8,2,t,a),a}isEmpty(){return gr(this.executorsByZIndex_)}execute(t,e,i,n,s,o,a){const l=Object.keys(this.executorsByZIndex_).map(Number);l.sort(a?Np:di),o=o||$n;const h=$n.length;for(let u=0,c=l.length;u<c;++u){const f=l[u].toString(),d=this.executorsByZIndex_[f];for(let _=0,g=o.length;_<g;++_){const m=o[_],p=d[m];if(p!==void 0){const y=a===null?void 0:p.getZIndexContext(),E=y?y.getContext():t,v=this.maxExtent_&&m!=="Image"&&m!=="Text";if(v&&(E.save(),this.clip(E,i)),!y||m==="Text"||m==="Image"?p.execute(E,e,i,n,s,a):y.pushFunction(x=>p.execute(x,e,i,n,s,a)),v&&E.restore(),y){y.offset();const x=l[u]*h+_;this.deferredZIndexContexts_[x]||(this.deferredZIndexContexts_[x]=[]),this.deferredZIndexContexts_[x].push(y)}}}}this.renderedContext_=t}getDeferredZIndexContexts(){return this.deferredZIndexContexts_}getRenderedContext(){return this.renderedContext_}renderDeferred(){const t=this.deferredZIndexContexts_,e=Object.keys(t).map(Number).sort(di);for(let i=0,n=e.length;i<n;++i)t[e[i]].forEach(s=>{s.draw(this.renderedContext_),s.clear()}),t[e[i]].length=0}}const il={};function gE(r){if(il[r]!==void 0)return il[r];const t=r*2+1,e=r*r,i=new Array(e+1);for(let s=0;s<=r;++s)for(let o=0;o<=r;++o){const a=s*s+o*o;if(a>e)break;let l=i[a];l||(l=[],i[a]=l),l.push(((r+s)*t+(r+o))*4+3),s>0&&l.push(((r-s)*t+(r+o))*4+3),o>0&&(l.push(((r+s)*t+(r-o))*4+3),s>0&&l.push(((r-s)*t+(r-o))*4+3))}const n=[];for(let s=0,o=i.length;s<o;++s)i[s]&&n.push(...i[s]);return il[r]=n,n}class _E extends Lg{constructor(t,e,i,n,s,o,a){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=n,this.transformRotation_=n?qo(Math.atan2(n[1],n[0]),10):0,this.viewRotation_=s,this.squaredTolerance_=o,this.userTransform_=a,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=ke()}drawImages_(t,e,i,n){if(!this.image_)return;const s=Xi(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_,a=this.tmpLocalTransform_,l=o.globalAlpha;this.imageOpacity_!=1&&(o.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;this.transformRotation_===0&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let u=0,c=s.length;u<c;u+=2){const f=s[u]-this.imageAnchorX_,d=s[u+1]-this.imageAnchorY_;if(h!==0||this.imageScale_[0]!=1||this.imageScale_[1]!=1){const _=f+this.imageAnchorX_,g=d+this.imageAnchorY_;yi(a,_,g,1,1,h,-_,-g),o.save(),o.transform.apply(o,a),o.translate(_,g),o.scale(this.imageScale_[0],this.imageScale_[1]),o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),o.restore()}else o.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,f,d,this.imageWidth_,this.imageHeight_)}this.imageOpacity_!=1&&(o.globalAlpha=l)}drawText_(t,e,i,n){if(!this.textState_||this.text_==="")return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);const s=Xi(t,e,i,n,this.transform_,this.pixelCoordinates_),o=this.context_;let a=this.textRotation_;for(this.transformRotation_===0&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=n){const l=s[e]+this.textOffsetX_,h=s[e+1]+this.textOffsetY_;a!==0||this.textScale_[0]!=1||this.textScale_[1]!=1?(o.save(),o.translate(l-this.textOffsetX_,h-this.textOffsetY_),o.rotate(a),o.translate(this.textOffsetX_,this.textOffsetY_),o.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&o.strokeText(this.text_,0,0),this.textFillState_&&o.fillText(this.text_,0,0),o.restore()):(this.textStrokeState_&&o.strokeText(this.text_,l,h),this.textFillState_&&o.fillText(this.text_,l,h))}}moveToLineTo_(t,e,i,n,s){const o=this.context_,a=Xi(t,e,i,n,this.transform_,this.pixelCoordinates_);o.moveTo(a[0],a[1]);let l=a.length;s&&(l-=2);for(let h=2;h<l;h+=2)o.lineTo(a[h],a[h+1]);return s&&o.closePath(),i}drawRings_(t,e,i,n){for(let s=0,o=i.length;s<o;++s)e=this.moveToLineTo_(t,e,i[s],n,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=H0(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],n=e[3]-e[1],s=Math.sqrt(i*i+n*n),o=this.context_;o.beginPath(),o.arc(e[0],e[1],s,0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}this.text_!==""&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t);break}}drawFeature(t,e){const i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){const e=t.getGeometriesArray();for(let i=0,n=e.length;i<n;++i)this.drawGeometry(e[i])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),this.text_!==""&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(this.text_!==""){const e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));const e=t.getExtent();if(Ht(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);const i=this.context_,n=t.getFlatCoordinates();let s=0;const o=t.getEnds(),a=t.getStride();i.beginPath();for(let l=0,h=o.length;l<h;++l)s=this.moveToLineTo_(n,s,o[l],a,!1);i.stroke()}if(this.text_!==""){const i=t.getFlatMidpoints();this.drawText_(i,0,i.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),!!Ht(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);const e=this.context_,i=t.getOrientedFlatCoordinates();let n=0;const s=t.getEndss(),o=t.getStride();e.beginPath();for(let a=0,l=s.length;a<l;++a){const h=s[a];n=this.drawRings_(i,n,h,o)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(this.text_!==""){const e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){const e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){const e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),Hi(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){const e=this.context_,i=this.contextTextState_,n=t.textAlign?t.textAlign:xs;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=n&&(i.textAlign=n,e.textAlign=n),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=n,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:n,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(!t)this.fillState_=null;else{const i=t.getColor();this.fillState_={fillStyle:qe(i||jt)}}if(!e)this.strokeState_=null;else{const i=e.getColor(),n=e.getLineCap(),s=e.getLineDash(),o=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),u=s||gi;this.strokeState_={lineCap:n!==void 0?n:yr,lineDash:this.pixelRatio_===1?u:u.map(c=>c*this.pixelRatio_),lineDashOffset:(o||_i)*this.pixelRatio_,lineJoin:a!==void 0?a:xr,lineWidth:(l!==void 0?l:vs)*this.pixelRatio_,miterLimit:h!==void 0?h:ps,strokeStyle:qe(i||ys)}}}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}const i=t.getPixelRatio(this.pixelRatio_),n=t.getAnchor(),s=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=n[0]*i,this.imageAnchorY_=n[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=s[0],this.imageOriginY_=s[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();const o=t.getScaleArray();this.imageScale_=[o[0]*this.pixelRatio_/i,o[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(!t)this.text_="";else{const e=t.getFill();if(!e)this.textFillState_=null;else{const d=e.getColor();this.textFillState_={fillStyle:qe(d||jt)}}const i=t.getStroke();if(!i)this.textStrokeState_=null;else{const d=i.getColor(),_=i.getLineCap(),g=i.getLineDash(),m=i.getLineDashOffset(),p=i.getLineJoin(),y=i.getWidth(),E=i.getMiterLimit();this.textStrokeState_={lineCap:_!==void 0?_:yr,lineDash:g||gi,lineDashOffset:m||_i,lineJoin:p!==void 0?p:xr,lineWidth:y!==void 0?y:vs,miterLimit:E!==void 0?E:ps,strokeStyle:qe(d||ys)}}const n=t.getFont(),s=t.getOffsetX(),o=t.getOffsetY(),a=t.getRotateWithView(),l=t.getRotation(),h=t.getScaleArray(),u=t.getText(),c=t.getTextAlign(),f=t.getTextBaseline();this.textState_={font:n!==void 0?n:fg,textAlign:c!==void 0?c:xs,textBaseline:f!==void 0?f:Ao},this.text_=u!==void 0?Array.isArray(u)?u.reduce((d,_,g)=>d+=g%2?" ":_,""):u:"",this.textOffsetX_=s!==void 0?this.pixelRatio_*s:0,this.textOffsetY_=o!==void 0?this.pixelRatio_*o:0,this.textRotateWithView_=a!==void 0?a:!1,this.textRotation_=l!==void 0?l:0,this.textScale_=[this.pixelRatio_*h[0],this.pixelRatio_*h[1]]}}}const Ze=.5;function mE(r,t,e,i,n,s,o,a,l){const h=n,u=r[0]*Ze,c=r[1]*Ze,f=Ct(u,c);f.imageSmoothingEnabled=!1;const d=f.canvas,_=new _E(f,Ze,n,null,o,a,null),g=e.length,m=Math.floor((256*256*256-1)/g),p={};for(let E=1;E<=g;++E){const v=e[E-1],x=v.getStyleFunction()||i;if(!x)continue;let C=x(v,s);if(!C)continue;Array.isArray(C)||(C=[C]);const T=(E*m).toString(16).padStart(7,"#00000");for(let w=0,I=C.length;w<I;++w){const P=C[w],A=P.getGeometryFunction()(v);if(!A||!Ht(h,A.getExtent()))continue;const M=P.clone(),L=M.getFill();L&&L.setColor(T);const k=M.getStroke();k&&(k.setColor(T),k.setLineDash(null)),M.setText(void 0);const O=P.getImage();if(O){const Y=O.getImageSize();if(!Y)continue;const j=Ct(Y[0],Y[1],void 0,{alpha:!1}),b=j.canvas;j.fillStyle=T,j.fillRect(0,0,b.width,b.height),M.setImage(new Ps({img:b,anchor:O.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:O.getOrigin(),opacity:1,size:O.getSize(),scale:O.getScale(),rotation:O.getRotation(),rotateWithView:O.getRotateWithView()}))}const F=M.getZIndex()||0;let D=p[F];D||(D={},p[F]=D,D.Polygon=[],D.Circle=[],D.LineString=[],D.Point=[]);const X=A.getType();if(X==="GeometryCollection"){const Y=A.getGeometriesArrayRecursive();for(let j=0,b=Y.length;j<b;++j){const xt=Y[j];D[xt.getType().replace("Multi","")].push(xt,M)}}else D[X.replace("Multi","")].push(A,M)}}const y=Object.keys(p).map(Number).sort(di);for(let E=0,v=y.length;E<v;++E){const x=p[y[E]];for(const C in x){const R=x[C];for(let T=0,w=R.length;T<w;T+=2){_.setStyle(R[T+1]);for(let I=0,P=t.length;I<P;++I)_.setTransform(t[I]),_.drawGeometry(R[T])}}}return f.getImageData(0,0,d.width,d.height)}function pE(r,t,e){const i=[];if(e){const n=Math.floor(Math.round(r[0])*Ze),s=Math.floor(Math.round(r[1])*Ze),o=(ft(n,0,e.width-1)+ft(s,0,e.height-1)*e.width)*4,a=e.data[o],l=e.data[o+1],u=e.data[o+2]+256*(l+256*a),c=Math.floor((256*256*256-1)/t.length);u&&u%c===0&&i.push(t[u/c-1])}return i}const yE=.5,Dg={Point:SE,LineString:CE,Polygon:bE,MultiPoint:IE,MultiLineString:TE,MultiPolygon:RE,GeometryCollection:wE,Circle:vE};function xE(r,t){return parseInt(J(r),10)-parseInt(J(t),10)}function Pc(r,t){const e=Fg(r,t);return e*e}function Fg(r,t){return yE*r/t}function vE(r,t,e,i,n){const s=e.getFill(),o=e.getStroke();if(s||o){const l=r.getBuilder(e.getZIndex(),"Circle");l.setFillStrokeStyle(s,o),l.drawCircle(t,i,n)}const a=e.getText();if(a&&a.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i)}}function Lc(r,t,e,i,n,s,o,a){const l=[],h=e.getImage();if(h){let f=!0;const d=h.getImageState();d==U.LOADED||d==U.ERROR?f=!1:d==U.IDLE&&h.load(),f&&l.push(h.ready())}const u=e.getFill();u&&u.loading()&&l.push(u.ready());const c=l.length>0;return c&&Promise.all(l).then(()=>n(null)),EE(r,t,e,i,s,o,a),c}function EE(r,t,e,i,n,s,o){const a=e.getGeometryFunction()(t);if(!a)return;const l=a.simplifyTransformed(i,n);if(e.getRenderer())kg(r,l,e,t,o);else{const u=Dg[l.getType()];u(r,l,e,t,o,s)}}function kg(r,t,e,i,n){if(t.getType()=="GeometryCollection"){const o=t.getGeometries();for(let a=0,l=o.length;a<l;++a)kg(r,o[a],e,i,n);return}r.getBuilder(e.getZIndex(),"Default").drawCustom(t,i,e.getRenderer(),e.getHitDetectionRenderer(),n)}function wE(r,t,e,i,n,s){const o=t.getGeometriesArray();let a,l;for(a=0,l=o.length;a<l;++a){const h=Dg[o[a].getType()];h(r,o[a],e,i,n,s)}}function CE(r,t,e,i,n){const s=e.getStroke();if(s){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawLineString(t,i,n)}const o=e.getText();if(o&&o.getText()){const a=r.getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i,n)}}function TE(r,t,e,i,n){const s=e.getStroke();if(s){const a=r.getBuilder(e.getZIndex(),"LineString");a.setFillStrokeStyle(null,s),a.drawMultiLineString(t,i,n)}const o=e.getText();if(o&&o.getText()){const a=r.getBuilder(e.getZIndex(),"Text");a.setTextStyle(o),a.drawText(t,i,n)}}function RE(r,t,e,i,n){const s=e.getFill(),o=e.getStroke();if(o||s){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawMultiPolygon(t,i,n)}const a=e.getText();if(a&&a.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i,n)}}function SE(r,t,e,i,n,s){const o=e.getImage(),a=e.getText(),l=a&&a.getText(),h=s&&o&&l?{}:void 0;if(o){if(o.getImageState()!=U.LOADED)return;const u=r.getBuilder(e.getZIndex(),"Image");u.setImageStyle(o,h),u.drawPoint(t,i,n)}if(l){const u=r.getBuilder(e.getZIndex(),"Text");u.setTextStyle(a,h),u.drawText(t,i,n)}}function IE(r,t,e,i,n,s){const o=e.getImage(),a=o&&o.getOpacity()!==0,l=e.getText(),h=l&&l.getText(),u=s&&a&&h?{}:void 0;if(a){if(o.getImageState()!=U.LOADED)return;const c=r.getBuilder(e.getZIndex(),"Image");c.setImageStyle(o,u),c.drawMultiPoint(t,i,n)}if(h){const c=r.getBuilder(e.getZIndex(),"Text");c.setTextStyle(l,u),c.drawText(t,i,n)}}function bE(r,t,e,i,n){const s=e.getFill(),o=e.getStroke();if(s||o){const l=r.getBuilder(e.getZIndex(),"Polygon");l.setFillStrokeStyle(s,o),l.drawPolygon(t,i,n)}const a=e.getText();if(a&&a.getText()){const l=r.getBuilder(e.getZIndex(),"Text");l.setTextStyle(a),l.drawText(t,i,n)}}class ME extends Ig{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.clipped_=!1,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=Ae(),this.wrappedRenderedExtent_=Ae(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedPixelRatio_=1,this.renderedRenderOrder_=null,this.renderedFrameDeclutter_,this.replayGroup_=null,this.replayGroupChanged=!0,this.clipping=!0,this.targetContext_=null,this.opacity_=1}renderWorlds(t,e,i){const n=e.extent,s=e.viewState,o=s.center,a=s.resolution,l=s.projection,h=s.rotation,u=l.getExtent(),c=this.getLayer().getSource(),f=this.getLayer().getDeclutter(),d=e.pixelRatio,_=e.viewHints,g=!(_[Dt.ANIMATING]||_[Dt.INTERACTING]),m=this.context,p=Math.round(it(n)/a*d),y=Math.round(Yt(n)/a*d),E=c.getWrapX()&&l.canWrapX(),v=E?it(u):null,x=E?Math.ceil((n[2]-u[2])/v)+1:1;let C=E?Math.floor((n[0]-u[0])/v):0;do{let R=this.getRenderTransform(o,a,0,d,p,y,C*v);e.declutter&&(R=R.slice(0)),t.execute(m,[m.canvas.width,m.canvas.height],R,h,g,i===void 0?$n:i?Og:fE,i?f&&e.declutter[f]:void 0)}while(++C<x)}setDrawContext_(){this.opacity_!==1&&(this.targetContext_=this.context,this.context=Ct(this.context.canvas.width,this.context.canvas.height,Tc))}resetDrawContext_(){if(this.opacity_!==1){const t=this.targetContext_.globalAlpha;this.targetContext_.globalAlpha=this.opacity_,this.targetContext_.drawImage(this.context.canvas,0,0),this.targetContext_.globalAlpha=t,oa(this.context),Tc.push(this.context.canvas),this.context=this.targetContext_,this.targetContext_=null}}renderDeclutter(t){!this.replayGroup_||!this.getLayer().getDeclutter()||this.renderWorlds(this.replayGroup_,t,!0)}renderDeferredInternal(t){this.replayGroup_&&(this.replayGroup_.renderDeferred(),this.clipped_&&this.context.restore(),this.resetDrawContext_())}renderFrame(t,e){const i=t.layerStatesArray[t.layerIndex];this.opacity_=i.opacity;const n=t.viewState;this.prepareContainer(t,e);const s=this.context,o=this.replayGroup_;let a=o&&!o.isEmpty();if(!a&&!(this.getLayer().hasListener(Se.PRERENDER)||this.getLayer().hasListener(Se.POSTRENDER)))return this.container;if(this.setDrawContext_(),this.preRender(s,t),n.projection,this.clipped_=!1,a&&i.extent&&this.clipping){const l=Fi(i.extent);a=Ht(l,t.extent),this.clipped_=a&&!jn(l,t.extent),this.clipped_&&this.clipUnrotated(s,t,l)}return a&&this.renderWorlds(o,t,this.getLayer().getDeclutter()?!1:void 0),!t.declutter&&this.clipped_&&s.restore(),this.postRender(s,t),this.renderedRotation_!==n.rotation&&(this.renderedRotation_=n.rotation,this.hitDetectionImageData_=null),t.declutter||this.resetDrawContext_(),this.container}getFeatures(t){return new Promise(e=>{if(this.frameState&&!this.hitDetectionImageData_&&!this.animatingOrInteracting_){const i=this.frameState.size.slice(),n=this.renderedCenter_,s=this.renderedResolution_,o=this.renderedRotation_,a=this.renderedProjection_,l=this.wrappedRenderedExtent_,h=this.getLayer(),u=[],c=i[0]*Ze,f=i[1]*Ze;u.push(this.getRenderTransform(n,s,o,Ze,c,f,0).slice());const d=h.getSource(),_=a.getExtent();if(d.getWrapX()&&a.canWrapX()&&!jn(_,l)){let g=l[0];const m=it(_);let p=0,y;for(;g<_[0];)--p,y=m*p,u.push(this.getRenderTransform(n,s,o,Ze,c,f,y).slice()),g+=m;for(p=0,g=l[2];g>_[2];)++p,y=m*p,u.push(this.getRenderTransform(n,s,o,Ze,c,f,y).slice()),g-=m}this.hitDetectionImageData_=mE(i,u,this.renderedFeatures_,h.getStyleFunction(),l,s,o,Pc(s,this.renderedPixelRatio_))}e(pE(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,n,s){var f,d;if(!this.replayGroup_)return;const o=e.viewState.resolution,a=e.viewState.rotation,l=this.getLayer(),h={},u=function(_,g,m){const p=J(_),y=h[p];if(y){if(y!==!0&&m<y.distanceSq){if(m===0)return h[p]=!0,s.splice(s.lastIndexOf(y),1),n(_,l,g);y.geometry=g,y.distanceSq=m}}else{if(m===0)return h[p]=!0,n(_,l,g);s.push(h[p]={feature:_,layer:l,geometry:g,distanceSq:m,callback:n})}},c=this.getLayer().getDeclutter();return this.replayGroup_.forEachFeatureAtCoordinate(t,o,a,i,u,c?(d=(f=e.declutter)==null?void 0:f[c])==null?void 0:d.all().map(_=>_.value):null)}handleFontsChanged(){const t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){const e=this.getLayer(),i=e.getSource();if(!i)return!1;const n=t.viewHints[Dt.ANIMATING],s=t.viewHints[Dt.INTERACTING],o=e.getUpdateWhileAnimating(),a=e.getUpdateWhileInteracting();if(this.ready&&!o&&n||!a&&s)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;const l=t.extent,h=t.viewState,u=h.projection,c=h.resolution,f=t.pixelRatio,d=e.getRevision(),_=e.getRenderBuffer();let g=e.getRenderOrder();g===void 0&&(g=xE);const m=h.center.slice(),p=gh(l,_*c),y=p.slice(),E=[p.slice()],v=u.getExtent();if(i.getWrapX()&&u.canWrapX()&&!jn(v,t.extent)){const L=it(v),k=Math.max(it(p)/2,L);p[0]=v[0]-k,p[2]=v[2]+k,Ld(m,u);const O=Ad(E[0],u);O[0]<v[0]&&O[2]<v[2]?E.push([O[0]+L,O[1],O[2]+L,O[3]]):O[0]>v[0]&&O[2]>v[2]&&E.push([O[0]-L,O[1],O[2]-L,O[3]])}if(this.ready&&this.renderedResolution_==c&&this.renderedRevision_==d&&this.renderedRenderOrder_==g&&this.renderedFrameDeclutter_===!!t.declutter&&jn(this.wrappedRenderedExtent_,p))return Hi(this.renderedExtent_,y)||(this.hitDetectionImageData_=null,this.renderedExtent_=y),this.renderedCenter_=m,this.replayGroupChanged=!1,!0;this.replayGroup_=null;const x=new oE(Fg(c,f),p,c,f);let C;for(let L=0,k=E.length;L<k;++L)i.loadFeatures(E[L],c,u);const R=Pc(c,f);let T=!0;const w=(L,k)=>{let O;const F=L.getStyleFunction()||e.getStyleFunction();if(F&&(O=F(L,c)),O){const D=this.renderFeature(L,R,O,x,C,this.getLayer().getDeclutter(),k);T=T&&!D}},I=Wd(p),P=i.getFeaturesInExtent(I);g&&P.sort(g);for(let L=0,k=P.length;L<k;++L)w(P[L],L);this.renderedFeatures_=P,this.ready=T;const A=x.finish(),M=new dE(p,c,f,i.getOverlaps(),A,e.getRenderBuffer(),!!t.declutter);return this.renderedResolution_=c,this.renderedRevision_=d,this.renderedRenderOrder_=g,this.renderedFrameDeclutter_=!!t.declutter,this.renderedExtent_=y,this.wrappedRenderedExtent_=p,this.renderedCenter_=m,this.renderedProjection_=u,this.renderedPixelRatio_=f,this.replayGroup_=M,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,n,s,o,a){if(!i)return!1;let l=!1;if(Array.isArray(i))for(let h=0,u=i.length;h<u;++h)l=Lc(n,t,i[h],e,this.boundHandleStyleImageChange_,s,o,a)||l;else l=Lc(n,t,i,e,this.boundHandleStyleImageChange_,s,o,a);return l}}class AE extends vg{constructor(t){super(t)}createRenderer(){return new ME(this)}}let PE=!1;function LE(r,t,e,i,n,s,o){const a=new XMLHttpRequest;a.open("GET",typeof r=="function"?r(e,i,n):r,!0),t.getType()=="arraybuffer"&&(a.responseType="arraybuffer"),a.withCredentials=PE,a.onload=function(l){if(!a.status||a.status>=200&&a.status<300){const h=t.getType();try{let u;h=="text"||h=="json"?u=a.responseText:h=="xml"?u=a.responseXML||a.responseText:h=="arraybuffer"&&(u=a.response),u?s(t.readFeatures(u,{extent:e,featureProjection:n}),t.readProjection(u)):o()}catch{o()}}else o()},a.onerror=o,a.send()}function Oc(r,t){return function(e,i,n,s,o){LE(r,t,e,i,n,(a,l)=>{this.addFeatures(a),s!==void 0&&s(a)},()=>{this.changed(),o!==void 0&&o()})}}function OE(r,t){return[[-1/0,-1/0,1/0,1/0]]}class jh extends ze{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new jh(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(lt(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=H(t,W.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?DE(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function DE(r){if(typeof r=="function")return r;let t;return Array.isArray(r)?t=r:(Q(typeof r.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[r]),function(){return t}}function FE(r,t,e,i){const n=[];let s=Ae();for(let o=0,a=e.length;o<a;++o){const l=e[o];s=_h(r,t,l[0],i),n.push((s[0]+s[2])/2,(s[1]+s[3])/2),t=l[l.length-1]}return n}function Dc(r,t,e,i,n,s,o){let a,l;const h=(e-t)/i;if(h===1)a=t;else if(h===2)a=t,l=n;else if(h!==0){let u=r[t],c=r[t+1],f=0;const d=[0];for(let m=t+i;m<e;m+=i){const p=r[m],y=r[m+1];f+=Math.sqrt((p-u)*(p-u)+(y-c)*(y-c)),d.push(f),u=p,c=y}const _=n*f,g=kp(d,_);g<0?(l=(_-d[-g-2])/(d[-g-1]-d[-g-2]),a=t+(-g-2)*i):a=t+g*i}o=o>1?o:2,s=s||new Array(o);for(let u=0;u<o;++u)s[u]=a===void 0?NaN:l===void 0?r[a+u]:we(r[a+u],r[a+i+u],l);return s}const Fc=ke();class De{constructor(t,e,i,n,s,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i||null,this.properties_=s,this.squaredTolerance_,this.stride_=n,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Sd(this.flatCoordinates_):_h(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=En(this.getExtent());this.flatInteriorPoints_=Ih(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=hy(this.flatCoordinates_,this.ends_),e=FE(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=ry(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=Dc(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const i=this.ends_;for(let n=0,s=i.length;n<s;++n){const o=i[n],a=Dc(t,e,o,2,.5);dh(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=ne(t);const e=t.getExtent(),i=t.getWorldExtent();if(e&&i){const n=Yt(i)/Yt(e);yi(Fc,i[0],i[3],n,-n,0,0,0),Xi(this.flatCoordinates_,0,this.flatCoordinates_.length,2,Fc,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new De(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=yd((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const i=this.simplifiedGeometry_.getFlatCoordinates();let n;switch(this.type_){case"LineString":i.length=Sh(i,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,i,0),n=[i.length];break;case"MultiLineString":n=[],i.length=ey(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,i,0,n);break;case"Polygon":n=[],i.length=jd(i,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),i,0,n);break}return n&&(this.simplifiedGeometry_=new De(this.type_,i,n,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}De.prototype.getFlatCoordinates=De.prototype.getOrientedFlatCoordinates;class kc{constructor(t){this.rbush_=new og(t),this.items_={}}insert(t,e){const i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[J(e)]=i}load(t,e){const i=new Array(e.length);for(let n=0,s=e.length;n<s;n++){const o=t[n],a=e[n],l={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:a};i[n]=l,this.items_[J(a)]=l}this.rbush_.load(i)}remove(t){const e=J(t),i=this.items_[e];return delete this.items_[e],this.rbush_.remove(i)!==null}update(t,e){const i=this.items_[J(e)],n=[i.minX,i.minY,i.maxX,i.maxY];ds(n,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(e){return e.value})}getInExtent(t){const e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(n){return n.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let n=0,s=t.length;n<s;n++)if(i=e(t[n]),i)return i;return i}isEmpty(){return gr(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){const e=this.rbush_.toJSON();return Vi(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){this.rbush_.load(t.rbush_.all());for(const e in t.items_)this.items_[e]=t.items_[e]}}const xe={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"};class Ii extends vi{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class kE extends Pg{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:t.wrapX!==void 0?t.wrapX:!0}),this.on,this.once,this.un,this.loader_=fs,this.format_=t.format||null,this.overlaps_=t.overlaps===void 0?!0:t.overlaps,this.url_=t.url,t.loader!==void 0?this.loader_=t.loader:this.url_!==void 0&&(Q(this.format_,"`format` must be set when `url` is set"),this.loader_=Oc(this.url_,this.format_)),this.strategy_=t.strategy!==void 0?t.strategy:OE;const e=t.useSpatialIndex!==void 0?t.useSpatialIndex:!0;this.featuresRtree_=e?new kc:null,this.loadedExtentsRtree_=new kc,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null;let i,n;Array.isArray(t.features)?n=t.features:t.features&&(i=t.features,n=i.getArray()),!e&&i===void 0&&(i=new He(n)),n!==void 0&&this.addFeaturesInternal(n),i!==void 0&&this.bindFeaturesCollection_(i)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){const e=J(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);const i=t.getGeometry();if(i){const n=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(n,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new Ii(xe.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof De||(this.featureChangeKeys_[t]=[H(e,W.CHANGE,this.handleFeatureChange_,this),H(e,dr.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(e.getId()!==void 0){const n=String(e.getId());if(!(n in this.idIndex_))this.idIndex_[n]=e;else if(e instanceof De){const s=this.idIndex_[n];s instanceof De?Array.isArray(s)?s.push(e):this.idIndex_[n]=[s,e]:i=!1}else i=!1}return i&&(Q(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){const e=[],i=[],n=[];for(let s=0,o=t.length;s<o;s++){const a=t[s],l=J(a);this.addToIndex_(l,a)&&i.push(a)}for(let s=0,o=i.length;s<o;s++){const a=i[s],l=J(a);this.setupChangeEvents_(l,a);const h=a.getGeometry();if(h){const u=h.getExtent();e.push(u),n.push(a)}else this.nullGeometryFeatures_[l]=a}if(this.featuresRtree_&&this.featuresRtree_.load(e,n),this.hasListener(xe.ADDFEATURE))for(let s=0,o=i.length;s<o;s++)this.dispatchEvent(new Ii(xe.ADDFEATURE,i[s]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(xe.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(xe.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(Vt.ADD,i=>{e||(e=!0,this.addFeature(i.element),e=!1)}),t.addEventListener(Vt.REMOVE,i=>{e||(e=!0,this.removeFeature(i.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(const i in this.featureChangeKeys_)this.featureChangeKeys_[i].forEach(lt);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_){this.featuresRtree_.forEach(i=>{this.removeFeatureInternal(i)});for(const i in this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[i])}this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};const e=new Ii(xe.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){const i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(n){const s=n.getGeometry();if(s instanceof De||s.intersectsCoordinate(t))return e(n)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){const n=i.getGeometry();if(n instanceof De||n.intersectsExtent(t)){const s=e(i);if(s)return s}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),gr(this.nullGeometryFeatures_)||dh(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){const e=[];return this.forEachFeatureAtCoordinateDirect(t,function(i){e.push(i)}),e}getFeaturesInExtent(t,e){if(this.featuresRtree_){if(!(e&&e.canWrapX()&&this.getWrapX()))return this.featuresRtree_.getInExtent(t);const n=Pd(t,e);return[].concat(...n.map(s=>this.featuresRtree_.getInExtent(s)))}return this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){const i=t[0],n=t[1];let s=null;const o=[NaN,NaN];let a=1/0;const l=[-1/0,-1/0,1/0,1/0];return e=e||cs,this.featuresRtree_.forEachInExtent(l,function(h){if(e(h)){const u=h.getGeometry(),c=a;if(a=u instanceof De?0:u.closestPointXY(i,n,o,a),a<c){s=h;const f=Math.sqrt(a);l[0]=i-f,l[1]=n-f,l[2]=i+f,l[3]=n+f}}}),s}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){const e=this.idIndex_[t.toString()];return e!==void 0?e:null}getFeatureByUid(t){const e=this.uidIndex_[t];return e!==void 0?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){const e=t.target,i=J(e),n=e.getGeometry();if(!n)i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);else{const o=n.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(o,e)):this.featuresRtree_&&this.featuresRtree_.update(o,e)}const s=e.getId();if(s!==void 0){const o=s.toString();this.idIndex_[o]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[o]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new Ii(xe.CHANGEFEATURE,e))}hasFeature(t){const e=t.getId();return e!==void 0?e in this.idIndex_:J(t)in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&gr(this.nullGeometryFeatures_):this.featuresCollection_?this.featuresCollection_.getLength()===0:!0}loadFeatures(t,e,i){const n=this.loadedExtentsRtree_,s=this.strategy_(t,e,i);for(let o=0,a=s.length;o<a;++o){const l=s[o];n.forEachInExtent(l,function(u){return jn(u.extent,l)})||(++this.loadingExtentsCount_,this.dispatchEvent(new Ii(xe.FEATURESLOADSTART)),this.loader_.call(this,l,e,i,u=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ii(xe.FEATURESLOADEND,void 0,u))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new Ii(xe.FEATURESLOADERROR))}),n.insert(l,{extent:l.slice()}))}this.loading=this.loader_.length<4?!1:this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){const e=this.loadedExtentsRtree_,i=e.forEachInExtent(t,function(n){if(ds(n.extent,t))return n});i&&e.remove(i)}removeFeatures(t){let e=!1;for(let i=0,n=t.length;i<n;++i)e=this.removeFeatureInternal(t[i])||e;e&&this.changed()}removeFeature(t){if(!t)return;this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){const e=J(t);if(!(e in this.uidIndex_))return!1;e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t);const i=this.featureChangeKeys_[e];i==null||i.forEach(lt),delete this.featureChangeKeys_[e];const n=t.getId();if(n!==void 0){const s=n.toString(),o=this.idIndex_[s];o===t?delete this.idIndex_[s]:Array.isArray(o)&&(o.splice(o.indexOf(t),1),o.length===1&&(this.idIndex_[s]=o[0]))}return delete this.uidIndex_[e],this.hasListener(xe.REMOVEFEATURE)&&this.dispatchEvent(new Ii(xe.REMOVEFEATURE,t)),!0}removeFromIdIndex_(t){for(const e in this.idIndex_)if(this.idIndex_[e]===t){delete this.idIndex_[e];break}}setLoader(t){this.loader_=t}setUrl(t){Q(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader(Oc(t,this.format_))}setOverlaps(t){this.overlaps_=t,this.changed()}}const Lt={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class NE extends ze{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=t.insertFirst!==void 0?t.insertFirst:!0,this.stopEvent=t.stopEvent!==void 0?t.stopEvent:!0,this.element=document.createElement("div"),this.element.className=t.className!==void 0?t.className:"ol-overlay-container "+xy,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=t.autoPan===!0?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(Lt.ELEMENT,this.handleElementChanged),this.addChangeListener(Lt.MAP,this.handleMapChanged),this.addChangeListener(Lt.OFFSET,this.handleOffsetChanged),this.addChangeListener(Lt.POSITION,this.handlePositionChanged),this.addChangeListener(Lt.POSITIONING,this.handlePositioningChanged),t.element!==void 0&&this.setElement(t.element),this.setOffset(t.offset!==void 0?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),t.position!==void 0&&this.setPosition(t.position)}getElement(){return this.get(Lt.ELEMENT)}getId(){return this.id}getMap(){return this.get(Lt.MAP)||null}getOffset(){return this.get(Lt.OFFSET)}getPosition(){return this.get(Lt.POSITION)}getPositioning(){return this.get(Lt.POSITIONING)}handleElementChanged(){Qd(this.element);const t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){var e;this.mapPostrenderListenerKey&&((e=this.element)==null||e.remove(),lt(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);const t=this.getMap();if(t){this.mapPostrenderListenerKey=H(t,hi.POSTRENDER,this.render,this),this.updatePixelPosition();const i=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?i.insertBefore(this.element,i.childNodes[0]||null):i.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(Lt.ELEMENT,t)}setMap(t){this.set(Lt.MAP,t)}setOffset(t){this.set(Lt.OFFSET,t)}setPosition(t){this.set(Lt.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){const e=this.getMap();if(!e||!e.getTargetElement()||!this.get(Lt.POSITION))return;const i=this.getRect(e.getTargetElement(),e.getSize()),n=this.getElement(),s=this.getRect(n,[Ey(n),wy(n)]);t=t||{};const o=t.margin===void 0?20:t.margin;if(!jn(i,s)){const a=s[0]-i[0],l=i[2]-s[2],h=s[1]-i[1],u=i[3]-s[3],c=[0,0];if(a<0?c[0]=a-o:l<0&&(c[0]=Math.abs(l)+o),h<0?c[1]=h-o:u<0&&(c[1]=Math.abs(u)+o),c[0]!==0||c[1]!==0){const f=e.getView().getCenterInternal(),d=e.getPixelFromCoordinateInternal(f);if(!d)return;const _=[d[0]+c[0],d[1]+c[1]],g=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(_),duration:g.duration,easing:g.easing})}}}getRect(t,e){const i=t.getBoundingClientRect(),n=i.left+window.pageXOffset,s=i.top+window.pageYOffset;return[n,s,n+e[0],s+e[1]]}setPositioning(t){this.set(Lt.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){const t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}const i=t.getPixelFromCoordinate(e),n=t.getSize();this.updateRenderedPosition(i,n)}updateRenderedPosition(t,e){const i=this.element.style,n=this.getOffset(),s=this.getPositioning();this.setVisible(!0);const o=Math.round(t[0]+n[0])+"px",a=Math.round(t[1]+n[1])+"px";let l="0%",h="0%";s=="bottom-right"||s=="center-right"||s=="top-right"?l="-100%":(s=="bottom-center"||s=="center-center"||s=="top-center")&&(l="-50%"),s=="bottom-left"||s=="bottom-center"||s=="bottom-right"?h="-100%":(s=="center-left"||s=="center-center"||s=="center-right")&&(h="-50%");const u=`translate(${l}, ${h}) translate(${o}, ${a})`;this.rendered.transform_!=u&&(this.rendered.transform_=u,i.transform=u)}getOptions(){return this.options}}var GE=Pe('<section id="location" class="container-location" style="scroll-margin-top: 7rem;"><h3 class="bebas-neue-regular">Dnde queda La Barber?</h3> <div id="map" class="location"></div> <div id="popup" class="ol-popup"><div class="ol-popup-text">La Barber - Espaa 2596</div></div></section>');function zE(r,t){Cn(t,!1);let e=yn(),i=yn();Sr(()=>{const a=N0([-60.3225,-36.8927]),l=new jh({geometry:new ra(a)});l.setStyle(new Wi({image:new Ps({src:"https://openlayers.org/en/latest/examples/data/icon.png",scale:.8,anchor:[.5,1]})}));const h=new AE({source:new kE({features:[l]})}),u=new NE({element:K(i),positioning:"bottom-center",stopEvent:!1,offset:[0,-40]});new cv({target:K(e),layers:[new Ov({source:new Qv}),h],overlays:[u],view:new Ve({center:a,zoom:15})}),u.setPosition(a)}),Rr();var n=GE(),s=wt(Et(n),2);go(s,a=>bt(e,a),()=>K(e));var o=wt(s,2);go(o,a=>bt(i,a),()=>K(i)),fe(r,n),Tn()}var XE=Pe('<section class="container-form"><div id="form" style="scroll-margin-top: 4rem;"><p class="bebas-neue-regular">Cundo vens?</p></div> <div id="form-container" style="min-width: 320px; width: 100%; max-width: 600px; height: 700px;"><div class="calendly-inline-widget" style="min-width:320px;height:700px;"></div></div></section>');function WE(r,t){Cn(t,!1);const e="https://calendly.com/nicolasartemiodume/45?hide_event_type_details=1&hide_gdpr_banner=1";Sr(async()=>{await z_();const o=document.getElementById("form-container");if(o){const a=document.createElement("script");a.src="https://assets.calendly.com/assets/external/widget.js",a.async=!0,o.appendChild(a)}}),Rr();var i=XE(),n=wt(Et(i),2),s=Et(n);fo(s,"data-url",e),fe(r,i),Tn()}var YE=Pe('<footer><div class="line"></div> <p class="bebas-neue-regular">Designed and developed by <img src="/assets/icons/nsw.png" alt="nsw-icon"></p></footer>');function BE(r){var t=YE();fe(r,t)}var UE=Pe("<main><!> <!> <!> <!> <!> <!></main>");function KE(r){var t=UE(),e=Et(t);Mp(e,{});var i=wt(e,2);Lp(i,{});var n=wt(i,2);Fp(n,{});var s=wt(n,2);zE(s,{});var o=wt(s,2);WE(o,{});var a=wt(o,2);BE(a),fe(r,t)}var VE=Pe("<!> <!>",1);function ZE(r){var t=VE(),e=Qc(t);Ip(e);var i=wt(e,2);KE(i),fe(r,t)}j_(ZE,{target:document.getElementById("app")});
